!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){(function(r,o){!function(e,r){"object"==typeof n&&"undefined"!=typeof t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.ES6Promise=r()}(this,function(){"use strict";function t(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function i(e){B=e}function s(e){Y=e}function a(){return function(){return r.nextTick(d)}}function u(){return"undefined"!=typeof X?function(){X(d)}:f()}function c(){var e=0,t=new $(d),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<W;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}W=0}function h(){try{var t=e,n=t("vertx");return X=n.runOnLoop||n.runOnContext,u()}catch(e){return f()}}function p(e,t){var n=arguments,r=this,o=new this.constructor(m);void 0===o[oe]&&x(o);var i=r._state;return i?!function(){var e=n[i-1];Y(function(){return U(i,o,e,r._result)})}():N(r,o,e,t),o}function v(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return S(n,e),n}function m(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(e){return ue.error=e,ue}}function b(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function _(e,t,n){Y(function(e){var r=!1,o=b(n,t,function(n){r||(r=!0,t!==n?S(e,n):E(e,n))},function(t){r||(r=!0,P(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,P(e,o))},e)}function k(e,t){t._state===se?E(e,t._result):t._state===ae?P(e,t._result):N(t,void 0,function(t){return S(e,t)},function(t){return P(e,t)})}function T(e,t,r){t.constructor===e.constructor&&r===p&&t.constructor.resolve===v?k(e,t):r===ue?P(e,ue.error):void 0===r?E(e,t):n(r)?_(e,t,r):E(e,t)}function S(e,n){e===n?P(e,g()):t(n)?T(e,n,w(n)):E(e,n)}function O(e){e._onerror&&e._onerror(e._result),A(e)}function E(e,t){e._state===ie&&(e._result=t,e._state=se,0!==e._subscribers.length&&Y(A,e))}function P(e,t){e._state===ie&&(e._state=ae,e._result=t,Y(O,e))}function N(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+se]=n,o[i+ae]=r,0===i&&e._state&&Y(A,e)}function A(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?U(n,r,o,i):o(i);e._subscribers.length=0}}function R(){this.error=null}function j(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function U(e,t,r,o){var i=n(r),s=void 0,a=void 0,u=void 0,c=void 0;if(i){if(s=j(r,o),s===ce?(c=!0,a=s.error,s=null):u=!0,t===s)return void P(t,y())}else s=o,u=!0;t._state!==ie||(i&&u?S(t,s):c?P(t,a):e===se?E(t,s):e===ae&&P(t,s))}function I(e,t){try{t(function(t){S(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}function q(){return le++}function x(e){e[oe]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[oe]||x(this.promise),K(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):P(this.promise,C())}function C(){return new Error("Array Methods must be provided an Array")}function M(e){return new L(this,e).promise}function G(e){var t=this;return new t(K(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function D(e){var t=this,n=new t(m);return P(n,e),n}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function J(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[oe]=q(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&H(),this instanceof z?I(this,e):J())}function V(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=z}var F=void 0;F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var K=F,W=0,X=void 0,B=void 0,Y=function(e,t){ne[W]=e,ne[W+1]=t,W+=2,2===W&&(B?B(d):re())},Q="undefined"!=typeof window?window:void 0,Z=Q||{},$=Z.MutationObserver||Z.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof r&&"[object process]"==={}.toString.call(r),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?a():$?c():te?l():void 0===Q&&"function"==typeof e?h():f();var oe=Math.random().toString(36).substring(16),ie=void 0,se=1,ae=2,ue=new R,ce=new R,le=0;return L.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ie&&n<e;n++)this._eachEntry(t[n],n)},L.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===v){var o=w(e);if(o===p&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===z){var i=new n(m);T(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},L.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ie&&(this._remaining--,e===ae?P(r,n):this._result[t]=n),0===this._remaining&&E(r,this._result)},L.prototype._willSettleAt=function(e,t){var n=this;N(e,void 0,function(e){return n._settledAt(se,t,e)},function(e){return n._settledAt(ae,t,e)})},z.all=M,z.race=G,z.resolve=v,z.reject=D,z._setScheduler=i,z._setAsap=s,z._asap=Y,z.prototype={constructor:z,then:p,catch:function(e){return this.then(null,e)}},z.polyfill=V,z.Promise=z,z})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?v=p.concat(v):g=-1,v.length&&u())}function u(){if(!m){var e=i(a);m=!0;for(var t=v.length;t;){for(p=v,v=[];++g<t;)p&&p[g].run();g=-1,t=v.length}p=null,m=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var f,d,h=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(e){d=o}}();var p,v=[],m=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new c(e,t)),1!==v.length||m||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.EVENTS={SIGNIN:"SIGNIN",SIGNOUT:"SIGNOUT",SIGNUP:"SIGNUP"},n.URLS={token:"/token",signup:"/1/user/signup",requestResetPassword:"/1/user/requestResetPassword",resetPassword:"/1/user/resetPassword",changePassword:"/1/user/changePassword",objects:"/1/objects",objectsAction:"/1/objects/action"},n.SOCIAL_PROVIDERS={github:{name:"github",label:"Github",url:"www.github.com",css:{backgroundColor:"#444"},id:1},google:{name:"google",label:"Google",url:"www.google.com",css:{backgroundColor:"#dd4b39"},id:2},facebook:{name:"facebook",label:"Facebook",url:"www.facebook.com",css:{backgroundColor:"#3b5998"},id:3},twitter:{name:"twitter",label:"Twitter",url:"www.twitter.com",css:{backgroundColor:"#55acee"},id:4}}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={appName:null,anonymousToken:null,signUpToken:null,apiUrl:"https://api.backand.com",storagePrefix:"BACKAND_",storageType:"local",manageRefreshToken:!0,runSigninAfterSignup:!0,runSocket:!0,socketUrl:"https://socket.backand.com",isMobile:!1}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.filter={create:function(e,t,n){return{fieldName:e,operator:t,value:n}},operators:{numeric:{equals:"equals",notEquals:"notEquals",greaterThan:"greaterThan",greaterThanOrEqualsTo:"greaterThanOrEqualsTo",lessThan:"lessThan",lessThanOrEqualsTo:"lessThanOrEqualsTo",empty:"empty",notEmpty:"notEmpty"},date:{equals:"equals",notEquals:"notEquals",greaterThan:"greaterThan",greaterThanOrEqualsTo:"greaterThanOrEqualsTo",lessThan:"lessThan",lessThanOrEqualsTo:"lessThanOrEqualsTo",empty:"empty",notEmpty:"notEmpty"},text:{equals:"equals",notEquals:"notEquals",startsWith:"startsWith",endsWith:"endsWith",contains:"contains",notContains:"notContains",empty:"empty",notEmpty:"notEmpty"},boolean:{equals:"equals"},relation:{in:"in"}}},n.sort={create:function(e,t){return{fieldName:e,order:t}},orders:{asc:"asc",desc:"desc"}},n.exclude={options:{metadata:"metadata",totalRows:"totalRows",all:"metadata&totalRows"}}},{}],6:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=e("./defaults"),a=o(s),u=e("./constants"),c=r(u),l=e("./helpers"),f=r(l),d=e("./utils/storage"),h=o(d),p=e("./utils/http"),v=o(p),m=e("./utils/socket"),g=o(m),y=e("./services/auth"),w=r(y),b=e("./services/crud"),_=r(b),k=e("./services/files"),T=r(k);!function(){window.backand={},window.backand.initiate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(a.default,e),!a.default.appName)throw new Error("appName is missing");if(!a.default.anonymousToken)throw new Error("anonymousToken is missing");if(!a.default.signUpToken)throw new Error("signUpToken is missing");var t=new h.default(a.default.storageType,a.default.storagePrefix),n=(0,v.default)({baseURL:a.default.apiUrl}),r=null,o={storage:t,http:n};a.default.runSocket&&(r=new g.default(a.default.socketUrl),o.socket=r);var s=i({},w,_,T);for(var u in s)s[u]=s[u].bind(o);s.__initiate__(),window.backand={service:s,constants:c,helpers:f},a.default.runSocket&&(t.get("user")&&t.get("user").token.Authorization&&r.connect(t.get("user").token.Authorization,a.default.anonymousToken,a.default.appName),window.backand.socket=r)}}()},{"./constants":3,"./defaults":4,"./helpers":5,"./services/auth":7,"./services/crud":8,"./services/files":9,"./utils/http":10,"./utils/socket":11,"./utils/storage":12}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){this.storage.get("user")&&u.call(this,this.storage.get("user"))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{status:e,statusText:t,headers:n,data:r}}function s(e){var t=void 0;document.createEvent?(t=document.createEvent("Event"),t.initEvent(e,!0,!0),t.eventName=e,window.dispatchEvent(t)):(t=document.createEventObject(),t.eventType=e,t.eventName=e,window.fireEvent("on"+t.eventType,t))}function a(){this.storage.remove("user"),delete this.http.config.headers.AnonymousToken,delete this.http.config.headers.Authorization}function u(e){this.storage.set("user",e),this.http.config.headers=T(this.http.config.headers,this.storage.get("user").token)}function c(e){var t=this;return new Promise(function(n,r){a.call(t),u.call(t,{token:{AnonymousToken:E.default.anonymousToken},details:{username:"anonymous",name:"anonymous user"}}),e&&e(i(200,"OK",[],t.storage.get("user"))),n(i(200,"OK",[],t.storage.get("user")))})}function l(e,t,n,r){var o=this;return new Promise(function(i,c){a.call(o),o.http({url:S.URLS.token,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"username="+e+"&password="+t+"&appName="+E.default.appName+"&grant_type=password"}).then(function(e){u.call(o,{token:{Authorization:"Bearer "+e.data.access_token},details:e.data}),s(S.EVENTS.SIGNIN),E.default.runSocket&&o.socket.connect(o.storage.get("user").token.Authorization,E.default.anonymousToken,E.default.appName),n&&n(e),i(e)}).catch(function(e){r&&r(e),c(e)})})}function f(e,t,n,r,o,i,u){var c=this;return new Promise(function(l,f){a.call(c),c.http({url:S.URLS.signup,method:"POST",headers:{SignUpToken:E.default.signUpToken},data:{firstName:r,lastName:o,email:e,password:t,confirmPassword:n}},i,u).then(function(e){return s(S.EVENTS.SIGNUP),E.default.runSigninAfterSignup?g.call(c,{accessToken:e.data.access_token}):(i&&i(e),void l(e))}).then(function(e){i&&i(e),l(e)}).catch(function(e){u&&u(e),f(e)})})}function d(e,t,n){var r=S.SOCIAL_PROVIDERS[e],o=t?"up":"in",i=!t&&n?"&signupIfNotSignedIn=true":"";return"/user/socialSign"+o+"?provider="+r.label+i+"&response_type=token&client_id=self&redirect_uri="+r.url+"&state="}function h(e){var t=setInterval(function(){e.closed&&clearInterval(t);var n=T({},e.location),r=/\?(data|error)=(.+)/.exec(n.href);if(r&&r[1]&&r[2]){clearInterval(t);var o="data"===r[1]?i(200,"OK",[],JSON.parse(decodeURIComponent(r[2].replace(/#.*/,"")))):i(0,"",[],JSON.parse(decodeURIComponent(r[2].replace(/#.*/,""))));e.opener.postMessage(JSON.stringify(o),n.origin)}},333)}function p(e,t,n,r,o,s){var a=this;return new Promise(function(u,c){S.SOCIAL_PROVIDERS[e]||(s&&s(i(0,"",[],"Unknown Social Provider")),c(i(0,"",[],"Unknown Social Provider")));var l=E.default.apiUrl+"/1/"+d(e,t,!0)+"&appname="+E.default.appName+(r?"&email="+r:"")+"&returnAddress=",f=window.open("","",n);f.location=l,f.focus(),window.addEventListener("message",function(e){var t=e.origin||e.originalEvent.origin;t!==location.origin&&(s&&s(a._generateFakeResponse(0,"",[],"Unknown Origin Message")),c(a._generateFakeResponse(0,"",[],"Unknown Origin Message"))),window.removeEventListener("message",null,!1),f.close();var n=JSON.parse(e.data);200!=n.status?(s&&s(n),c(n)):(o&&o(n),u(n))},!1),h(f)})}function v(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left=1, top=1, width=600, height=600";return new Promise(function(i,u){a.call(r),p(e,!1,o,null,t,n).then(function(e){return s(S.EVENTS.SIGNUP),g.call(r,{accessToken:e.data.access_token})}).then(function(e){t&&t(e),i(e)}).catch(function(e){n&&n(e),u(e)})})}function m(e,t,n,r){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"left=1, top=1, width=600, height=600";return new Promise(function(u,c){a.call(o),_socialAuth(e,!0,i,t,n,r).then(function(e){return s(S.EVENTS.SIGNUP),E.default.runSigninAfterSignup?g.call(o,{accessToken:e.data.access_token}):(n&&n(e),void u(e))}).then(function(e){n&&n(e),u(e)}).catch(function(e){r&&r(e),c(e)})})}function g(e,t,n){var r=this;return new Promise(function(o,i){a.call(r);var c=[];for(var l in e)c.push(encodeURIComponent(l)+"="+encodeURIComponent(e[l]));c=c.join("&"),r.http({url:S.URLS.token,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c+"&appName="+E.default.appName+"&grant_type=password"}).then(function(e){u.call(r,{token:{Authorization:"Bearer "+e.data.access_token},details:e.data}),s(S.EVENTS.SIGNIN),E.default.runSocket&&r.socket.connect(r.storage.get("user").token.Authorization,E.default.anonymousToken,E.default.appName),t&&t(e),o(e)}).catch(function(e){n&&n(e),i(e)})})}function y(e,t,n){return this.http({url:S.URLS.requestResetPassword,method:"POST",data:{appName:E.default.appName,username:e}},t,n)}function w(e,t,n,r){return this.http({url:S.URLS.resetPassword,method:"POST",data:{newPassword:e,resetToken:t}},n,r)}function b(e,t,n,r){return this.http({url:S.URLS.changePassword,method:"POST",data:{oldPassword:e,newPassword:t}},n,r)}function _(e){a.call(this),s(S.EVENTS.SIGNOUT)}function k(){return this.storage.get("user").details}Object.defineProperty(n,"__esModule",{value:!0});var T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n.__initiate__=o,n.useAnonymousAuth=c,n.signin=l,n.signup=f,n.socialSignin=v,n.socialSignup=m,n.requestResetPassword=y,n.resetPassword=w,n.changePassword=b,n.signout=_,n.getUserDetails=k;var S=e("./../constants"),O=e("./../defaults"),E=r(O)},{"./../constants":3,"./../defaults":4}],8:[function(e,t,n){"use strict";function r(e,t){var n="?";for(var r in t)e.indexOf(r)!=-1&&(n=n.concat(r+"="+encodeURI(JSON.stringify(t[r]))));return n}function o(e,t,n,o){var i=["pageSize","pageNumber","filter","sort","search","exclude","deep","relatedObjects"];return this.http({url:c.URLS.objects+"/"+e+r(i,t),method:"GET"},n,o)}function i(e,t,n,o,i){var s=["returnObject","deep"];return this.http({url:c.URLS.objects+"/"+e+r(s,n),method:"POST",data:t},o,i)}function s(e,t,n,o,i){var s=["deep","exclude","level"];return this.http({url:c.URLS.objects+"/"+e+"/"+t+r(s,n),method:"GET"},o,i)}function a(e,t,n,o,i,s){var a=["returnObject","deep"];return this.http({url:c.URLS.objects+"/"+e+"/"+t+r(a,o),method:"PUT",data:n},i,s)}function u(e,t,n,r){return this.http({url:c.URLS.objects+"/"+e+"/"+t,method:"DELETE"},n,r)}Object.defineProperty(n,"__esModule",{value:!0}),n.getList=o,n.create=i,n.getOne=s,n.update=a,n.remove=u;var c=e("./../constants")},{"./../constants":3}],9:[function(e,t,n){"use strict";function r(e,t,n,r,o,s){return this.http({url:i.URLS.objectsAction+"/"+e+"?name="+t,method:"POST",data:{filename:n,filedata:r.substr(r.indexOf(",")+1,r.length)}},o,s)}function o(e,t,n,r,o){return this.http({url:i.URLS.objectsAction+"/"+e+"?name="+t,method:"DELETE",data:{filename:n}},r,o)}Object.defineProperty(n,"__esModule",{value:!0}),n.uploadFile=r,n.deleteFile=o;var i=e("./../constants")},{"./../constants":3}],10:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new c(e),n=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return c.prototype.request.apply(t,n)};return n.config=t.config,n}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("es6-promise"),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported by the browser");this.config=s({url:"/",method:"GET",headers:{}},t)}return a(e,[{key:"_getHeaders",value:function(e){return e.split("\r\n").filter(function(e){return e}).map(function(e){var t={},n=e.split(":");return t[n[0]]=n[1],t})}},{key:"_getData",value:function(e,t){return e?e.indexOf("json")===-1?t:JSON.parse(t):t}},{key:"_createResponse",value:function(e){return{status:e.status,statusText:e.statusText,headers:this._getHeaders(e.getAllResponseHeaders()),data:this._getData(e.getResponseHeader("Content-Type"),e.responseText)}}},{key:"_setHeaders",value:function(e,t){for(var n in t)e.setRequestHeader(n,t[n])}},{key:"_setData",value:function(e,t){t?"object"!=("undefined"==typeof t?"undefined":i(t))?e.send(t):(e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t))):e.send()}},{key:"request",value:function(e,t,n){var r=this;return new u.Promise(function(o,i){var a=new XMLHttpRequest,u=s({},r.config,e);a.open(u.method,""+(u.baseURL?u.baseURL+"/":"")+u.url,!0),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(200===a.status?(t&&t(r._createResponse(a)),o(r._createResponse(a))):(n&&n(r._createResponse(a)),i(r._createResponse(a))))},r._setHeaders(a,u.headers),r._setData(a,u.data)})}}]),e}();n.default=o},{"es6-promise":1}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),window.io||console.warn("SocketIO is not included"),this.url=t,this.socket=io.connect(this.url,{forceNew:!0})}return o(e,[{key:"connect",value:function(e,t,n){var r=this;console.info("trying to establish a socket connection to "+n+" ..."),this.socket.emit("login",e,t,n),this.socket.on("authorized",function(){console.info("socket connected")}),this.socket.on("notAuthorized",function(){setTimeout(r.disconnect(),1e3)}),this.socket.on("disconnect",function(){console.info("socket disconnect")}),this.socket.on("reconnecting",function(){console.info("socket reconnecting")}),this.socket.on("error",function(e){console.warn("error: "+e)})}},{key:"on",value:function(e,t){var n=arguments,r=this;this.socket.on(e,function(){var e=[].concat(Array.prototype.slice.call(n));t.apply(r.socket,e)})}},{key:"emit",value:function(e,t,n){var r=arguments,o=this;this.socket.emit(e,t,function(){var e=[].concat(Array.prototype.slice.call(r));n.apply(o.socket,e)})}},{key:"disconnect",value:function(){this.socket&&this.socket.close()}}]),e}();n.default=i},{}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(r(this,e),!window[t+"Storage"])throw new Error(t+"Storage is not supported by the browser");this.prefix=n,this.delimiter="__________",this.storage=window[t+"Storage"]}return s(e,[{key:"get",value:function(e){var t=this.storage.getItem(""+this.prefix+e);if(t){var n=t.split(this.delimiter),r=i(n,2),o=r[0],s=r[1];return"JSON"!=o?s:JSON.parse(s)}return t}},{key:"set",value:function(e,t){"object"!=("undefined"==typeof t?"undefined":o(t))?this.storage.setItem(""+this.prefix+e,"STRING"+this.delimiter+t):this.storage.setItem(""+this.prefix+e,"JSON"+this.delimiter+JSON.stringify(t))}},{key:"remove",value:function(e){this.storage.removeItem(""+this.prefix+e)}},{key:"clear",value:function(){for(var e=0;e<this.storage.length;e++)this.storage.getItem(this.storage.key(e)).indexOf(this.prefix)!=-1&&this.remove(this.storage.key(e))}}]),e}();n.default=a},{}]},{},[6]);
//# sourceMappingURL=backand.js.map
