{"version":3,"sources":["backand.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","backand","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","process","factory","ES6Promise","objectOrFunction","x","isFunction","setScheduler","scheduleFn","customSchedulerFn","setAsap","asapFn","asap","useNextTick","nextTick","flush","useVertxTimer","vertxNext","useSetTimeout","useMutationObserver","iterations","observer","BrowserMutationObserver","node","document","createTextNode","observe","characterData","data","useMessageChannel","channel","MessageChannel","port1","onmessage","port2","postMessage","globalSetTimeout","setTimeout","len","callback","queue","arg","undefined","attemptVertx","vertx","runOnLoop","runOnContext","then","onFulfillment","onRejection","_arguments","arguments","parent","child","constructor","noop","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","resolve","object","Constructor","promise","_resolve","selfFulfillment","TypeError","cannotReturnOwn","getThen","error","GET_THEN_ERROR","tryThen","value","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","reason","_reject","_label","handleOwnThenable","FULFILLED","REJECTED","handleMaybeThenable","maybeThenable","then$$","publishRejection","_onerror","publish","PENDING","_subscribers","subscribers","settled","detail","ErrorObject","tryCatch","TRY_CATCH_ERROR","hasCallback","succeeded","failed","initializePromise","resolver","nextId","id","Enumerator","input","_instanceConstructor","isArray","_input","_remaining","Array","_enumerate","validationError","all","entries","race","reject","_","needsResolver","needsNew","Promise","polyfill","local","Function","P","promiseToString","Object","prototype","toString","cast","_isArray","scheduleFlush","browserWindow","browserGlobal","MutationObserver","WebKitMutationObserver","isNode","isWorker","Uint8ClampedArray","importScripts","Math","random","substring","_eachEntry","entry","c","resolve$$","_then","_settledAt","_willSettleAt","state","enumerator","_setScheduler","_setAsap","_asap","catch","_process","2","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","concat","queueIndex","drainQueue","timeout","run","Item","array","args","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask","3","defineProperty","EVENTS","SIGNIN","SIGNOUT","SIGNUP","URLS","token","signup","requestResetPassword","resetPassword","changePassword","socialSigninWithToken","signout","profile","objects","objectsAction","query","SOCIAL_PROVIDERS","github","label","url","css","backgroundColor","google","facebook","twitter","4","default","appName","anonymousToken","signUpToken","apiUrl","storage","localStorage","storagePrefix","manageRefreshToken","runSigninAfterSignup","runSocket","socketUrl","isMobile","5","_classCallCheck","instance","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","filter","create","fieldName","operator","operators","numeric","equals","notEquals","greaterThan","greaterThanOrEqualsTo","lessThan","lessThanOrEqualsTo","empty","notEmpty","date","text","startsWith","endsWith","contains","notContains","boolean","relation","in","sort","order","orders","asc","desc","exclude","options","metadata","totalRows","StorageAbstract","setItem","getItem","removeItem","clear","val","6","_interopRequireWildcard","obj","__esModule","newObj","hasOwnProperty","_interopRequireDefault","_extends","assign","source","_defaults","_defaults2","_constants","constants","_helpers","helpers","_storage","_storage2","_http","_http2","_socket","_socket2","_auth","_auth2","_object","_object2","_file","_file2","_query","_query2","_user","_user2","dataMatch","exec","location","href","JSON","parse","decodeURIComponent","replace","status","isIE","documentMode","stringify","opener","origin","init","config","utils","http","baseURL","ENV","interceptors","request","indexOf","get","headers","responseError","scb","ecb","Message","__handleRefreshToken__","response","file","user","socket","connect","Authorization","bind","./constants","./defaults","./helpers","./services/auth","./services/file","./services/object","./services/query","./services/user","./utils/http","./utils/socket","./utils/storage","7","__generateFakeResponse__","statusText","__dispatchEvent__","event","createEvent","initEvent","eventName","dispatchEvent","createEventObject","eventType","fireEvent","_es6Promise","details","refresh_token","__signinWithToken__","username","refreshToken","useAnonymousAuth","access_token","token_type","expires_in","role","firstName","lastName","fullName","regId","userId","set","AnonymousToken","signin","password","method","Content-Type","email","confirmPassword","parameters","SignUpToken","__getSocialUrl__","providerName","isSignup","isAutoSignUp","provider","action","autoSignUpParam","__socialAuth__","isSignUp","spec","popup","open","focus","_handler","type","protocol","hostname","port","res","newValue","removeEventListener","close","addEventListener","socialSignin","accessToken","params","signupIfNotSignedIn","patch","_patch$data$data$","newDetails","socialSignup","tokenData","encodeURIComponent","join","console","log","newPassword","resetToken","oldPassword","remove","disconnect","getSocialProviders","./../constants","./../defaults","es6-promise","8","upload","fileAction","filename","filedata","substr","9","__allowedParams__","allowedParams","newParams","param","getList","getOne","update","post","10","11","__getUserDetailsFromStorage__","getUserDetails","force","getUsername","getUserRole","getToken","getRefreshToken","12","createInstance","context","Http","_len","_key","_typeof","Symbol","iterator","XMLHttpRequest","withCredentials","responseType","auth","split","header","map","jheader","parts","req","_getHeaders","getAllResponseHeaders","_getData","getResponseHeader","responseText","paramsArr","setRequestHeader","send","cfg","_this","_handleError","_encodeParams","ontimeout","onabort","onreadystatechange","readyState","DONE","_res","_createResponse","_setHeaders","_setData","13","Socket","io","onArr","forceNew","info","forEach","fn","warn","14","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","next","done","err","Storage","prefix","delimiter","item","_item$split","_item$split2"],"mappings":"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","file":"backand.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.backand = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (process,global){\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.0.5\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"_process\":2}],2:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar EVENTS = exports.EVENTS = {\n  SIGNIN: 'SIGNIN',\n  SIGNOUT: 'SIGNOUT',\n  SIGNUP: 'SIGNUP'\n};\n\nvar URLS = exports.URLS = {\n  token: 'token',\n  signup: '1/user/signup',\n  requestResetPassword: '1/user/requestResetPassword',\n  resetPassword: '1/user/resetPassword',\n  changePassword: '1/user/changePassword',\n  // socialLoginWithCode: '1/user/PROVIDER/code',\n  socialSigninWithToken: '1/user/PROVIDER/token',\n  // socialSingupWithCode: '1/user/PROVIDER/signupCode',\n  signout: '1/user/signout',\n  profile: 'api/account/profile',\n  objects: '1/objects',\n  objectsAction: '1/objects/action',\n  query: '1/query/data'\n};\n\nvar SOCIAL_PROVIDERS = exports.SOCIAL_PROVIDERS = {\n  github: { name: 'github', label: 'Github', url: 'www.github.com', css: { backgroundColor: '#444' }, id: 1 },\n  google: { name: 'google', label: 'Google', url: 'www.google.com', css: { backgroundColor: '#dd4b39' }, id: 2 },\n  facebook: { name: 'facebook', label: 'Facebook', url: 'www.facebook.com', css: { backgroundColor: '#3b5998' }, id: 3 },\n  twitter: { name: 'twitter', label: 'Twitter', url: 'www.twitter.com', css: { backgroundColor: '#55acee' }, id: 4 }\n};\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  appName: null,\n  anonymousToken: null,\n  signUpToken: null,\n  apiUrl: 'https://api.backand.com',\n  storage: window.localStorage,\n  storagePrefix: 'BACKAND_',\n  manageRefreshToken: true,\n  runSigninAfterSignup: true,\n  runSocket: false,\n  socketUrl: 'https://socket.backand.com',\n  isMobile: false\n};\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar filter = exports.filter = {\n  create: function create(fieldName, operator, value) {\n    return {\n      fieldName: fieldName,\n      operator: operator,\n      value: value\n    };\n  },\n  operators: {\n    numeric: { equals: \"equals\", notEquals: \"notEquals\", greaterThan: \"greaterThan\", greaterThanOrEqualsTo: \"greaterThanOrEqualsTo\", lessThan: \"lessThan\", lessThanOrEqualsTo: \"lessThanOrEqualsTo\", empty: \"empty\", notEmpty: \"notEmpty\" },\n    date: { equals: \"equals\", notEquals: \"notEquals\", greaterThan: \"greaterThan\", greaterThanOrEqualsTo: \"greaterThanOrEqualsTo\", lessThan: \"lessThan\", lessThanOrEqualsTo: \"lessThanOrEqualsTo\", empty: \"empty\", notEmpty: \"notEmpty\" },\n    text: { equals: \"equals\", notEquals: \"notEquals\", startsWith: \"startsWith\", endsWith: \"endsWith\", contains: \"contains\", notContains: \"notContains\", empty: \"empty\", notEmpty: \"notEmpty\" },\n    boolean: { equals: \"equals\" },\n    relation: { in: \"in\" }\n  }\n};\n\nvar sort = exports.sort = {\n  create: function create(fieldName, order) {\n    return {\n      fieldName: fieldName,\n      order: order\n    };\n  },\n  orders: { asc: \"asc\", desc: \"desc\" }\n};\n\nvar exclude = exports.exclude = {\n  options: { metadata: \"metadata\", totalRows: \"totalRows\", all: \"metadata,totalRows\" }\n};\n\nvar StorageAbstract = exports.StorageAbstract = function () {\n  function StorageAbstract() {\n    _classCallCheck(this, StorageAbstract);\n\n    if (this.constructor === StorageAbstract) {\n      throw new TypeError(\"Can not construct abstract class.\");\n    }\n    if (this.setItem === undefined || this.setItem === StorageAbstract.prototype.setItem) {\n      throw new TypeError(\"Must override setItem method.\");\n    }\n    if (this.getItem === undefined || this.getItem === StorageAbstract.prototype.getItem) {\n      throw new TypeError(\"Must override getItem method.\");\n    }\n    if (this.removeItem === undefined || this.removeItem === StorageAbstract.prototype.removeItem) {\n      throw new TypeError(\"Must override removeItem method.\");\n    }\n    if (this.clear === undefined || this.clear === StorageAbstract.prototype.clear) {\n      throw new TypeError(\"Must override clear method.\");\n    }\n    // this.data = {};\n  }\n\n  _createClass(StorageAbstract, [{\n    key: \"setItem\",\n    value: function setItem(id, val) {\n      throw new TypeError(\"Do not call abstract method setItem from child.\");\n      // return this.data[id] = String(val);\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem(id) {\n      throw new TypeError(\"Do not call abstract method getItem from child.\");\n      // return this.data.hasOwnProperty(id) ? this._data[id] : null;\n    }\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(id) {\n      throw new TypeError(\"Do not call abstract method removeItem from child.\");\n      // delete this.data[id];\n      // return null;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      throw new TypeError(\"Do not call abstract method clear from child.\");\n      // return this.data = {};\n    }\n  }]);\n\n  return StorageAbstract;\n}();\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /***********************************************\r\n                                                                                                                                                                                                                                                                   * backand JavaScript Library\r\n                                                                                                                                                                                                                                                                   * Authors: backand\r\n                                                                                                                                                                                                                                                                   * License: MIT (http://www.opensource.org/licenses/mit-license.php)\r\n                                                                                                                                                                                                                                                                   * Compiled At: 26/11/2016\r\n                                                                                                                                                                                                                                                                   ***********************************************/\n\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _constants = require('./constants');\n\nvar constants = _interopRequireWildcard(_constants);\n\nvar _helpers = require('./helpers');\n\nvar helpers = _interopRequireWildcard(_helpers);\n\nvar _storage = require('./utils/storage');\n\nvar _storage2 = _interopRequireDefault(_storage);\n\nvar _http = require('./utils/http');\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _socket = require('./utils/socket');\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nvar _auth = require('./services/auth');\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _object = require('./services/object');\n\nvar _object2 = _interopRequireDefault(_object);\n\nvar _file = require('./services/file');\n\nvar _file2 = _interopRequireDefault(_file);\n\nvar _query = require('./services/query');\n\nvar _query2 = _interopRequireDefault(_query);\n\nvar _user = require('./services/user');\n\nvar _user2 = _interopRequireDefault(_user);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// get data from url in social sign-in popup\n// let dataMatch = /\\?(data|error)=(.+)/.exec(window.location.href);\nvar dataMatch = /(data|error)=(.+)/.exec(window.location.href);\nif (dataMatch && dataMatch[1] && dataMatch[2]) {\n  var data = {\n    data: JSON.parse(decodeURIComponent(dataMatch[2].replace(/#.*/, '')))\n  };\n  data.status = dataMatch[1] === 'data' ? 200 : 0;\n  var isIE = false || !!document.documentMode;\n  if (!isIE) {\n    window.opener.postMessage(JSON.stringify(data), location.origin);\n  } else {\n    localStorage.setItem('SOCIAL_DATA', JSON.stringify(data));\n  }\n}\n\nvar backand = {\n  constants: constants,\n  helpers: helpers\n};\nbackand.init = function () {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\n  // combine defaults with user config\n  _extends(_defaults2.default, config);\n  // console.log(defaults);\n\n  // verify new defaults\n  if (!_defaults2.default.appName) throw new Error('appName is missing');\n  if (!_defaults2.default.anonymousToken) throw new Error('anonymousToken is missing');\n  if (!_defaults2.default.signUpToken) throw new Error('signUpToken is missing');\n\n  // init utils\n  var utils = {\n    storage: new _storage2.default(_defaults2.default.storage, _defaults2.default.storagePrefix),\n    http: _http2.default.create({\n      baseURL: _defaults2.default.apiUrl\n    }),\n    isIE: window.document && (false || !!document.documentMode),\n    ENV: 'browser'\n  };\n  if (_defaults2.default.runSocket) {\n    utils['socket'] = new _socket2.default(_defaults2.default.socketUrl);\n  }\n\n  utils.http.config.interceptors = {\n    request: function request(config) {\n      if (config.url.indexOf(constants.URLS.token) === -1 && backand.utils.storage.get('user')) {\n        config.headers = _extends({}, config.headers, backand.utils.storage.get('user').token);\n      }\n    },\n    responseError: function responseError(error, config, resolve, reject, scb, ecb) {\n      if (config.url.indexOf(constants.URLS.token) === -1 && _defaults2.default.manageRefreshToken && error.status === 401 && error.data && error.data.Message === 'invalid or expired token') {\n        _auth2.default.__handleRefreshToken__.call(utils, error).then(function (response) {\n          backand.utils.http.request(config, scb, ecb);\n        }).catch(function (error) {\n          ecb && ecb(error);\n          reject(error);\n        });\n      } else {\n        ecb && ecb(error);\n        reject(error);\n      }\n    }\n  };\n\n  // expose backand namespace to window\n  delete backand.init;\n  _extends(backand, _auth2.default, {\n    object: _object2.default,\n    file: _file2.default,\n    query: _query2.default,\n    user: _user2.default,\n    utils: utils\n  });\n  if (_defaults2.default.runSocket) {\n    backand.utils.storage.get('user') && backand.utils.socket.connect(backand.utils.storage.get('user').token.Authorization || null, _defaults2.default.anonymousToken, _defaults2.default.appName);\n    _extends(backand, { on: backand.utils.socket.on.bind(backand.utils.socket) });\n  }\n};\n\nmodule.exports = backand;\n\n},{\"./constants\":3,\"./defaults\":4,\"./helpers\":5,\"./services/auth\":7,\"./services/file\":8,\"./services/object\":9,\"./services/query\":10,\"./services/user\":11,\"./utils/http\":12,\"./utils/socket\":13,\"./utils/storage\":14}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _es6Promise = require('es6-promise');\n\nvar _constants = require('./../constants');\n\nvar _defaults = require('./../defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  __handleRefreshToken__: __handleRefreshToken__,\n  useAnonymousAuth: useAnonymousAuth,\n  signin: signin,\n  signup: signup,\n  socialSignin: socialSignin,\n  socialSigninWithToken: socialSigninWithToken,\n  socialSignup: socialSignup,\n  requestResetPassword: requestResetPassword,\n  resetPassword: resetPassword,\n  changePassword: changePassword,\n  signout: signout,\n  // getUserDetails,\n  getSocialProviders: getSocialProviders\n};\n\n\nfunction __generateFakeResponse__() {\n  var status = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var statusText = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var headers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var data = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n\n  return {\n    status: status,\n    statusText: statusText,\n    headers: headers,\n    data: data\n  };\n}\nfunction __dispatchEvent__(name) {\n  var event = void 0;\n  if (_defaults2.default.isMobile) return;\n  if (document.createEvent) {\n    event = document.createEvent('Event');\n    event.initEvent(name, true, true);\n    event.eventName = name;\n    window.dispatchEvent(event);\n  } else {\n    event = document.createEventObject();\n    event.eventType = name;\n    event.eventName = name;\n    window.fireEvent('on' + event.eventType, event);\n  }\n}\nfunction __handleRefreshToken__(error) {\n  return new _es6Promise.Promise(function (resolve, reject) {\n    var user = backand.utils.storage.get('user');\n    if (!user || !user.details.refresh_token) {\n      reject(__generateFakeResponse__(0, '', [], 'No cached user or refreshToken found. authentication is required.'));\n    } else {\n      __signinWithToken__({\n        username: user.details.username,\n        refreshToken: user.details.refresh_token\n      }).then(function (response) {\n        resolve(response);\n      }).catch(function (error) {\n        reject(error);\n      });\n    }\n  });\n};\nfunction useAnonymousAuth(scb) {\n  return new _es6Promise.Promise(function (resolve, reject) {\n    var details = {\n      \"access_token\": _defaults2.default.anonymousToken,\n      \"token_type\": \"AnonymousToken\",\n      \"expires_in\": 0,\n      \"appName\": _defaults2.default.appName,\n      \"username\": \"Guest\",\n      \"role\": \"User\",\n      \"firstName\": \"anonymous\",\n      \"lastName\": \"anonymous\",\n      \"fullName\": \"\",\n      \"regId\": 0,\n      \"userId\": null\n    };\n    backand.utils.storage.set('user', {\n      token: {\n        AnonymousToken: _defaults2.default.anonymousToken\n      },\n      details: details\n    });\n    __dispatchEvent__(_constants.EVENTS.SIGNIN);\n    if (_defaults2.default.runSocket) {\n      backand.utils.socket.connect(null, _defaults2.default.anonymousToken, _defaults2.default.appName);\n    }\n    scb && scb(__generateFakeResponse__(200, 'OK', [], details));\n    resolve(__generateFakeResponse__(200, 'OK', [], details));\n  });\n}\nfunction signin(username, password, scb, ecb) {\n  return new _es6Promise.Promise(function (resolve, reject) {\n    backand.utils.http({\n      url: _constants.URLS.token,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      data: 'username=' + username + '&password=' + password + '&appName=' + _defaults2.default.appName + '&grant_type=password'\n    }).then(function (response) {\n      backand.utils.storage.set('user', {\n        token: {\n          Authorization: 'Bearer ' + response.data.access_token\n        },\n        details: response.data\n      });\n      __dispatchEvent__(_constants.EVENTS.SIGNIN);\n      if (_defaults2.default.runSocket) {\n        backand.utils.socket.connect(backand.utils.storage.get('user').token.Authorization, _defaults2.default.anonymousToken, _defaults2.default.appName);\n      }\n      scb && scb(response);\n      resolve(response);\n    }).catch(function (error) {\n      ecb && ecb(error);\n      reject(error);\n    });\n  });\n}\nfunction signup(email, password, confirmPassword, firstName, lastName) {\n  var parameters = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n  var scb = arguments[6];\n  var ecb = arguments[7];\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    backand.utils.http({\n      url: _constants.URLS.signup,\n      method: 'POST',\n      headers: {\n        'SignUpToken': _defaults2.default.signUpToken\n      },\n      data: {\n        firstName: firstName,\n        lastName: lastName,\n        email: email,\n        password: password,\n        confirmPassword: confirmPassword,\n        parameters: parameters\n      }\n    }, scb, ecb).then(function (response) {\n      __dispatchEvent__(_constants.EVENTS.SIGNUP);\n      if (_defaults2.default.runSigninAfterSignup) {\n        return signin(response.data.username, password);\n      } else {\n        scb && scb(response);\n        resolve(response);\n      }\n    }).then(function (response) {\n      scb && scb(response);\n      resolve(response);\n    }).catch(function (error) {\n      ecb && ecb(error);\n      reject(error);\n    });\n  });\n}\nfunction __getSocialUrl__(providerName, isSignup, isAutoSignUp) {\n  var provider = _constants.SOCIAL_PROVIDERS[providerName];\n  var action = isSignup ? 'up' : 'in';\n  var autoSignUpParam = '&signupIfNotSignedIn=' + (!isSignup && isAutoSignUp ? 'true' : 'false');\n  return '/user/socialSign' + action + '?provider=' + provider.label + autoSignUpParam + '&response_type=token&client_id=self&redirect_uri=' + provider.url + '&state=';\n}\nfunction __socialAuth__(provider, isSignUp, spec, email) {\n  return new _es6Promise.Promise(function (resolve, reject) {\n    if (!_constants.SOCIAL_PROVIDERS[provider]) {\n      reject(__generateFakeResponse__(0, '', [], 'Unknown Social Provider'));\n    }\n    var url = _defaults2.default.apiUrl + '/1/' + __getSocialUrl__(provider, isSignUp, true) + '&appname=' + _defaults2.default.appName + (email ? '&email=' + email : '') + '&returnAddress='; // ${location.href}\n    var popup = null;\n    if (!backand.utils.isIE) {\n      popup = window.open(url, 'socialpopup', spec);\n    } else {\n      popup = window.open('', '', spec);\n      popup.location = url;\n    }\n    if (popup && popup.focus) {\n      popup.focus();\n    }\n\n    var _handler = function handler(e) {\n      var url = e.type === 'message' ? e.origin : e.url;\n      // ie-location-origin-polyfill\n      if (!window.location.origin) {\n        window.location.origin = window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n      }\n      if (url.indexOf(window.location.origin) === -1) {\n        reject(__generateFakeResponse__(0, '', [], 'Unknown Origin Message'));\n      }\n\n      var res = e.type === 'message' ? JSON.parse(e.data) : JSON.parse(e.newValue);\n      window.removeEventListener('message', _handler, false);\n      window.removeEventListener('storage', _handler, false);\n      if (popup && popup.close) {\n        popup.close();\n      }\n      e.type === 'storage' && localStorage.removeItem(e.key);\n\n      if (res.status != 200) {\n        reject(res);\n      } else {\n        resolve(res);\n      }\n    };\n    _handler = _handler.bind(popup);\n\n    window.addEventListener('message', _handler, false);\n    window.addEventListener('storage', _handler, false);\n  });\n}\nfunction socialSignin(provider, scb, ecb) {\n  var spec = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'left=1, top=1, width=500, height=560';\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    __socialAuth__(provider, false, spec, '').then(function (response) {\n      __dispatchEvent__(_constants.EVENTS.SIGNUP);\n      return __signinWithToken__({\n        accessToken: response.data.access_token\n      });\n    }).then(function (response) {\n      scb && scb(response);\n      resolve(response);\n    }).catch(function (error) {\n      ecb && ecb(error);\n      reject(error);\n    });\n  });\n};\nfunction socialSigninWithToken(provider, token, scb, ecb) {\n  return new _es6Promise.Promise(function (resolve, reject) {\n    backand.utils.http({\n      url: _constants.URLS.socialSigninWithToken.replace('PROVIDER', provider),\n      method: 'GET',\n      params: {\n        accessToken: token,\n        appName: _defaults2.default.appName,\n        signupIfNotSignedIn: true\n      }\n    }).then(function (response) {\n      backand.utils.storage.set('user', {\n        token: {\n          Authorization: 'Bearer ' + response.data.access_token\n        },\n        details: response.data\n      });\n      __dispatchEvent__(_constants.EVENTS.SIGNIN);\n      if (_defaults2.default.runSocket) {\n        backand.utils.socket.connect(backand.utils.storage.get('user').token.Authorization, _defaults2.default.anonymousToken, _defaults2.default.appName);\n      }\n      // TODO:PATCH\n      backand.utils.http({\n        url: _constants.URLS.objects + '/users',\n        method: 'GET',\n        params: {\n          filter: [{\n            \"fieldName\": \"email\",\n            \"operator\": \"equals\",\n            \"value\": response.data.username\n          }]\n        }\n      }).then(function (patch) {\n        var _patch$data$data$ = patch.data.data[0],\n            id = _patch$data$data$.id,\n            firstName = _patch$data$data$.firstName,\n            lastName = _patch$data$data$.lastName;\n\n        var user = backand.utils.storage.get('user');\n        var newDetails = { userId: id.toString(), firstName: firstName, lastName: lastName };\n        backand.utils.storage.set('user', {\n          token: user.token,\n          details: _extends({}, user.details, newDetails)\n        });\n        user = backand.utils.storage.get('user');\n        var res = __generateFakeResponse__(response.status, response.statusText, response.headers, user.details);\n        scb && scb(res);\n        resolve(res);\n      }).catch(function (error) {\n        ecb && ecb(error);\n        reject(error);\n      });\n      // EOP\n    }).catch(function (error) {\n      ecb && ecb(error);\n      reject(error);\n    });\n  });\n};\nfunction socialSignup(provider, email, scb, ecb) {\n  var spec = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'left=1, top=1, width=500, height=560';\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    __socialAuth__(provider, true, spec, email).then(function (response) {\n      __dispatchEvent__(_constants.EVENTS.SIGNUP);\n      if (_defaults2.default.runSigninAfterSignup) {\n        return __signinWithToken__({\n          accessToken: response.data.access_token\n        });\n      } else {\n        scb && scb(response);\n        resolve(response);\n      }\n    }).then(function (response) {\n      scb && scb(response);\n      resolve(response);\n    }).catch(function (error) {\n      ecb && ecb(error);\n      reject(error);\n    });\n  });\n}\nfunction __signinWithToken__(tokenData) {\n  return new _es6Promise.Promise(function (resolve, reject) {\n    var data = [];\n    for (var obj in tokenData) {\n      data.push(encodeURIComponent(obj) + '=' + encodeURIComponent(tokenData[obj]));\n    }\n    data = data.join(\"&\");\n\n    backand.utils.http({\n      url: _constants.URLS.token,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      data: data + '&appName=' + _defaults2.default.appName + '&grant_type=password'\n    }).then(function (response) {\n      backand.utils.storage.set('user', {\n        token: {\n          Authorization: 'Bearer ' + response.data.access_token\n        },\n        details: response.data\n      });\n      __dispatchEvent__(_constants.EVENTS.SIGNIN);\n      if (_defaults2.default.runSocket) {\n        backand.utils.socket.connect(backand.utils.storage.get('user').token.Authorization, _defaults2.default.anonymousToken, _defaults2.default.appName);\n      }\n      resolve(response);\n    }).catch(function (error) {\n      console.log(error);\n      reject(error);\n    });\n  });\n}\nfunction requestResetPassword(username, scb, ecb) {\n  return backand.utils.http({\n    url: _constants.URLS.requestResetPassword,\n    method: 'POST',\n    data: {\n      appName: _defaults2.default.appName,\n      username: username\n    }\n  }, scb, ecb);\n}\nfunction resetPassword(newPassword, resetToken, scb, ecb) {\n  return backand.utils.http({\n    url: _constants.URLS.resetPassword,\n    method: 'POST',\n    data: {\n      newPassword: newPassword,\n      resetToken: resetToken\n    }\n  }, scb, ecb);\n}\nfunction changePassword(oldPassword, newPassword, scb, ecb) {\n  return backand.utils.http({\n    url: _constants.URLS.changePassword,\n    method: 'POST',\n    data: {\n      oldPassword: oldPassword,\n      newPassword: newPassword\n    }\n  }, scb, ecb);\n}\nfunction signout(scb) {\n  return new _es6Promise.Promise(function (resolve, reject) {\n    backand.utils.http({\n      url: _constants.URLS.signout,\n      method: 'GET'\n    });\n    backand.utils.storage.remove('user');\n    if (_defaults2.default.runSocket) {\n      backand.utils.socket.disconnect();\n    }\n    __dispatchEvent__(_constants.EVENTS.SIGNOUT);\n    scb && scb(__generateFakeResponse__(200, 'OK', [], backand.utils.storage.get('user')));\n    resolve(__generateFakeResponse__(200, 'OK', [], backand.utils.storage.get('user')));\n  });\n}\nfunction getSocialProviders(scb) {\n  return new _es6Promise.Promise(function (resolve, reject) {\n    scb && scb(_constants.SOCIAL_PROVIDERS);\n    resolve(_constants.SOCIAL_PROVIDERS);\n  });\n}\n\n},{\"./../constants\":3,\"./../defaults\":4,\"es6-promise\":1}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _constants = require('./../constants');\n\nexports.default = {\n  upload: upload,\n  remove: remove\n};\n\n\nfunction upload(object, fileAction, filename, filedata, scb, ecb) {\n  return backand.utils.http({\n    url: _constants.URLS.objectsAction + '/' + object + '?name=' + fileAction,\n    method: 'POST',\n    data: {\n      filename: filename,\n      filedata: filedata.substr(filedata.indexOf(',') + 1, filedata.length)\n    }\n  }, scb, ecb);\n}\nfunction remove(object, fileAction, filename, scb, ecb) {\n  return backand.utils.http({\n    url: _constants.URLS.objectsAction + '/' + object + '?name=' + fileAction,\n    method: 'DELETE',\n    data: {\n      filename: filename\n    }\n  }, scb, ecb);\n}\n\n},{\"./../constants\":3}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _constants = require('./../constants');\n\nexports.default = {\n  getList: getList,\n  create: create,\n  getOne: getOne,\n  update: update,\n  remove: remove,\n  action: {\n    get: get,\n    post: post\n  }\n};\n\n\nfunction __allowedParams__(allowedParams, params) {\n  var newParams = {};\n  for (var param in params) {\n    if (allowedParams.indexOf(param) != -1) {\n      newParams[param] = params[param];\n    }\n  }\n  return newParams;\n}\nfunction getList(object) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var scb = arguments[2];\n  var ecb = arguments[3];\n\n  var allowedParams = ['pageSize', 'pageNumber', 'filter', 'sort', 'search', 'exclude', 'deep', 'relatedObjects'];\n  return backand.utils.http({\n    url: _constants.URLS.objects + '/' + object,\n    method: 'GET',\n    params: __allowedParams__(allowedParams, params)\n  }, null, ecb).then(function (response) {\n    var totalRows = response.data['totalRows'];\n    response.data = response.data['data'];\n    scb && scb(response, totalRows);\n    return response;\n  });\n}\nfunction create(object, data) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var scb = arguments[3];\n  var ecb = arguments[4];\n\n  var allowedParams = ['returnObject', 'deep'];\n  return backand.utils.http({\n    url: _constants.URLS.objects + '/' + object,\n    method: 'POST',\n    data: data,\n    params: __allowedParams__(allowedParams, params)\n  }, scb, ecb);\n}\nfunction getOne(object, id) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var scb = arguments[3];\n  var ecb = arguments[4];\n\n  var allowedParams = ['deep', 'exclude', 'level'];\n  return backand.utils.http({\n    url: _constants.URLS.objects + '/' + object + '/' + id,\n    method: 'GET',\n    params: __allowedParams__(allowedParams, params)\n  }, scb, ecb);\n}\nfunction update(object, id, data) {\n  var params = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var scb = arguments[4];\n  var ecb = arguments[5];\n\n  var allowedParams = ['returnObject', 'deep'];\n  return backand.utils.http({\n    url: _constants.URLS.objects + '/' + object + '/' + id,\n    method: 'PUT',\n    data: data,\n    params: __allowedParams__(allowedParams, params)\n  }, scb, ecb);\n}\nfunction remove(object, id, scb, ecb) {\n  return backand.utils.http({\n    url: _constants.URLS.objects + '/' + object + '/' + id,\n    method: 'DELETE'\n  }, scb, ecb);\n}\n\nfunction get(object, action) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var scb = arguments[3];\n  var ecb = arguments[4];\n\n  return backand.utils.http({\n    url: _constants.URLS.objectsAction + '/' + object + '?name=' + action,\n    method: 'GET',\n    params: params\n  }, scb, ecb);\n}\nfunction post(object, action, data) {\n  var params = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var scb = arguments[4];\n  var ecb = arguments[5];\n\n  return backand.utils.http({\n    url: _constants.URLS.objectsAction + '/' + object + '?name=' + action,\n    method: 'POST',\n    data: data,\n    params: params\n  }, scb, ecb);\n}\n\n},{\"./../constants\":3}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _constants = require('./../constants');\n\nexports.default = {\n  get: get,\n  post: post\n};\n\n\nfunction get(name) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var scb = arguments[2];\n  var ecb = arguments[3];\n\n  return backand.utils.http({\n    url: _constants.URLS.query + '/' + name,\n    method: 'GET',\n    params: params\n  }, scb, ecb);\n}\nfunction post(name, data) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var scb = arguments[3];\n  var ecb = arguments[4];\n\n  return backand.utils.http({\n    url: _constants.URLS.query + '/' + name,\n    method: 'POST',\n    data: data,\n    params: params\n  }, scb, ecb);\n}\n\n},{\"./../constants\":3}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _es6Promise = require('es6-promise');\n\nvar _constants = require('./../constants');\n\nexports.default = {\n  getUserDetails: getUserDetails,\n  getUsername: getUsername,\n  getUserRole: getUserRole,\n  getToken: getToken,\n  getRefreshToken: getRefreshToken\n};\n\n\nfunction __generateFakeResponse__() {\n  var status = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var statusText = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var headers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var data = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n\n  return {\n    status: status,\n    statusText: statusText,\n    headers: headers,\n    data: data\n  };\n}\nfunction __getUserDetailsFromStorage__(scb, ecb) {\n  return new _es6Promise.Promise(function (resolve, reject) {\n    var user = backand.utils.storage.get('user');\n    if (!user) {\n      ecb && ecb(__generateFakeResponse__(0, '', [], 'No cached user found. authentication is required.'));\n      reject(__generateFakeResponse__(0, '', [], 'No cached user found. authentication is required.'));\n    } else {\n      scb && scb(__generateFakeResponse__(200, 'OK', [], user.details));\n      resolve(__generateFakeResponse__(200, 'OK', [], user.details));\n    }\n  });\n}\nfunction getUserDetails(scb, ecb) {\n  var force = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (!force) {\n    return __getUserDetailsFromStorage__(scb, ecb);\n  } else {\n    return backand.utils.http({\n      url: _constants.URLS.profile,\n      method: 'GET'\n    }).then(function (response) {\n      var user = backand.utils.storage.get('user');\n      var newDetails = response.data;\n      backand.utils.storage.set('user', {\n        token: user.token,\n        details: _extends({}, user.details, newDetails)\n      });\n      return __getUserDetailsFromStorage__(scb, ecb);\n    });\n  }\n}\nfunction getUsername(scb, ecb) {\n  return __getUserDetailsFromStorage__(null, ecb).then(function (response) {\n    response.data = response.data['username'];\n    scb && scb(response);\n    return response;\n  });\n}\nfunction getUserRole() {\n  return __getUserDetailsFromStorage__(null, ecb).then(function (response) {\n    response.data = response.data['role'];\n    scb && scb(response);\n    return response;\n  });\n}\nfunction getToken() {\n  return __getUserDetailsFromStorage__(null, ecb).then(function (response) {\n    response.data = response.data['access_token'];\n    scb && scb(response);\n    return response;\n  });\n}\nfunction getRefreshToken() {\n  return __getUserDetailsFromStorage__(null, ecb).then(function (response) {\n    response.data = response.data['refresh_token'];\n    scb && scb(response);\n    return response;\n  });\n}\n\n},{\"./../constants\":3,\"es6-promise\":1}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _es6Promise = require('es6-promise');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Http = function () {\n  function Http() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Http);\n\n    if (!window.XMLHttpRequest) throw new Error('XMLHttpRequest is not supported by this platform');\n\n    this.config = _extends({\n      // url: '/',\n      method: 'GET',\n      headers: {},\n      params: {},\n      interceptors: {},\n      withCredentials: false,\n      responseType: 'json',\n      // timeout: null,\n      auth: {\n        username: null,\n        password: null\n      }\n    }, config);\n  }\n\n  _createClass(Http, [{\n    key: '_getHeaders',\n    value: function _getHeaders(headers) {\n      return headers.split('\\r\\n').filter(function (header) {\n        return header;\n      }).map(function (header) {\n        var jheader = {};\n        var parts = header.split(':');\n        jheader[parts[0]] = parts[1];\n        return jheader;\n      });\n    }\n  }, {\n    key: '_getData',\n    value: function _getData(type, data) {\n      if (!type) {\n        return data;\n      } else if (type.indexOf('json') === -1) {\n        return data;\n      } else {\n        return JSON.parse(data);\n      }\n    }\n  }, {\n    key: '_createResponse',\n    value: function _createResponse(req, config) {\n      return {\n        status: req.status,\n        statusText: req.statusText,\n        headers: this._getHeaders(req.getAllResponseHeaders()),\n        config: config,\n        data: this._getData(req.getResponseHeader(\"Content-Type\"), req.responseText)\n      };\n    }\n  }, {\n    key: '_handleError',\n    value: function _handleError(data, config) {\n      return {\n        status: 0,\n        statusText: 'ERROR',\n        headers: [],\n        config: config,\n        data: data\n      };\n    }\n  }, {\n    key: '_encodeParams',\n    value: function _encodeParams(params) {\n      var paramsArr = [];\n      for (var param in params) {\n        var val = params[param];\n        if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object') {\n          val = JSON.stringify(val);\n        }\n        paramsArr.push(param + '=' + encodeURIComponent(val));\n      }\n      return paramsArr.join('&');\n    }\n  }, {\n    key: '_setHeaders',\n    value: function _setHeaders(req, headers) {\n      for (var header in headers) {\n        req.setRequestHeader(header, headers[header]);\n      }\n    }\n  }, {\n    key: '_setData',\n    value: function _setData(req, data) {\n      if (!data) {\n        req.send();\n      } else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) != 'object') {\n        req.send(data);\n      } else {\n        req.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n        req.send(JSON.stringify(data));\n      }\n    }\n  }, {\n    key: 'request',\n    value: function request(cfg, scb, ecb) {\n      var _this = this;\n\n      return new _es6Promise.Promise(function (resolve, reject) {\n\n        var req = new XMLHttpRequest();\n        var config = _extends({}, _this.config, cfg);\n\n        if (!config.url || typeof config.url !== 'string' || config.url.length === 0) {\n          var res = _this._handleError('url parameter is missing', config);\n          ecb && ecb(res);\n          reject(res);\n        }\n        if (config.withCredentials) {\n          req.withCredentials = true;\n        }\n        if (config.timeout) {\n          req.timeout = true;\n        }\n        config.interceptors.request && config.interceptors.request.call(_this, config);\n        var params = _this._encodeParams(config.params);\n        req.open(config.method, '' + (config.baseURL ? config.baseURL + '/' : '') + config.url + (params ? '?' + params : ''), true, config.auth.username, config.auth.password);\n        req.ontimeout = function () {\n          var res = this._handleError('timeout', config);\n          ecb && ecb(res);\n          reject(res);\n        };\n        req.onabort = function () {\n          var res = this._handleError('abort', config);\n          ecb && ecb(res);\n          reject(res);\n        };\n        req.onreadystatechange = function () {\n          if (req.readyState == XMLHttpRequest.DONE) {\n            var _res = _this._createResponse(req, config);\n            if (_res.status === 200) {\n              if (config.interceptors.response) {\n                config.interceptors.response.call(_this, _res, config, resolve, reject, scb, ecb);\n              } else {\n                scb && scb(_res);\n                resolve(_res);\n              }\n            } else {\n              if (config.interceptors.responseError) {\n                config.interceptors.responseError.call(_this, _res, config, resolve, reject, scb, ecb);\n              } else {\n                ecb && ecb(_res);\n                reject(_res);\n              }\n            }\n          }\n        };\n        _this._setHeaders(req, config.headers);\n        _this._setData(req, config.data);\n      });\n    }\n  }]);\n\n  return Http;\n}();\n\nfunction createInstance() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var context = new Http(config);\n  var instance = function instance() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return Http.prototype.request.apply(context, args);\n  };\n  instance.config = context.config;\n  return instance;\n}\n\nvar http = createInstance();\nhttp.create = function (config) {\n  return createInstance(config);\n};\n\nexports.default = http;\n\n},{\"es6-promise\":1}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Socket = function () {\n  function Socket(url) {\n    _classCallCheck(this, Socket);\n\n    if (!window.io) throw new Error('runSocket is true but socketio-client is not included');\n    this.url = url;\n    this.onArr = [];\n    this.socket = null;\n  }\n\n  _createClass(Socket, [{\n    key: 'on',\n    value: function on(eventName, callback) {\n      this.onArr.push({ eventName: eventName, callback: callback });\n    }\n  }, {\n    key: 'connect',\n    value: function connect(token, anonymousToken, appName) {\n      var _this = this;\n\n      this.disconnect();\n      this.socket = io.connect(this.url, { 'forceNew': true });\n\n      this.socket.on('connect', function () {\n        console.info('trying to establish a socket connection to ' + appName + ' ...');\n        _this.socket.emit(\"login\", token, anonymousToken, appName);\n      });\n\n      this.socket.on('authorized', function () {\n        console.info('socket connected');\n        _this.onArr.forEach(function (fn) {\n          _this.socket.on(fn.eventName, function (data) {\n            fn.callback(data);\n          });\n        });\n      });\n\n      this.socket.on('notAuthorized', function () {\n        setTimeout(function () {\n          return _this.disconnect();\n        }, 1000);\n      });\n\n      this.socket.on('disconnect', function () {\n        console.info('socket disconnect');\n      });\n\n      this.socket.on('reconnecting', function () {\n        console.info('socket reconnecting');\n      });\n\n      this.socket.on('error', function (error) {\n        console.warn('error: ' + error);\n      });\n    }\n  }, {\n    key: 'disconnect',\n    value: function disconnect() {\n      if (this.socket) {\n        this.socket.close();\n      }\n    }\n  }]);\n\n  return Socket;\n}();\n\nexports.default = Socket;\n\n},{}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Storage = function () {\n  function Storage(storage) {\n    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n    _classCallCheck(this, Storage);\n\n    if (!storage) throw new Error('The provided Storage is not supported by this platform');\n    if (!storage.setItem || !storage.getItem || !storage.removeItem || !storage.clear) throw new Error('The provided Storage not implement the necessary functions');\n    this.storage = storage;\n    this.prefix = prefix;\n    this.delimiter = '__________';\n  }\n\n  _createClass(Storage, [{\n    key: 'get',\n    value: function get(key) {\n      var item = this.storage.getItem('' + this.prefix + key);\n      if (!item) {\n        return item;\n      } else {\n        var _item$split = item.split(this.delimiter),\n            _item$split2 = _slicedToArray(_item$split, 2),\n            type = _item$split2[0],\n            val = _item$split2[1];\n\n        if (type != 'JSON') {\n          return val;\n        } else {\n          return JSON.parse(val);\n        }\n      }\n    }\n  }, {\n    key: 'set',\n    value: function set(key, val) {\n      if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) != 'object') {\n        this.storage.setItem('' + this.prefix + key, 'STRING' + this.delimiter + val);\n      } else {\n        this.storage.setItem('' + this.prefix + key, 'JSON' + this.delimiter + JSON.stringify(val));\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove(key) {\n      this.storage.removeItem('' + this.prefix + key);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      for (var i = 0; i < this.storage.length; i++) {\n        if (this.storage.getItem(this.storage.key(i)).indexOf(this.prefix) != -1) this.remove(this.storage.key(i));\n      }\n    }\n  }]);\n\n  return Storage;\n}();\n\nexports.default = Storage;\n\n},{}]},{},[6])(6)\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJzcmNcXGNvbnN0YW50cy5qcyIsInNyY1xcZGVmYXVsdHMuanMiLCJzcmNcXGhlbHBlcnMuanMiLCJzcmNcXGluZGV4LmpzIiwic3JjXFxzZXJ2aWNlc1xcYXV0aC5qcyIsInNyY1xcc2VydmljZXNcXGZpbGUuanMiLCJzcmNcXHNlcnZpY2VzXFxvYmplY3QuanMiLCJzcmNcXHNlcnZpY2VzXFxxdWVyeS5qcyIsInNyY1xcc2VydmljZXNcXHVzZXIuanMiLCJzcmNcXHV0aWxzXFxodHRwLmpzIiwic3JjXFx1dGlsc1xcc29ja2V0LmpzIiwic3JjXFx1dGlsc1xcc3RvcmFnZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDcG9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQ3BMTyxJQUFNLDBCQUFTO0FBQ3BCLFVBQVEsUUFEWTtBQUVwQixXQUFTLFNBRlc7QUFH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R0FBc0MsR0FBdEMsV0FBb0QsS0FBSyxTQUF6RCxHQUFxRSxLQUFLLFNBQUwsQ0FBZSxHQUFmLENBQXJFO0FBQ0Q7QUFDRjs7OzJCQUNPLEcsRUFBSztBQUNYLFdBQUssT0FBTCxDQUFhLFVBQWIsTUFBMkIsS0FBSyxNQUFoQyxHQUF5QyxHQUF6QztBQUNEOzs7NEJBQ1E7QUFDUCxXQUFJLElBQUksSUFBRyxDQUFYLEVBQWMsSUFBSSxLQUFLLE9BQUwsQ0FBYSxNQUEvQixFQUF1QyxHQUF2QyxFQUEyQztBQUN4QyxZQUFHLEtBQUssT0FBTCxDQUFhLE9BQWIsQ0FBcUIsS0FBSyxPQUFMLENBQWEsR0FBYixDQUFpQixDQUFqQixDQUFyQixFQUEwQyxPQUExQyxDQUFrRCxLQUFLLE1BQXZELEtBQWtFLENBQUMsQ0FBdEUsRUFDQyxLQUFLLE1BQUwsQ0FBWSxLQUFLLE9BQUwsQ0FBYSxHQUFiLENBQWlCLENBQWpCLENBQVo7QUFDSDtBQUNGOzs7Ozs7a0JBekNrQixPIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgNC4wLjVcbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxudmFyIF9pc0FycmF5ID0gdW5kZWZpbmVkO1xuaWYgKCFBcnJheS5pc0FycmF5KSB7XG4gIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xufSBlbHNlIHtcbiAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xufVxuXG52YXIgaXNBcnJheSA9IF9pc0FycmF5O1xuXG52YXIgbGVuID0gMDtcbnZhciB2ZXJ0eE5leHQgPSB1bmRlZmluZWQ7XG52YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB1bmRlZmluZWQ7XG5cbnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcbiAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG4gIGxlbiArPSAyO1xuICBpZiAobGVuID09PSAyKSB7XG4gICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZUZsdXNoKCk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG59XG5cbmZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XG4gIGFzYXAgPSBhc2FwRm47XG59XG5cbnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG52YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xudmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHt9KS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbi8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG52YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4vLyBub2RlXG5mdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcbiAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgfTtcbn1cblxuLy8gdmVydHhcbmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XG4gIGlmICh0eXBlb2YgdmVydHhOZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2ZXJ0eE5leHQoZmx1c2gpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xufVxuXG5mdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7XG4gIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyO1xuICB9O1xufVxuXG4vLyB3ZWIgd29ya2VyXG5mdW5jdGlvbiB1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcbiAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHtcbiAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gZXM2LXByb21pc2Ugd2lsbCBiZSB1bmFmZmVjdGVkIGJ5XG4gIC8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKVxuICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdsb2JhbFNldFRpbWVvdXQoZmx1c2gsIDEpO1xuICB9O1xufVxuXG52YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldO1xuICAgIHZhciBhcmcgPSBxdWV1ZVtpICsgMV07XG5cbiAgICBjYWxsYmFjayhhcmcpO1xuXG4gICAgcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgcXVldWVbaSArIDFdID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkge1xuICB0cnkge1xuICAgIHZhciByID0gcmVxdWlyZTtcbiAgICB2YXIgdmVydHggPSByKCd2ZXJ0eCcpO1xuICAgIHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG4gICAgcmV0dXJuIHVzZVZlcnR4VGltZXIoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG4gIH1cbn1cblxudmFyIHNjaGVkdWxlRmx1c2ggPSB1bmRlZmluZWQ7XG4vLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuaWYgKGlzTm9kZSkge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTtcbn0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbn0gZWxzZSBpZiAoaXNXb3JrZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7XG59IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7XG59IGVsc2Uge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlU2V0VGltZW91dCgpO1xufVxuXG5mdW5jdGlvbiB0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzO1xuXG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuXG4gIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbWFrZVByb21pc2UoY2hpbGQpO1xuICB9XG5cbiAgdmFyIF9zdGF0ZSA9IHBhcmVudC5fc3RhdGU7XG5cbiAgaWYgKF9zdGF0ZSkge1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2FsbGJhY2sgPSBfYXJndW1lbnRzW19zdGF0ZSAtIDFdO1xuICAgICAgYXNhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VDYWxsYmFjayhfc3RhdGUsIGNoaWxkLCBjYWxsYmFjaywgcGFyZW50Ll9yZXN1bHQpO1xuICAgICAgfSk7XG4gICAgfSkoKTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuICB9XG5cbiAgcmV0dXJuIGNoaWxkO1xufVxuXG4vKipcbiAgYFByb21pc2UucmVzb2x2ZWAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZXNvbHZlZCB3aXRoIHRoZVxuICBwYXNzZWQgYHZhbHVlYC4gSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlc29sdmUoMSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKDEpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVzb2x2ZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSB2YWx1ZSB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aFxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlblxuICBgdmFsdWVgXG4qL1xuZnVuY3Rpb24gcmVzb2x2ZShvYmplY3QpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIF9yZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNik7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG52YXIgUEVORElORyA9IHZvaWQgMDtcbnZhciBGVUxGSUxMRUQgPSAxO1xudmFyIFJFSkVDVEVEID0gMjtcblxudmFyIEdFVF9USEVOX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7XG5cbmZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xufVxuXG5mdW5jdGlvbiBjYW5ub3RSZXR1cm5Pd24oKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG59XG5cbmZ1bmN0aW9uIGdldFRoZW4ocHJvbWlzZSkge1xuICB0cnkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcbiAgICByZXR1cm4gR0VUX1RIRU5fRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5VGhlbih0aGVuLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gIHRyeSB7XG4gICAgdGhlbi5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuKSB7XG4gIGFzYXAoZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG4gICAgdmFyIGVycm9yID0gdHJ5VGhlbih0aGVuLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG4gICAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcblxuICAgICAgX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH1cbiAgfSwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG4gIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgIF9yZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkKSB7XG4gIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJCA9PT0gdGhlbiAmJiBtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUpIHtcbiAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhlbiQkID09PSBHRVRfVEhFTl9FUlJPUikge1xuICAgICAgX3JlamVjdChwcm9taXNlLCBHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgfSBlbHNlIGlmICh0aGVuJCQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhlbiQkKSkge1xuICAgICAgaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgIF9yZWplY3QocHJvbWlzZSwgc2VsZkZ1bGZpbGxtZW50KCkpO1xuICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgZ2V0VGhlbih2YWx1ZSkpO1xuICB9IGVsc2Uge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcbiAgfVxuXG4gIHB1Ymxpc2gocHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG4gIHByb21pc2UuX3N0YXRlID0gRlVMRklMTEVEO1xuXG4gIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHByb21pc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEO1xuICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgYXNhcChwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblxuICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gIF9zdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uO1xuXG4gIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoKHByb21pc2UpIHtcbiAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG4gIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjaGlsZCA9IHVuZGVmaW5lZCxcbiAgICAgIGNhbGxiYWNrID0gdW5kZWZpbmVkLFxuICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgfVxuICB9XG5cbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcbn1cblxuZnVuY3Rpb24gRXJyb3JPYmplY3QoKSB7XG4gIHRoaXMuZXJyb3IgPSBudWxsO1xufVxuXG52YXIgVFJZX0NBVENIX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7XG5cbmZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgdmFsdWUgPSB1bmRlZmluZWQsXG4gICAgICBlcnJvciA9IHVuZGVmaW5lZCxcbiAgICAgIHN1Y2NlZWRlZCA9IHVuZGVmaW5lZCxcbiAgICAgIGZhaWxlZCA9IHVuZGVmaW5lZDtcblxuICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG4gICAgaWYgKHZhbHVlID09PSBUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuICAgICAgdmFsdWUgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gZGV0YWlsO1xuICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gIH1cblxuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAvLyBub29wXG4gIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChmYWlsZWQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG4gIHRyeSB7XG4gICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHtcbiAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuICAgICAgX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCBlKTtcbiAgfVxufVxuXG52YXIgaWQgPSAwO1xuZnVuY3Rpb24gbmV4dElkKCkge1xuICByZXR1cm4gaWQrKztcbn1cblxuZnVuY3Rpb24gbWFrZVByb21pc2UocHJvbWlzZSkge1xuICBwcm9taXNlW1BST01JU0VfSURdID0gaWQrKztcbiAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcbn1cblxuZnVuY3Rpb24gRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcbiAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKCF0aGlzLnByb21pc2VbUFJPTUlTRV9JRF0pIHtcbiAgICBtYWtlUHJvbWlzZSh0aGlzLnByb21pc2UpO1xuICB9XG5cbiAgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cbiAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XG4gICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBfcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gIHZhciBfaW5wdXQgPSB0aGlzLl9pbnB1dDtcblxuICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdGhpcy5fZWFjaEVudHJ5KF9pbnB1dFtpXSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbiAoZW50cnksIGkpIHtcbiAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuICB2YXIgcmVzb2x2ZSQkID0gYy5yZXNvbHZlO1xuXG4gIGlmIChyZXNvbHZlJCQgPT09IHJlc29sdmUpIHtcbiAgICB2YXIgX3RoZW4gPSBnZXRUaGVuKGVudHJ5KTtcblxuICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9yZW1haW5pbmctLTtcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gUHJvbWlzZSkge1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTtcbiAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIF90aGVuKTtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uIChyZXNvbHZlJCQpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUkJChlbnRyeSk7XG4gICAgICB9KSwgaSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQoZW50cnkpLCBpKTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIChzdGF0ZSwgaSwgdmFsdWUpIHtcbiAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgdGhpcy5fcmVtYWluaW5nLS07XG5cbiAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIChwcm9taXNlLCBpKSB7XG4gIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICBzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChSRUpFQ1RFRCwgaSwgcmVhc29uKTtcbiAgfSk7XG59O1xuXG4vKipcbiAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXG4gIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhlIHBhc3NlZCBwcm9taXNlcywgb3JcbiAgcmVqZWN0ZWQgd2l0aCB0aGUgcmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWplY3RlZC4gSXQgY2FzdHMgYWxsXG4gIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVzb2x2ZSgyKTtcbiAgbGV0IHByb21pc2UzID0gcmVzb2x2ZSgzKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIFRoZSBhcnJheSBoZXJlIHdvdWxkIGJlIFsgMSwgMiwgMyBdO1xuICB9KTtcbiAgYGBgXG5cbiAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBhbGxgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2VcbiAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlcydzXG4gIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZTpcblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVqZWN0KG5ldyBFcnJvcihcIjJcIikpO1xuICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKFwiM1wiKSk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcbiAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAvLyBlcnJvci5tZXNzYWdlID09PSBcIjJcIlxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCBhbGxcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW5cbiAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuXG4gIEBzdGF0aWNcbiovXG5mdW5jdGlvbiBhbGwoZW50cmllcykge1xuICByZXR1cm4gbmV3IEVudW1lcmF0b3IodGhpcywgZW50cmllcykucHJvbWlzZTtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGVcbiAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAyJyk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gcmVzdWx0ID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIGl0IHdhcyByZXNvbHZlZCBiZWZvcmUgcHJvbWlzZTFcbiAgICAvLyB3YXMgcmVzb2x2ZWQuXG4gIH0pO1xuICBgYGBcblxuICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG4gIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGVcbiAgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxlZCBwcm9taXNlIGhhc1xuICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcbiAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnNcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxuICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkXG4gIH0pO1xuICBgYGBcblxuICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSlcbiAgYGBgXG5cbiAgQG1ldGhvZCByYWNlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gcHJvbWlzZXMgYXJyYXkgb2YgcHJvbWlzZXMgdG8gb2JzZXJ2ZVxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB3aGljaCBzZXR0bGVzIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgZmlyc3QgcGFzc2VkXG4gIHByb21pc2UgdG8gc2V0dGxlLlxuKi9cbmZ1bmN0aW9uIHJhY2UoZW50cmllcykge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmICghaXNBcnJheShlbnRyaWVzKSkge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgcmV0dXJuIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAgYFByb21pc2UucmVqZWN0YCByZXR1cm5zIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBwYXNzZWQgYHJlYXNvbmAuXG4gIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlamVjdFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLlxuKi9cbmZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG5lZWRzUmVzb2x2ZXIoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3InKTtcbn1cblxuZnVuY3Rpb24gbmVlZHNOZXcoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG59XG5cbi8qKlxuICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG4gIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICBUZXJtaW5vbG9neVxuICAtLS0tLS0tLS0tLVxuXG4gIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cbiAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblxuICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcbiAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxuICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcbiAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuICBpdHNlbGYgZnVsZmlsbC5cblxuXG4gIEJhc2ljIFVzYWdlOlxuICAtLS0tLS0tLS0tLS1cblxuICBgYGBqc1xuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIC8vIG9uIHN1Y2Nlc3NcbiAgICByZXNvbHZlKHZhbHVlKTtcblxuICAgIC8vIG9uIGZhaWx1cmVcbiAgICByZWplY3QocmVhc29uKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBBZHZhbmNlZCBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tLS0tXG5cbiAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICBgYGBqc1xuICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgYGBganNcbiAgUHJvbWlzZS5hbGwoW1xuICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgIGdldEpTT04oJy9jb21tZW50cycpXG4gIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcbiAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfSk7XG4gIGBgYFxuXG4gIEBjbGFzcyBQcm9taXNlXG4gIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQGNvbnN0cnVjdG9yXG4qL1xuZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuICB0aGlzW1BST01JU0VfSURdID0gbmV4dElkKCk7XG4gIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuXG4gIGlmIChub29wICE9PSByZXNvbHZlcikge1xuICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBuZWVkc1Jlc29sdmVyKCk7XG4gICAgdGhpcyBpbnN0YW5jZW9mIFByb21pc2UgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpO1xuICB9XG59XG5cblByb21pc2UuYWxsID0gYWxsO1xuUHJvbWlzZS5yYWNlID0gcmFjZTtcblByb21pc2UucmVzb2x2ZSA9IHJlc29sdmU7XG5Qcm9taXNlLnJlamVjdCA9IHJlamVjdDtcblByb21pc2UuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcblByb21pc2UuX3NldEFzYXAgPSBzZXRBc2FwO1xuUHJvbWlzZS5fYXNhcCA9IGFzYXA7XG5cblByb21pc2UucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUHJvbWlzZSxcblxuICAvKipcbiAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG4gICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBDaGFpbmluZ1xuICAgIC0tLS0tLS0tXG4gIFxuICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuICAgIH0pO1xuICBcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG4gICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgICB9KTtcbiAgICBgYGBcbiAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQXNzaW1pbGF0aW9uXG4gICAgLS0tLS0tLS0tLS0tXG4gIFxuICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG4gICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICAgIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG4gICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFNpbXBsZSBFeGFtcGxlXG4gICAgLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgbGV0IHJlc3VsdDtcbiAgXG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgRXJyYmFjayBFeGFtcGxlXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBBZHZhbmNlZCBFeGFtcGxlXG4gICAgLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgbGV0IGF1dGhvciwgYm9va3M7XG4gIFxuICAgIHRyeSB7XG4gICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG4gICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBFcnJiYWNrIEV4YW1wbGVcbiAgXG4gICAgYGBganNcbiAgXG4gICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuICBcbiAgICB9XG4gIFxuICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG4gIFxuICAgIH1cbiAgXG4gICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG4gICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBQcm9taXNlIEV4YW1wbGU7XG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBmaW5kQXV0aG9yKCkuXG4gICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuICAgICAgICAvLyBmb3VuZCBib29rc1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIHRoZW5cbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cbiAgdGhlbjogdGhlbixcblxuICAvKipcbiAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gICAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cbiAgXG4gICAgYGBganNcbiAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgICB9XG4gIFxuICAgIC8vIHN5bmNocm9ub3VzXG4gICAgdHJ5IHtcbiAgICAgIGZpbmRBdXRob3IoKTtcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9XG4gIFxuICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgY2F0Y2hcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICAnY2F0Y2gnOiBmdW5jdGlvbiBfY2F0Y2gob25SZWplY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gcG9seWZpbGwoKSB7XG4gICAgdmFyIGxvY2FsID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvY2FsID0gc2VsZjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gICAgaWYgKFApIHtcbiAgICAgICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcm9taXNlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBzaWxlbnRseSBpZ25vcmVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvbWlzZVRvU3RyaW5nID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2U7XG59XG5cbi8vIFN0cmFuZ2UgY29tcGF0Li5cblByb21pc2UucG9seWZpbGwgPSBwb2x5ZmlsbDtcblByb21pc2UuUHJvbWlzZSA9IFByb21pc2U7XG5cbnJldHVybiBQcm9taXNlO1xuXG59KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXByb21pc2UubWFwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsImV4cG9ydCBjb25zdCBFVkVOVFMgPSB7XHJcbiAgU0lHTklOOiAnU0lHTklOJyxcclxuICBTSUdOT1VUOiAnU0lHTk9VVCcsXHJcbiAgU0lHTlVQOiAnU0lHTlVQJ1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IFVSTFMgPSB7XHJcbiAgdG9rZW46ICd0b2tlbicsXHJcbiAgc2lnbnVwOiAnMS91c2VyL3NpZ251cCcsXHJcbiAgcmVxdWVzdFJlc2V0UGFzc3dvcmQ6ICcxL3VzZXIvcmVxdWVzdFJlc2V0UGFzc3dvcmQnLFxyXG4gIHJlc2V0UGFzc3dvcmQ6ICcxL3VzZXIvcmVzZXRQYXNzd29yZCcsXHJcbiAgY2hhbmdlUGFzc3dvcmQ6ICcxL3VzZXIvY2hhbmdlUGFzc3dvcmQnLFxyXG4gIC8vIHNvY2lhbExvZ2luV2l0aENvZGU6ICcxL3VzZXIvUFJPVklERVIvY29kZScsXHJcbiAgc29jaWFsU2lnbmluV2l0aFRva2VuOiAnMS91c2VyL1BST1ZJREVSL3Rva2VuJyxcclxuICAvLyBzb2NpYWxTaW5ndXBXaXRoQ29kZTogJzEvdXNlci9QUk9WSURFUi9zaWdudXBDb2RlJyxcclxuICBzaWdub3V0OiAnMS91c2VyL3NpZ25vdXQnLFxyXG4gIHByb2ZpbGU6ICdhcGkvYWNjb3VudC9wcm9maWxlJyxcclxuICBvYmplY3RzOiAnMS9vYmplY3RzJyxcclxuICBvYmplY3RzQWN0aW9uOiAnMS9vYmplY3RzL2FjdGlvbicsXHJcbiAgcXVlcnk6ICcxL3F1ZXJ5L2RhdGEnLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IFNPQ0lBTF9QUk9WSURFUlMgPSB7XHJcbiAgZ2l0aHViOiB7bmFtZTogJ2dpdGh1YicsIGxhYmVsOiAnR2l0aHViJywgdXJsOiAnd3d3LmdpdGh1Yi5jb20nLCBjc3M6IHtiYWNrZ3JvdW5kQ29sb3I6ICcjNDQ0J30sIGlkOiAxfSxcclxuICBnb29nbGU6IHtuYW1lOiAnZ29vZ2xlJywgbGFiZWw6ICdHb29nbGUnLCB1cmw6ICd3d3cuZ29vZ2xlLmNvbScsIGNzczoge2JhY2tncm91bmRDb2xvcjogJyNkZDRiMzknfSwgaWQ6IDJ9LFxyXG4gIGZhY2Vib29rOiB7bmFtZTogJ2ZhY2Vib29rJywgbGFiZWw6ICdGYWNlYm9vaycsIHVybDogJ3d3dy5mYWNlYm9vay5jb20nLCBjc3M6IHtiYWNrZ3JvdW5kQ29sb3I6ICcjM2I1OTk4J30sIGlkOiAzfSxcclxuICB0d2l0dGVyOiB7bmFtZTogJ3R3aXR0ZXInLCBsYWJlbDogJ1R3aXR0ZXInLCB1cmw6ICd3d3cudHdpdHRlci5jb20nLCBjc3M6IHtiYWNrZ3JvdW5kQ29sb3I6ICcjNTVhY2VlJ30sIGlkOiA0fVxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCB7XHJcbiAgYXBwTmFtZTogbnVsbCxcclxuICBhbm9ueW1vdXNUb2tlbjogbnVsbCxcclxuICBzaWduVXBUb2tlbjogbnVsbCxcclxuICBhcGlVcmw6ICdodHRwczovL2FwaS5iYWNrYW5kLmNvbScsXHJcbiAgc3RvcmFnZTogd2luZG93LmxvY2FsU3RvcmFnZSxcclxuICBzdG9yYWdlUHJlZml4OiAnQkFDS0FORF8nLFxyXG4gIG1hbmFnZVJlZnJlc2hUb2tlbjogdHJ1ZSxcclxuICBydW5TaWduaW5BZnRlclNpZ251cDogdHJ1ZSxcclxuICBydW5Tb2NrZXQ6IGZhbHNlLFxyXG4gIHNvY2tldFVybDogJ2h0dHBzOi8vc29ja2V0LmJhY2thbmQuY29tJyxcclxuICBpc01vYmlsZTogZmFsc2UsXHJcbn07XHJcbiIsImV4cG9ydCBjb25zdCBmaWx0ZXIgPSB7XHJcbiAgY3JlYXRlOiAoZmllbGROYW1lLCBvcGVyYXRvciwgdmFsdWUpID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGZpZWxkTmFtZSxcclxuICAgICAgb3BlcmF0b3IsXHJcbiAgICAgIHZhbHVlXHJcbiAgICB9XHJcbiAgfSxcclxuICBvcGVyYXRvcnM6IHtcclxuICAgIG51bWVyaWM6IHsgZXF1YWxzOiBcImVxdWFsc1wiLCBub3RFcXVhbHM6IFwibm90RXF1YWxzXCIsIGdyZWF0ZXJUaGFuOiBcImdyZWF0ZXJUaGFuXCIsIGdyZWF0ZXJUaGFuT3JFcXVhbHNUbzogXCJncmVhdGVyVGhhbk9yRXF1YWxzVG9cIiwgbGVzc1RoYW46IFwibGVzc1RoYW5cIiwgbGVzc1RoYW5PckVxdWFsc1RvOiBcImxlc3NUaGFuT3JFcXVhbHNUb1wiLCBlbXB0eTogXCJlbXB0eVwiLCBub3RFbXB0eTogXCJub3RFbXB0eVwiIH0sXHJcbiAgICBkYXRlOiB7IGVxdWFsczogXCJlcXVhbHNcIiwgbm90RXF1YWxzOiBcIm5vdEVxdWFsc1wiLCBncmVhdGVyVGhhbjogXCJncmVhdGVyVGhhblwiLCBncmVhdGVyVGhhbk9yRXF1YWxzVG86IFwiZ3JlYXRlclRoYW5PckVxdWFsc1RvXCIsIGxlc3NUaGFuOiBcImxlc3NUaGFuXCIsIGxlc3NUaGFuT3JFcXVhbHNUbzogXCJsZXNzVGhhbk9yRXF1YWxzVG9cIiwgZW1wdHk6IFwiZW1wdHlcIiwgbm90RW1wdHk6IFwibm90RW1wdHlcIiB9LFxyXG4gICAgdGV4dDogeyBlcXVhbHM6IFwiZXF1YWxzXCIsIG5vdEVxdWFsczogXCJub3RFcXVhbHNcIiwgc3RhcnRzV2l0aDogXCJzdGFydHNXaXRoXCIsIGVuZHNXaXRoOiBcImVuZHNXaXRoXCIsIGNvbnRhaW5zOiBcImNvbnRhaW5zXCIsIG5vdENvbnRhaW5zOiBcIm5vdENvbnRhaW5zXCIsIGVtcHR5OiBcImVtcHR5XCIsIG5vdEVtcHR5OiBcIm5vdEVtcHR5XCIgfSxcclxuICAgIGJvb2xlYW46IHsgZXF1YWxzOiBcImVxdWFsc1wiIH0sXHJcbiAgICByZWxhdGlvbjogeyBpbjogXCJpblwiIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzb3J0ID0ge1xyXG4gIGNyZWF0ZTogKGZpZWxkTmFtZSwgb3JkZXIpID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGZpZWxkTmFtZSxcclxuICAgICAgb3JkZXJcclxuICAgIH1cclxuICB9LFxyXG4gIG9yZGVyczogeyBhc2M6IFwiYXNjXCIsIGRlc2M6IFwiZGVzY1wiIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGV4Y2x1ZGUgPSB7XHJcbiAgb3B0aW9uczogeyBtZXRhZGF0YTogXCJtZXRhZGF0YVwiLCB0b3RhbFJvd3M6IFwidG90YWxSb3dzXCIsIGFsbDogXCJtZXRhZGF0YSx0b3RhbFJvd3NcIiB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTdG9yYWdlQWJzdHJhY3Qge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IFN0b3JhZ2VBYnN0cmFjdCkge1xyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2FuIG5vdCBjb25zdHJ1Y3QgYWJzdHJhY3QgY2xhc3MuXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc2V0SXRlbSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuc2V0SXRlbSA9PT0gU3RvcmFnZUFic3RyYWN0LnByb3RvdHlwZS5zZXRJdGVtKSB7XHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNdXN0IG92ZXJyaWRlIHNldEl0ZW0gbWV0aG9kLlwiKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmdldEl0ZW0gPT09IHVuZGVmaW5lZCB8fCB0aGlzLmdldEl0ZW0gPT09IFN0b3JhZ2VBYnN0cmFjdC5wcm90b3R5cGUuZ2V0SXRlbSkge1xyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTXVzdCBvdmVycmlkZSBnZXRJdGVtIG1ldGhvZC5cIik7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5yZW1vdmVJdGVtID09PSB1bmRlZmluZWQgfHwgdGhpcy5yZW1vdmVJdGVtID09PSBTdG9yYWdlQWJzdHJhY3QucHJvdG90eXBlLnJlbW92ZUl0ZW0pIHtcclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk11c3Qgb3ZlcnJpZGUgcmVtb3ZlSXRlbSBtZXRob2QuXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY2xlYXIgPT09IHVuZGVmaW5lZCB8fCB0aGlzLmNsZWFyID09PSBTdG9yYWdlQWJzdHJhY3QucHJvdG90eXBlLmNsZWFyKSB7XHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNdXN0IG92ZXJyaWRlIGNsZWFyIG1ldGhvZC5cIik7XHJcbiAgICB9XHJcbiAgICAvLyB0aGlzLmRhdGEgPSB7fTtcclxuICB9XHJcbiAgc2V0SXRlbSAoaWQsIHZhbCkge1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRvIG5vdCBjYWxsIGFic3RyYWN0IG1ldGhvZCBzZXRJdGVtIGZyb20gY2hpbGQuXCIpO1xyXG4gICAgLy8gcmV0dXJuIHRoaXMuZGF0YVtpZF0gPSBTdHJpbmcodmFsKTtcclxuICB9XHJcbiAgZ2V0SXRlbSAoaWQpIHtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEbyBub3QgY2FsbCBhYnN0cmFjdCBtZXRob2QgZ2V0SXRlbSBmcm9tIGNoaWxkLlwiKTtcclxuICAgIC8vIHJldHVybiB0aGlzLmRhdGEuaGFzT3duUHJvcGVydHkoaWQpID8gdGhpcy5fZGF0YVtpZF0gOiBudWxsO1xyXG4gIH1cclxuICByZW1vdmVJdGVtIChpZCkge1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRvIG5vdCBjYWxsIGFic3RyYWN0IG1ldGhvZCByZW1vdmVJdGVtIGZyb20gY2hpbGQuXCIpO1xyXG4gICAgLy8gZGVsZXRlIHRoaXMuZGF0YVtpZF07XHJcbiAgICAvLyByZXR1cm4gbnVsbDtcclxuICAgfVxyXG4gIGNsZWFyICgpIHtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEbyBub3QgY2FsbCBhYnN0cmFjdCBtZXRob2QgY2xlYXIgZnJvbSBjaGlsZC5cIik7XHJcbiAgICAvLyByZXR1cm4gdGhpcy5kYXRhID0ge307XHJcbiAgIH1cclxufVxyXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogYmFja2FuZCBKYXZhU2NyaXB0IExpYnJhcnlcclxuICogQXV0aG9yczogYmFja2FuZFxyXG4gKiBMaWNlbnNlOiBNSVQgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwKVxyXG4gKiBDb21waWxlZCBBdDogMjYvMTEvMjAxNlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmltcG9ydCBkZWZhdWx0cyBmcm9tICcuL2RlZmF1bHRzJ1xyXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnXHJcbmltcG9ydCAqIGFzIGhlbHBlcnMgZnJvbSAnLi9oZWxwZXJzJ1xyXG5pbXBvcnQgU3RvcmFnZSBmcm9tICcuL3V0aWxzL3N0b3JhZ2UnXHJcbmltcG9ydCBIdHRwIGZyb20gJy4vdXRpbHMvaHR0cCdcclxuaW1wb3J0IFNvY2tldCBmcm9tICcuL3V0aWxzL3NvY2tldCdcclxuaW1wb3J0IGF1dGggZnJvbSAnLi9zZXJ2aWNlcy9hdXRoJ1xyXG5pbXBvcnQgb2JqZWN0IGZyb20gJy4vc2VydmljZXMvb2JqZWN0J1xyXG5pbXBvcnQgZmlsZSBmcm9tICcuL3NlcnZpY2VzL2ZpbGUnXHJcbmltcG9ydCBxdWVyeSBmcm9tICcuL3NlcnZpY2VzL3F1ZXJ5J1xyXG5pbXBvcnQgdXNlciBmcm9tICcuL3NlcnZpY2VzL3VzZXInXHJcblxyXG4vLyBnZXQgZGF0YSBmcm9tIHVybCBpbiBzb2NpYWwgc2lnbi1pbiBwb3B1cFxyXG4vLyBsZXQgZGF0YU1hdGNoID0gL1xcPyhkYXRhfGVycm9yKT0oLispLy5leGVjKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxubGV0IGRhdGFNYXRjaCA9IC8oZGF0YXxlcnJvcik9KC4rKS8uZXhlYyh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbmlmIChkYXRhTWF0Y2ggJiYgZGF0YU1hdGNoWzFdICYmIGRhdGFNYXRjaFsyXSkge1xyXG4gIGxldCBkYXRhID0ge1xyXG4gICAgZGF0YTogSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoZGF0YU1hdGNoWzJdLnJlcGxhY2UoLyMuKi8sICcnKSkpXHJcbiAgfVxyXG4gIGRhdGEuc3RhdHVzID0gKGRhdGFNYXRjaFsxXSA9PT0gJ2RhdGEnKSA/IDIwMCA6IDA7XHJcbiAgdmFyIGlzSUUgPSBmYWxzZSB8fCAhIWRvY3VtZW50LmRvY3VtZW50TW9kZTtcclxuICBpZiAoIWlzSUUpIHtcclxuICAgIHdpbmRvdy5vcGVuZXIucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoZGF0YSksIGxvY2F0aW9uLm9yaWdpbik7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1NPQ0lBTF9EQVRBJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gIH1cclxufVxyXG5cclxubGV0IGJhY2thbmQgPSB7XHJcbiAgY29uc3RhbnRzLFxyXG4gIGhlbHBlcnMsXHJcbn1cclxuYmFja2FuZC5pbml0ID0gKGNvbmZpZyA9IHt9KSA9PiB7XHJcblxyXG4gIC8vIGNvbWJpbmUgZGVmYXVsdHMgd2l0aCB1c2VyIGNvbmZpZ1xyXG4gIE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIGNvbmZpZyk7XHJcbiAgLy8gY29uc29sZS5sb2coZGVmYXVsdHMpO1xyXG5cclxuICAvLyB2ZXJpZnkgbmV3IGRlZmF1bHRzXHJcbiAgaWYgKCFkZWZhdWx0cy5hcHBOYW1lKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdhcHBOYW1lIGlzIG1pc3NpbmcnKTtcclxuICBpZiAoIWRlZmF1bHRzLmFub255bW91c1Rva2VuKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdhbm9ueW1vdXNUb2tlbiBpcyBtaXNzaW5nJyk7XHJcbiAgaWYgKCFkZWZhdWx0cy5zaWduVXBUb2tlbilcclxuICAgIHRocm93IG5ldyBFcnJvcignc2lnblVwVG9rZW4gaXMgbWlzc2luZycpO1xyXG5cclxuICAvLyBpbml0IHV0aWxzXHJcbiAgbGV0IHV0aWxzID0ge1xyXG4gICAgc3RvcmFnZTogbmV3IFN0b3JhZ2UoZGVmYXVsdHMuc3RvcmFnZSwgZGVmYXVsdHMuc3RvcmFnZVByZWZpeCksXHJcbiAgICBodHRwOiBIdHRwLmNyZWF0ZSh7XHJcbiAgICAgIGJhc2VVUkw6IGRlZmF1bHRzLmFwaVVybFxyXG4gICAgfSksXHJcbiAgICBpc0lFOiB3aW5kb3cuZG9jdW1lbnQgJiYgKGZhbHNlIHx8ICEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlKSxcclxuICAgIEVOVjogJ2Jyb3dzZXInLFxyXG4gIH1cclxuICBpZiAoZGVmYXVsdHMucnVuU29ja2V0KSB7XHJcbiAgICB1dGlsc1snc29ja2V0J10gPSBuZXcgU29ja2V0KGRlZmF1bHRzLnNvY2tldFVybCk7XHJcbiAgfVxyXG5cclxuICB1dGlscy5odHRwLmNvbmZpZy5pbnRlcmNlcHRvcnMgPSB7XHJcbiAgICByZXF1ZXN0OiBmdW5jdGlvbihjb25maWcpIHtcclxuICAgICAgaWYgKGNvbmZpZy51cmwuaW5kZXhPZihjb25zdGFudHMuVVJMUy50b2tlbikgPT09ICAtMSAmJiBiYWNrYW5kLnV0aWxzLnN0b3JhZ2UuZ2V0KCd1c2VyJykpIHtcclxuICAgICAgICBjb25maWcuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZy5oZWFkZXJzLCBiYWNrYW5kLnV0aWxzLnN0b3JhZ2UuZ2V0KCd1c2VyJykudG9rZW4pXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAoZXJyb3IsIGNvbmZpZywgcmVzb2x2ZSwgcmVqZWN0LCBzY2IsIGVjYikge1xyXG4gICAgICBpZiAoY29uZmlnLnVybC5pbmRleE9mKGNvbnN0YW50cy5VUkxTLnRva2VuKSA9PT0gIC0xXHJcbiAgICAgICAmJiBkZWZhdWx0cy5tYW5hZ2VSZWZyZXNoVG9rZW5cclxuICAgICAgICYmIGVycm9yLnN0YXR1cyA9PT0gNDAxXHJcbiAgICAgICAmJiBlcnJvci5kYXRhICYmIGVycm9yLmRhdGEuTWVzc2FnZSA9PT0gJ2ludmFsaWQgb3IgZXhwaXJlZCB0b2tlbicpIHtcclxuICAgICAgICAgYXV0aC5fX2hhbmRsZVJlZnJlc2hUb2tlbl9fLmNhbGwodXRpbHMsIGVycm9yKVxyXG4gICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgIGJhY2thbmQudXRpbHMuaHR0cC5yZXF1ZXN0KGNvbmZpZywgc2NiLCBlY2IpO1xyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgIGVjYiAmJiBlY2IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGVjYiAmJiBlY2IoZXJyb3IpO1xyXG4gICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGV4cG9zZSBiYWNrYW5kIG5hbWVzcGFjZSB0byB3aW5kb3dcclxuICBkZWxldGUgYmFja2FuZC5pbml0O1xyXG4gIE9iamVjdC5hc3NpZ24oXHJcbiAgICBiYWNrYW5kLFxyXG4gICAgYXV0aCxcclxuICAgIHtcclxuICAgICAgb2JqZWN0LFxyXG4gICAgICBmaWxlLFxyXG4gICAgICBxdWVyeSxcclxuICAgICAgdXNlcixcclxuICAgICAgdXRpbHMsXHJcbiAgICB9XHJcbiAgKTtcclxuICBpZihkZWZhdWx0cy5ydW5Tb2NrZXQpIHtcclxuICAgIGJhY2thbmQudXRpbHMuc3RvcmFnZS5nZXQoJ3VzZXInKSAmJiBiYWNrYW5kLnV0aWxzLnNvY2tldC5jb25uZWN0KFxyXG4gICAgICBiYWNrYW5kLnV0aWxzLnN0b3JhZ2UuZ2V0KCd1c2VyJykudG9rZW4uQXV0aG9yaXphdGlvbiB8fCBudWxsLFxyXG4gICAgICBkZWZhdWx0cy5hbm9ueW1vdXNUb2tlbixcclxuICAgICAgZGVmYXVsdHMuYXBwTmFtZVxyXG4gICAgKTtcclxuICAgIE9iamVjdC5hc3NpZ24oYmFja2FuZCwge29uOiBiYWNrYW5kLnV0aWxzLnNvY2tldC5vbi5iaW5kKGJhY2thbmQudXRpbHMuc29ja2V0KX0pO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYmFja2FuZFxyXG4iLCJpbXBvcnQgeyBQcm9taXNlIH0gZnJvbSAnZXM2LXByb21pc2UnXHJcbmltcG9ydCB7IFVSTFMsIEVWRU5UUywgU09DSUFMX1BST1ZJREVSUyB9IGZyb20gJy4vLi4vY29uc3RhbnRzJ1xyXG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi8uLi9kZWZhdWx0cydcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgX19oYW5kbGVSZWZyZXNoVG9rZW5fXyxcclxuICB1c2VBbm9ueW1vdXNBdXRoLFxyXG4gIHNpZ25pbixcclxuICBzaWdudXAsXHJcbiAgc29jaWFsU2lnbmluLFxyXG4gIHNvY2lhbFNpZ25pbldpdGhUb2tlbixcclxuICBzb2NpYWxTaWdudXAsXHJcbiAgcmVxdWVzdFJlc2V0UGFzc3dvcmQsXHJcbiAgcmVzZXRQYXNzd29yZCxcclxuICBjaGFuZ2VQYXNzd29yZCxcclxuICBzaWdub3V0LFxyXG4gIC8vIGdldFVzZXJEZXRhaWxzLFxyXG4gIGdldFNvY2lhbFByb3ZpZGVycyxcclxufVxyXG5cclxuZnVuY3Rpb24gX19nZW5lcmF0ZUZha2VSZXNwb25zZV9fIChzdGF0dXMgPSAwLCBzdGF0dXNUZXh0ID0gJycsIGhlYWRlcnMgPSBbXSwgZGF0YSA9ICcnKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHN0YXR1cyxcclxuICAgIHN0YXR1c1RleHQsXHJcbiAgICBoZWFkZXJzLFxyXG4gICAgZGF0YVxyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBfX2Rpc3BhdGNoRXZlbnRfXyAobmFtZSkge1xyXG4gIGxldCBldmVudDtcclxuICBpZihkZWZhdWx0cy5pc01vYmlsZSlcclxuICAgIHJldHVybjtcclxuICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHtcclxuICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XHJcbiAgICBldmVudC5pbml0RXZlbnQobmFtZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICBldmVudC5ldmVudE5hbWUgPSBuYW1lO1xyXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XHJcbiAgICBldmVudC5ldmVudFR5cGUgPSBuYW1lO1xyXG4gICAgZXZlbnQuZXZlbnROYW1lID0gbmFtZTtcclxuICAgIHdpbmRvdy5maXJlRXZlbnQoJ29uJyArIGV2ZW50LmV2ZW50VHlwZSwgZXZlbnQpO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBfX2hhbmRsZVJlZnJlc2hUb2tlbl9fIChlcnJvcikge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBsZXQgdXNlciA9IGJhY2thbmQudXRpbHMuc3RvcmFnZS5nZXQoJ3VzZXInKTtcclxuICAgIGlmICghdXNlciB8fCAhdXNlci5kZXRhaWxzLnJlZnJlc2hfdG9rZW4pIHtcclxuICAgICAgcmVqZWN0KF9fZ2VuZXJhdGVGYWtlUmVzcG9uc2VfXygwLCAnJywgW10sICdObyBjYWNoZWQgdXNlciBvciByZWZyZXNoVG9rZW4gZm91bmQuIGF1dGhlbnRpY2F0aW9uIGlzIHJlcXVpcmVkLicpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBfX3NpZ25pbldpdGhUb2tlbl9fKHtcclxuICAgICAgICB1c2VybmFtZTogdXNlci5kZXRhaWxzLnVzZXJuYW1lLFxyXG4gICAgICAgIHJlZnJlc2hUb2tlbjogdXNlci5kZXRhaWxzLnJlZnJlc2hfdG9rZW4sXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KVxyXG59O1xyXG5mdW5jdGlvbiB1c2VBbm9ueW1vdXNBdXRoIChzY2IpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgbGV0IGRldGFpbHMgPSB7XHJcbiAgICAgIFwiYWNjZXNzX3Rva2VuXCI6IGRlZmF1bHRzLmFub255bW91c1Rva2VuLFxyXG4gICAgICBcInRva2VuX3R5cGVcIjogXCJBbm9ueW1vdXNUb2tlblwiLFxyXG4gICAgICBcImV4cGlyZXNfaW5cIjogMCxcclxuICAgICAgXCJhcHBOYW1lXCI6IGRlZmF1bHRzLmFwcE5hbWUsXHJcbiAgICAgIFwidXNlcm5hbWVcIjogXCJHdWVzdFwiLFxyXG4gICAgICBcInJvbGVcIjogXCJVc2VyXCIsXHJcbiAgICAgIFwiZmlyc3ROYW1lXCI6IFwiYW5vbnltb3VzXCIsXHJcbiAgICAgIFwibGFzdE5hbWVcIjogXCJhbm9ueW1vdXNcIixcclxuICAgICAgXCJmdWxsTmFtZVwiOiBcIlwiLFxyXG4gICAgICBcInJlZ0lkXCI6IDAgLFxyXG4gICAgICBcInVzZXJJZFwiOiBudWxsXHJcbiAgICB9XHJcbiAgICBiYWNrYW5kLnV0aWxzLnN0b3JhZ2Uuc2V0KCd1c2VyJywge1xyXG4gICAgICB0b2tlbjoge1xyXG4gICAgICAgIEFub255bW91c1Rva2VuOiBkZWZhdWx0cy5hbm9ueW1vdXNUb2tlblxyXG4gICAgICB9LFxyXG4gICAgICBkZXRhaWxzLFxyXG4gICAgfSk7XHJcbiAgICBfX2Rpc3BhdGNoRXZlbnRfXyhFVkVOVFMuU0lHTklOKTtcclxuICAgIGlmIChkZWZhdWx0cy5ydW5Tb2NrZXQpIHtcclxuICAgICAgYmFja2FuZC51dGlscy5zb2NrZXQuY29ubmVjdChudWxsLCBkZWZhdWx0cy5hbm9ueW1vdXNUb2tlbiwgZGVmYXVsdHMuYXBwTmFtZSk7XHJcbiAgICB9XHJcbiAgICBzY2IgJiYgc2NiKF9fZ2VuZXJhdGVGYWtlUmVzcG9uc2VfXygyMDAsICdPSycsIFtdLCBkZXRhaWxzKSk7XHJcbiAgICByZXNvbHZlKF9fZ2VuZXJhdGVGYWtlUmVzcG9uc2VfXygyMDAsICdPSycsIFtdLCBkZXRhaWxzKSk7XHJcbiAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2lnbmluICh1c2VybmFtZSwgcGFzc3dvcmQsIHNjYiwgZWNiKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGJhY2thbmQudXRpbHMuaHR0cCh7XHJcbiAgICAgIHVybDogVVJMUy50b2tlbixcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcclxuICAgICAgfSxcclxuICAgICAgZGF0YTogYHVzZXJuYW1lPSR7dXNlcm5hbWV9JnBhc3N3b3JkPSR7cGFzc3dvcmR9JmFwcE5hbWU9JHtkZWZhdWx0cy5hcHBOYW1lfSZncmFudF90eXBlPXBhc3N3b3JkYFxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgYmFja2FuZC51dGlscy5zdG9yYWdlLnNldCgndXNlcicsIHtcclxuICAgICAgICB0b2tlbjoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Jlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VufWBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldGFpbHM6IHJlc3BvbnNlLmRhdGFcclxuICAgICAgfSk7XHJcbiAgICAgIF9fZGlzcGF0Y2hFdmVudF9fKEVWRU5UUy5TSUdOSU4pO1xyXG4gICAgICBpZiAoZGVmYXVsdHMucnVuU29ja2V0KSB7XHJcbiAgICAgICAgYmFja2FuZC51dGlscy5zb2NrZXQuY29ubmVjdChiYWNrYW5kLnV0aWxzLnN0b3JhZ2UuZ2V0KCd1c2VyJykudG9rZW4uQXV0aG9yaXphdGlvbiwgZGVmYXVsdHMuYW5vbnltb3VzVG9rZW4sIGRlZmF1bHRzLmFwcE5hbWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHNjYiAmJiBzY2IocmVzcG9uc2UpO1xyXG4gICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICBlY2IgJiYgZWNiKGVycm9yKTtcclxuICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNpZ251cCAoZW1haWwsIHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIHBhcmFtZXRlcnMgPSB7fSwgc2NiLCBlY2IpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgYmFja2FuZC51dGlscy5odHRwKHtcclxuICAgICAgdXJsOiBVUkxTLnNpZ251cCxcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnU2lnblVwVG9rZW4nOiBkZWZhdWx0cy5zaWduVXBUb2tlblxyXG4gICAgICB9LFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgZmlyc3ROYW1lLFxyXG4gICAgICAgIGxhc3ROYW1lLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHBhc3N3b3JkLFxyXG4gICAgICAgIGNvbmZpcm1QYXNzd29yZCxcclxuICAgICAgICBwYXJhbWV0ZXJzXHJcbiAgICAgIH1cclxuICAgIH0sIHNjYiAsIGVjYilcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgX19kaXNwYXRjaEV2ZW50X18oRVZFTlRTLlNJR05VUCk7XHJcbiAgICAgIGlmKGRlZmF1bHRzLnJ1blNpZ25pbkFmdGVyU2lnbnVwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25pbihyZXNwb25zZS5kYXRhLnVzZXJuYW1lLCBwYXNzd29yZCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2NiICYmIHNjYihyZXNwb25zZSk7XHJcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIHNjYiAmJiBzY2IocmVzcG9uc2UpO1xyXG4gICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICBlY2IgJiYgZWNiKGVycm9yKTtcclxuICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcbmZ1bmN0aW9uIF9fZ2V0U29jaWFsVXJsX18gKHByb3ZpZGVyTmFtZSwgaXNTaWdudXAsIGlzQXV0b1NpZ25VcCkge1xyXG4gIGxldCBwcm92aWRlciA9IFNPQ0lBTF9QUk9WSURFUlNbcHJvdmlkZXJOYW1lXTtcclxuICBsZXQgYWN0aW9uID0gaXNTaWdudXAgPyAndXAnIDogJ2luJztcclxuICBsZXQgYXV0b1NpZ25VcFBhcmFtID0gYCZzaWdudXBJZk5vdFNpZ25lZEluPSR7KCFpc1NpZ251cCAmJiBpc0F1dG9TaWduVXApID8gJ3RydWUnIDogJ2ZhbHNlJ31gO1xyXG4gIHJldHVybiBgL3VzZXIvc29jaWFsU2lnbiR7YWN0aW9ufT9wcm92aWRlcj0ke3Byb3ZpZGVyLmxhYmVsfSR7YXV0b1NpZ25VcFBhcmFtfSZyZXNwb25zZV90eXBlPXRva2VuJmNsaWVudF9pZD1zZWxmJnJlZGlyZWN0X3VyaT0ke3Byb3ZpZGVyLnVybH0mc3RhdGU9YDtcclxufVxyXG5mdW5jdGlvbiBfX3NvY2lhbEF1dGhfXyAocHJvdmlkZXIsIGlzU2lnblVwLCBzcGVjLCBlbWFpbCkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBpZiAoIVNPQ0lBTF9QUk9WSURFUlNbcHJvdmlkZXJdKSB7XHJcbiAgICAgIHJlamVjdChfX2dlbmVyYXRlRmFrZVJlc3BvbnNlX18oMCwgJycsIFtdLCAnVW5rbm93biBTb2NpYWwgUHJvdmlkZXInKSk7XHJcbiAgICB9XHJcbiAgICBsZXQgdXJsID0gIGAke2RlZmF1bHRzLmFwaVVybH0vMS8ke19fZ2V0U29jaWFsVXJsX18ocHJvdmlkZXIsIGlzU2lnblVwLCB0cnVlKX0mYXBwbmFtZT0ke2RlZmF1bHRzLmFwcE5hbWV9JHtlbWFpbCA/ICcmZW1haWw9JytlbWFpbCA6ICcnfSZyZXR1cm5BZGRyZXNzPWAgLy8gJHtsb2NhdGlvbi5ocmVmfVxuICAgIGxldCBwb3B1cCA9IG51bGw7XG4gICAgaWYgKCFiYWNrYW5kLnV0aWxzLmlzSUUpIHtcbiAgICAgIHBvcHVwID0gd2luZG93Lm9wZW4odXJsLCAnc29jaWFscG9wdXAnLCBzcGVjKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBwb3B1cCA9IHdpbmRvdy5vcGVuKCcnLCAnJywgc3BlYyk7XG4gICAgICBwb3B1cC5sb2NhdGlvbiA9IHVybDtcbiAgICB9XG4gICAgaWYgKHBvcHVwICYmIHBvcHVwLmZvY3VzKSB7IHBvcHVwLmZvY3VzKCkgfVxyXG5cclxuICAgIGxldCBoYW5kbGVyID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICBsZXQgdXJsID0gZS50eXBlID09PSAnbWVzc2FnZScgPyBlLm9yaWdpbiA6IGUudXJsO1xyXG4gICAgICAvLyBpZS1sb2NhdGlvbi1vcmlnaW4tcG9seWZpbGxcclxuICAgICAgaWYgKCF3aW5kb3cubG9jYXRpb24ub3JpZ2luKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICh3aW5kb3cubG9jYXRpb24ucG9ydCA/ICc6JyArIHdpbmRvdy5sb2NhdGlvbi5wb3J0OiAnJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHVybC5pbmRleE9mKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pID09PSAtMSkge1xyXG4gICAgICAgIHJlamVjdChfX2dlbmVyYXRlRmFrZVJlc3BvbnNlX18oMCwgJycsIFtdLCAnVW5rbm93biBPcmlnaW4gTWVzc2FnZScpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHJlcyA9IGUudHlwZSA9PT0gJ21lc3NhZ2UnID8gSlNPTi5wYXJzZShlLmRhdGEpIDogSlNPTi5wYXJzZShlLm5ld1ZhbHVlKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgaGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICBpZiAocG9wdXAgJiYgcG9wdXAuY2xvc2UpIHsgcG9wdXAuY2xvc2UoKSB9XHJcbiAgICAgIGUudHlwZSA9PT0gJ3N0b3JhZ2UnICYmIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGUua2V5KTtcclxuXHJcbiAgICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkge1xyXG4gICAgICAgIHJlamVjdChyZXMpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJlc29sdmUocmVzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGFuZGxlciA9IGhhbmRsZXIuYmluZChwb3B1cCk7XHJcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlciwgZmFsc2UpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCBoYW5kbGVyICwgZmFsc2UpO1xyXG4gIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNvY2lhbFNpZ25pbiAocHJvdmlkZXIsIHNjYiwgZWNiLCBzcGVjID0gJ2xlZnQ9MSwgdG9wPTEsIHdpZHRoPTUwMCwgaGVpZ2h0PTU2MCcpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgX19zb2NpYWxBdXRoX18ocHJvdmlkZXIsIGZhbHNlLCBzcGVjLCAnJylcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIF9fZGlzcGF0Y2hFdmVudF9fKEVWRU5UUy5TSUdOVVApO1xyXG4gICAgICAgIHJldHVybiBfX3NpZ25pbldpdGhUb2tlbl9fKHtcclxuICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgc2NiICYmIHNjYihyZXNwb25zZSk7XHJcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgZWNiICYmIGVjYihlcnJvcik7XHJcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcbmZ1bmN0aW9uIHNvY2lhbFNpZ25pbldpdGhUb2tlbiAocHJvdmlkZXIsIHRva2VuLCBzY2IsIGVjYikge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBiYWNrYW5kLnV0aWxzLmh0dHAoe1xyXG4gICAgICB1cmw6IFVSTFMuc29jaWFsU2lnbmluV2l0aFRva2VuLnJlcGxhY2UoJ1BST1ZJREVSJywgcHJvdmlkZXIpLFxyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBwYXJhbXM6IHtcclxuICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW4sXHJcbiAgICAgICAgYXBwTmFtZTogZGVmYXVsdHMuYXBwTmFtZSxcclxuICAgICAgICBzaWdudXBJZk5vdFNpZ25lZEluOiB0cnVlLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgYmFja2FuZC51dGlscy5zdG9yYWdlLnNldCgndXNlcicsIHtcclxuICAgICAgICB0b2tlbjoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Jlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VufWBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldGFpbHM6IHJlc3BvbnNlLmRhdGFcclxuICAgICAgfSk7XHJcbiAgICAgIF9fZGlzcGF0Y2hFdmVudF9fKEVWRU5UUy5TSUdOSU4pO1xyXG4gICAgICBpZiAoZGVmYXVsdHMucnVuU29ja2V0KSB7XHJcbiAgICAgICAgYmFja2FuZC51dGlscy5zb2NrZXQuY29ubmVjdChiYWNrYW5kLnV0aWxzLnN0b3JhZ2UuZ2V0KCd1c2VyJykudG9rZW4uQXV0aG9yaXphdGlvbiwgZGVmYXVsdHMuYW5vbnltb3VzVG9rZW4sIGRlZmF1bHRzLmFwcE5hbWUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFRPRE86UEFUQ0hcclxuICAgICAgYmFja2FuZC51dGlscy5odHRwKHtcclxuICAgICAgICB1cmw6IGAke1VSTFMub2JqZWN0c30vdXNlcnNgLFxyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICBmaWx0ZXI6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFwiZmllbGROYW1lXCI6IFwiZW1haWxcIixcclxuICAgICAgICAgICAgICBcIm9wZXJhdG9yXCI6IFwiZXF1YWxzXCIsXHJcbiAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiByZXNwb25zZS5kYXRhLnVzZXJuYW1lXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihwYXRjaCA9PiB7XHJcbiAgICAgICAgbGV0IHtpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZX0gPSBwYXRjaC5kYXRhLmRhdGFbMF07XG4gICAgICAgIGxldCB1c2VyID0gYmFja2FuZC51dGlscy5zdG9yYWdlLmdldCgndXNlcicpO1xuICAgICAgICBsZXQgbmV3RGV0YWlscyA9ICB7dXNlcklkOiBpZC50b1N0cmluZygpLCBmaXJzdE5hbWUsIGxhc3ROYW1lfTtcbiAgICAgICAgYmFja2FuZC51dGlscy5zdG9yYWdlLnNldCgndXNlcicsIHtcbiAgICAgICAgICB0b2tlbjogdXNlci50b2tlbixcbiAgICAgICAgICBkZXRhaWxzOiBPYmplY3QuYXNzaWduKHt9LCB1c2VyLmRldGFpbHMsIG5ld0RldGFpbHMpXG4gICAgICAgIH0pO1xuICAgICAgICB1c2VyID0gYmFja2FuZC51dGlscy5zdG9yYWdlLmdldCgndXNlcicpO1xyXG4gICAgICAgIGxldCByZXMgPSBfX2dlbmVyYXRlRmFrZVJlc3BvbnNlX18ocmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5zdGF0dXNUZXh0LCByZXNwb25zZS5oZWFkZXJzLCB1c2VyLmRldGFpbHMpO1xyXG4gICAgICAgIHNjYiAmJiBzY2IocmVzKTtcclxuICAgICAgICByZXNvbHZlKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgZWNiICYmIGVjYihlcnJvcik7XHJcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIEVPUFxyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgIGVjYiAmJiBlY2IoZXJyb3IpO1xyXG4gICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcbmZ1bmN0aW9uIHNvY2lhbFNpZ251cCAocHJvdmlkZXIsIGVtYWlsLCBzY2IsIGVjYiwgc3BlYyA9ICdsZWZ0PTEsIHRvcD0xLCB3aWR0aD01MDAsIGhlaWdodD01NjAnKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIF9fc29jaWFsQXV0aF9fKHByb3ZpZGVyLCB0cnVlLCBzcGVjLCBlbWFpbClcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIF9fZGlzcGF0Y2hFdmVudF9fKEVWRU5UUy5TSUdOVVApO1xyXG4gICAgICAgIGlmKGRlZmF1bHRzLnJ1blNpZ25pbkFmdGVyU2lnbnVwKSB7XHJcbiAgICAgICAgICByZXR1cm4gX19zaWduaW5XaXRoVG9rZW5fXyh7XHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiByZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlblxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgc2NiICYmIHNjYihyZXNwb25zZSk7XHJcbiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICBzY2IgJiYgc2NiKHJlc3BvbnNlKTtcclxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBlY2IgJiYgZWNiKGVycm9yKTtcclxuICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxuXHJcbn1cclxuZnVuY3Rpb24gX19zaWduaW5XaXRoVG9rZW5fXyAodG9rZW5EYXRhKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGxldCBkYXRhID0gW107XHJcbiAgICBmb3IgKGxldCBvYmogaW4gdG9rZW5EYXRhKSB7XHJcbiAgICAgICAgZGF0YS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChvYmopICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRva2VuRGF0YVtvYmpdKSk7XHJcbiAgICB9XHJcbiAgICBkYXRhID0gZGF0YS5qb2luKFwiJlwiKTtcclxuXHJcbiAgICBiYWNrYW5kLnV0aWxzLmh0dHAoe1xyXG4gICAgICB1cmw6IFVSTFMudG9rZW4sXHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXHJcbiAgICAgIH0sXHJcbiAgICAgIGRhdGE6IGAke2RhdGF9JmFwcE5hbWU9JHtkZWZhdWx0cy5hcHBOYW1lfSZncmFudF90eXBlPXBhc3N3b3JkYFxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgYmFja2FuZC51dGlscy5zdG9yYWdlLnNldCgndXNlcicsIHtcclxuICAgICAgICB0b2tlbjoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Jlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VufWBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldGFpbHM6IHJlc3BvbnNlLmRhdGFcclxuICAgICAgfSk7XHJcbiAgICAgIF9fZGlzcGF0Y2hFdmVudF9fKEVWRU5UUy5TSUdOSU4pO1xyXG4gICAgICBpZiAoZGVmYXVsdHMucnVuU29ja2V0KSB7XHJcbiAgICAgICAgYmFja2FuZC51dGlscy5zb2NrZXQuY29ubmVjdChiYWNrYW5kLnV0aWxzLnN0b3JhZ2UuZ2V0KCd1c2VyJykudG9rZW4uQXV0aG9yaXphdGlvbiwgZGVmYXVsdHMuYW5vbnltb3VzVG9rZW4sIGRlZmF1bHRzLmFwcE5hbWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHJlcXVlc3RSZXNldFBhc3N3b3JkICh1c2VybmFtZSwgc2NiLCBlY2IpIHtcclxuICByZXR1cm4gYmFja2FuZC51dGlscy5odHRwKHtcclxuICAgIHVybDogVVJMUy5yZXF1ZXN0UmVzZXRQYXNzd29yZCxcclxuICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgZGF0YToge1xyXG4gICAgICAgIGFwcE5hbWU6IGRlZmF1bHRzLmFwcE5hbWUsXHJcbiAgICAgICAgdXNlcm5hbWVcclxuICAgIH1cclxuICB9LCBzY2IsIGVjYilcclxufVxyXG5mdW5jdGlvbiByZXNldFBhc3N3b3JkIChuZXdQYXNzd29yZCwgcmVzZXRUb2tlbiwgc2NiLCBlY2IpIHtcclxuICByZXR1cm4gYmFja2FuZC51dGlscy5odHRwKHtcclxuICAgIHVybDogVVJMUy5yZXNldFBhc3N3b3JkLFxyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgbmV3UGFzc3dvcmQsXHJcbiAgICAgICAgcmVzZXRUb2tlblxyXG4gICAgfVxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmZ1bmN0aW9uIGNoYW5nZVBhc3N3b3JkIChvbGRQYXNzd29yZCwgbmV3UGFzc3dvcmQsIHNjYiwgZWNiKSB7XHJcbiAgcmV0dXJuIGJhY2thbmQudXRpbHMuaHR0cCh7XHJcbiAgICB1cmw6IFVSTFMuY2hhbmdlUGFzc3dvcmQsXHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGRhdGE6IHtcclxuICAgICAgICBvbGRQYXNzd29yZCxcclxuICAgICAgICBuZXdQYXNzd29yZFxyXG4gICAgfVxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmZ1bmN0aW9uIHNpZ25vdXQgKHNjYikge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBiYWNrYW5kLnV0aWxzLmh0dHAoe1xyXG4gICAgICB1cmw6IFVSTFMuc2lnbm91dCxcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIH0pXHJcbiAgICBiYWNrYW5kLnV0aWxzLnN0b3JhZ2UucmVtb3ZlKCd1c2VyJyk7XHJcbiAgICBpZiAoZGVmYXVsdHMucnVuU29ja2V0KSB7XHJcbiAgICAgIGJhY2thbmQudXRpbHMuc29ja2V0LmRpc2Nvbm5lY3QoKTtcclxuICAgIH1cclxuICAgIF9fZGlzcGF0Y2hFdmVudF9fKEVWRU5UUy5TSUdOT1VUKTtcclxuICAgIHNjYiAmJiBzY2IoX19nZW5lcmF0ZUZha2VSZXNwb25zZV9fKDIwMCwgJ09LJywgW10sIGJhY2thbmQudXRpbHMuc3RvcmFnZS5nZXQoJ3VzZXInKSkpO1xyXG4gICAgcmVzb2x2ZShfX2dlbmVyYXRlRmFrZVJlc3BvbnNlX18oMjAwLCAnT0snLCBbXSwgYmFja2FuZC51dGlscy5zdG9yYWdlLmdldCgndXNlcicpKSk7XHJcbiAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0U29jaWFsUHJvdmlkZXJzIChzY2IpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgc2NiICYmIHNjYihTT0NJQUxfUFJPVklERVJTKTtcclxuICAgIHJlc29sdmUoU09DSUFMX1BST1ZJREVSUyk7XHJcbiAgfSk7XHJcbn1cclxuIiwiaW1wb3J0IHsgVVJMUyB9IGZyb20gJy4vLi4vY29uc3RhbnRzJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHVwbG9hZCxcbiAgcmVtb3ZlLFxufVxuXG5mdW5jdGlvbiB1cGxvYWQgKG9iamVjdCwgZmlsZUFjdGlvbiwgZmlsZW5hbWUsIGZpbGVkYXRhLCBzY2IsIGVjYikge1xyXG4gIHJldHVybiBiYWNrYW5kLnV0aWxzLmh0dHAoe1xyXG4gICAgdXJsOiBgJHtVUkxTLm9iamVjdHNBY3Rpb259LyR7b2JqZWN0fT9uYW1lPSR7ZmlsZUFjdGlvbn1gLFxyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgZmlsZW5hbWUsXHJcbiAgICAgICAgZmlsZWRhdGE6IGZpbGVkYXRhLnN1YnN0cihmaWxlZGF0YS5pbmRleE9mKCcsJykgKyAxLCBmaWxlZGF0YS5sZW5ndGgpXHJcbiAgICAgIH1cclxuICB9LCBzY2IsIGVjYilcclxufVxyXG5mdW5jdGlvbiByZW1vdmUgKG9iamVjdCwgZmlsZUFjdGlvbiwgZmlsZW5hbWUsIHNjYiwgZWNiKSB7XHJcbiAgcmV0dXJuIGJhY2thbmQudXRpbHMuaHR0cCh7XHJcbiAgICB1cmw6IGAke1VSTFMub2JqZWN0c0FjdGlvbn0vJHtvYmplY3R9P25hbWU9JHtmaWxlQWN0aW9ufWAsXHJcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgZGF0YToge1xyXG4gICAgICAgIGZpbGVuYW1lLFxyXG4gICAgICB9XHJcbiAgfSwgc2NiLCBlY2IpXHJcbn1cbiIsImltcG9ydCB7IFVSTFMgfSBmcm9tICcuLy4uL2NvbnN0YW50cydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBnZXRMaXN0LFxyXG4gIGNyZWF0ZSxcclxuICBnZXRPbmUsXHJcbiAgdXBkYXRlLFxyXG4gIHJlbW92ZSxcclxuICBhY3Rpb246IHtcclxuICAgIGdldCxcclxuICAgIHBvc3QsXHJcbiAgfSxcclxufVxyXG5cclxuZnVuY3Rpb24gX19hbGxvd2VkUGFyYW1zX18gKGFsbG93ZWRQYXJhbXMsIHBhcmFtcykge1xyXG4gIGxldCBuZXdQYXJhbXMgPSB7fTtcclxuICBmb3IgKGxldCBwYXJhbSBpbiBwYXJhbXMpIHtcclxuICAgIGlmIChhbGxvd2VkUGFyYW1zLmluZGV4T2YocGFyYW0pICE9IC0xKSB7XHJcbiAgICAgIG5ld1BhcmFtc1twYXJhbV0gPSBwYXJhbXNbcGFyYW1dO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbmV3UGFyYW1zO1xyXG59XHJcbmZ1bmN0aW9uIGdldExpc3QgKG9iamVjdCwgcGFyYW1zID0ge30sIHNjYiwgZWNiKSB7XHJcbiAgY29uc3QgYWxsb3dlZFBhcmFtcyA9IFsncGFnZVNpemUnLCdwYWdlTnVtYmVyJywnZmlsdGVyJywnc29ydCcsJ3NlYXJjaCcsJ2V4Y2x1ZGUnLCdkZWVwJywncmVsYXRlZE9iamVjdHMnXTtcclxuICByZXR1cm4gYmFja2FuZC51dGlscy5odHRwKHtcclxuICAgIHVybDogYCR7VVJMUy5vYmplY3RzfS8ke29iamVjdH1gLFxyXG4gICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIHBhcmFtczogX19hbGxvd2VkUGFyYW1zX18oYWxsb3dlZFBhcmFtcywgcGFyYW1zKSxcclxuICB9LCBudWxsLCBlY2IpXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIGxldCB0b3RhbFJvd3MgPSByZXNwb25zZS5kYXRhWyd0b3RhbFJvd3MnXTtcclxuICAgICAgcmVzcG9uc2UuZGF0YSA9IHJlc3BvbnNlLmRhdGFbJ2RhdGEnXTtcclxuICAgICAgc2NiICYmIHNjYihyZXNwb25zZSwgdG90YWxSb3dzKTtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlIChvYmplY3QsIGRhdGEsIHBhcmFtcyA9IHt9LCBzY2IsIGVjYikge1xyXG4gIGNvbnN0IGFsbG93ZWRQYXJhbXMgPSBbJ3JldHVybk9iamVjdCcsJ2RlZXAnXTtcclxuICByZXR1cm4gYmFja2FuZC51dGlscy5odHRwKHtcclxuICAgIHVybDogYCR7VVJMUy5vYmplY3RzfS8ke29iamVjdH1gLFxyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBkYXRhLFxyXG4gICAgcGFyYW1zOiBfX2FsbG93ZWRQYXJhbXNfXyhhbGxvd2VkUGFyYW1zLCBwYXJhbXMpLFxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmZ1bmN0aW9uIGdldE9uZSAob2JqZWN0LCBpZCwgcGFyYW1zID0ge30sIHNjYiwgZWNiKSB7XHJcbiAgY29uc3QgYWxsb3dlZFBhcmFtcyA9IFsnZGVlcCcsJ2V4Y2x1ZGUnLCdsZXZlbCddO1xyXG4gIHJldHVybiBiYWNrYW5kLnV0aWxzLmh0dHAoe1xyXG4gICAgdXJsOiBgJHtVUkxTLm9iamVjdHN9LyR7b2JqZWN0fS8ke2lkfWAsXHJcbiAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgcGFyYW1zOiBfX2FsbG93ZWRQYXJhbXNfXyhhbGxvd2VkUGFyYW1zLCBwYXJhbXMpLFxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmZ1bmN0aW9uIHVwZGF0ZSAob2JqZWN0LCBpZCwgZGF0YSwgcGFyYW1zID0ge30sIHNjYiwgZWNiKSB7XHJcbiAgY29uc3QgYWxsb3dlZFBhcmFtcyA9IFsncmV0dXJuT2JqZWN0JywnZGVlcCddO1xyXG4gIHJldHVybiBiYWNrYW5kLnV0aWxzLmh0dHAoe1xyXG4gICAgdXJsOiBgJHtVUkxTLm9iamVjdHN9LyR7b2JqZWN0fS8ke2lkfWAsXHJcbiAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgZGF0YSxcclxuICAgIHBhcmFtczogX19hbGxvd2VkUGFyYW1zX18oYWxsb3dlZFBhcmFtcywgcGFyYW1zKSxcclxuICB9LCBzY2IsIGVjYilcclxufVxyXG5mdW5jdGlvbiByZW1vdmUgKG9iamVjdCwgaWQsIHNjYiwgZWNiKSB7XHJcbiAgcmV0dXJuIGJhY2thbmQudXRpbHMuaHR0cCh7XHJcbiAgICB1cmw6IGAke1VSTFMub2JqZWN0c30vJHtvYmplY3R9LyR7aWR9YCxcclxuICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgfSwgc2NiLCBlY2IpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldCAob2JqZWN0LCBhY3Rpb24sIHBhcmFtcyA9IHt9LCBzY2IsIGVjYikge1xyXG4gIHJldHVybiBiYWNrYW5kLnV0aWxzLmh0dHAoe1xyXG4gICAgdXJsOiBgJHtVUkxTLm9iamVjdHNBY3Rpb259LyR7b2JqZWN0fT9uYW1lPSR7YWN0aW9ufWAsXHJcbiAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgcGFyYW1zLFxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XG5mdW5jdGlvbiBwb3N0IChvYmplY3QsIGFjdGlvbiwgZGF0YSwgcGFyYW1zID0ge30sIHNjYiwgZWNiKSB7XG4gIHJldHVybiBiYWNrYW5kLnV0aWxzLmh0dHAoe1xuICAgIHVybDogYCR7VVJMUy5vYmplY3RzQWN0aW9ufS8ke29iamVjdH0/bmFtZT0ke2FjdGlvbn1gLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGRhdGEsXG4gICAgcGFyYW1zLFxuICB9LCBzY2IsIGVjYilcbn1cbiIsImltcG9ydCB7IFVSTFMgfSBmcm9tICcuLy4uL2NvbnN0YW50cydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBnZXQsXHJcbiAgcG9zdCxcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0IChuYW1lLCBwYXJhbXMgPSB7fSwgc2NiLCBlY2IpIHtcclxuICByZXR1cm4gYmFja2FuZC51dGlscy5odHRwKHtcclxuICAgIHVybDogYCR7VVJMUy5xdWVyeX0vJHtuYW1lfWAsXHJcbiAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgcGFyYW1zLFxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmZ1bmN0aW9uIHBvc3QgKG5hbWUsIGRhdGEsIHBhcmFtcyA9IHt9LCBzY2IsIGVjYikge1xyXG4gIHJldHVybiBiYWNrYW5kLnV0aWxzLmh0dHAoe1xyXG4gICAgdXJsOiBgJHtVUkxTLnF1ZXJ5fS8ke25hbWV9YCxcclxuICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgZGF0YSxcclxuICAgIHBhcmFtcyxcclxuICB9LCBzY2IsIGVjYilcclxufVxyXG4iLCJpbXBvcnQgeyBQcm9taXNlIH0gZnJvbSAnZXM2LXByb21pc2UnXHJcbmltcG9ydCB7IFVSTFMgfSBmcm9tICcuLy4uL2NvbnN0YW50cydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBnZXRVc2VyRGV0YWlscyxcclxuICBnZXRVc2VybmFtZSxcclxuICBnZXRVc2VyUm9sZSxcclxuICBnZXRUb2tlbixcclxuICBnZXRSZWZyZXNoVG9rZW4sXHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fZ2VuZXJhdGVGYWtlUmVzcG9uc2VfXyAoc3RhdHVzID0gMCwgc3RhdHVzVGV4dCA9ICcnLCBoZWFkZXJzID0gW10sIGRhdGEgPSAnJykge1xyXG4gIHJldHVybiB7XHJcbiAgICBzdGF0dXMsXHJcbiAgICBzdGF0dXNUZXh0LFxyXG4gICAgaGVhZGVycyxcclxuICAgIGRhdGFcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gX19nZXRVc2VyRGV0YWlsc0Zyb21TdG9yYWdlX18gKHNjYiwgZWNiKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGxldCB1c2VyID0gYmFja2FuZC51dGlscy5zdG9yYWdlLmdldCgndXNlcicpO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIGVjYiAmJiBlY2IoX19nZW5lcmF0ZUZha2VSZXNwb25zZV9fKDAsICcnLCBbXSwgJ05vIGNhY2hlZCB1c2VyIGZvdW5kLiBhdXRoZW50aWNhdGlvbiBpcyByZXF1aXJlZC4nKSk7XHJcbiAgICAgIHJlamVjdChfX2dlbmVyYXRlRmFrZVJlc3BvbnNlX18oMCwgJycsIFtdLCAnTm8gY2FjaGVkIHVzZXIgZm91bmQuIGF1dGhlbnRpY2F0aW9uIGlzIHJlcXVpcmVkLicpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xuICAgICAgc2NiICYmIHNjYihfX2dlbmVyYXRlRmFrZVJlc3BvbnNlX18oMjAwLCAnT0snLCBbXSwgdXNlci5kZXRhaWxzKSk7XHJcbiAgICAgIHJlc29sdmUoX19nZW5lcmF0ZUZha2VSZXNwb25zZV9fKDIwMCwgJ09LJywgW10sIHVzZXIuZGV0YWlscykpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldFVzZXJEZXRhaWxzIChzY2IsIGVjYiwgZm9yY2UgPSBmYWxzZSkge1xyXG4gIGlmICghZm9yY2UpIHtcclxuICAgIHJldHVybiBfX2dldFVzZXJEZXRhaWxzRnJvbVN0b3JhZ2VfXyhzY2IsIGVjYik7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgcmV0dXJuIGJhY2thbmQudXRpbHMuaHR0cCh7XHJcbiAgICAgIHVybDogVVJMUy5wcm9maWxlLFxyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgbGV0IHVzZXIgPSBiYWNrYW5kLnV0aWxzLnN0b3JhZ2UuZ2V0KCd1c2VyJyk7XHJcbiAgICAgIGxldCBuZXdEZXRhaWxzID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgYmFja2FuZC51dGlscy5zdG9yYWdlLnNldCgndXNlcicsIHtcclxuICAgICAgICB0b2tlbjogdXNlci50b2tlbixcclxuICAgICAgICBkZXRhaWxzOiBPYmplY3QuYXNzaWduKHt9LCB1c2VyLmRldGFpbHMsIG5ld0RldGFpbHMpXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gX19nZXRVc2VyRGV0YWlsc0Zyb21TdG9yYWdlX18oc2NiLCBlY2IpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFVzZXJuYW1lIChzY2IsIGVjYikge1xyXG4gIHJldHVybiBfX2dldFVzZXJEZXRhaWxzRnJvbVN0b3JhZ2VfXyhudWxsLCBlY2IpXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIHJlc3BvbnNlLmRhdGEgPSByZXNwb25zZS5kYXRhWyd1c2VybmFtZSddO1xyXG4gICAgICBzY2IgJiYgc2NiKHJlc3BvbnNlKTtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VXNlclJvbGUgKCkge1xyXG4gIHJldHVybiBfX2dldFVzZXJEZXRhaWxzRnJvbVN0b3JhZ2VfXyhudWxsLCBlY2IpXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIHJlc3BvbnNlLmRhdGEgPSByZXNwb25zZS5kYXRhWydyb2xlJ107XHJcbiAgICAgIHNjYiAmJiBzY2IocmVzcG9uc2UpO1xyXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRUb2tlbiAoKSB7XHJcbiAgcmV0dXJuIF9fZ2V0VXNlckRldGFpbHNGcm9tU3RvcmFnZV9fKG51bGwsIGVjYilcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgcmVzcG9uc2UuZGF0YSA9IHJlc3BvbnNlLmRhdGFbJ2FjY2Vzc190b2tlbiddO1xyXG4gICAgICBzY2IgJiYgc2NiKHJlc3BvbnNlKTtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0UmVmcmVzaFRva2VuICgpIHtcclxuICByZXR1cm4gX19nZXRVc2VyRGV0YWlsc0Zyb21TdG9yYWdlX18obnVsbCwgZWNiKVxyXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICByZXNwb25zZS5kYXRhID0gcmVzcG9uc2UuZGF0YVsncmVmcmVzaF90b2tlbiddO1xyXG4gICAgICBzY2IgJiYgc2NiKHJlc3BvbnNlKTtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbn1cclxuIiwiaW1wb3J0IHsgUHJvbWlzZSB9IGZyb20gJ2VzNi1wcm9taXNlJ1xyXG5cclxuY2xhc3MgSHR0cCB7XHJcbiAgY29uc3RydWN0b3IgKGNvbmZpZyA9IHt9KSB7XHJcbiAgICBpZiAoIXdpbmRvdy5YTUxIdHRwUmVxdWVzdClcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdYTUxIdHRwUmVxdWVzdCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgcGxhdGZvcm0nKTtcclxuXHJcbiAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xyXG4gICAgICAvLyB1cmw6ICcvJyxcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge30sXHJcbiAgICAgIHBhcmFtczoge30sXHJcbiAgICAgIGludGVyY2VwdG9yczoge30sXHJcbiAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2UsXHJcbiAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nLFxyXG4gICAgICAvLyB0aW1lb3V0OiBudWxsLFxyXG4gICAgICBhdXRoOiB7XHJcbiAgICAgICB1c2VybmFtZTogbnVsbCxcclxuICAgICAgIHBhc3N3b3JkOiBudWxsXHJcbiAgICAgIH1cclxuICAgIH0sIGNvbmZpZylcclxuICB9XHJcbiAgX2dldEhlYWRlcnMgKGhlYWRlcnMpIHtcclxuICAgIHJldHVybiBoZWFkZXJzLnNwbGl0KCdcXHJcXG4nKS5maWx0ZXIoaGVhZGVyID0+IGhlYWRlcikubWFwKGhlYWRlciA9PiB7XHJcbiAgICAgIGxldCBqaGVhZGVyID0ge31cclxuICAgICAgbGV0IHBhcnRzID0gaGVhZGVyLnNwbGl0KCc6Jyk7XHJcbiAgICAgIGpoZWFkZXJbcGFydHNbMF1dID0gcGFydHNbMV1cclxuICAgICAgcmV0dXJuIGpoZWFkZXI7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX2dldERhdGEgKHR5cGUsIGRhdGEpIHtcclxuICAgIGlmICghdHlwZSkge1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUuaW5kZXhPZignanNvbicpID09PSAtMSkge1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2NyZWF0ZVJlc3BvbnNlIChyZXEsIGNvbmZpZykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3RhdHVzOiByZXEuc3RhdHVzLFxyXG4gICAgICBzdGF0dXNUZXh0OiByZXEuc3RhdHVzVGV4dCxcclxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycyhyZXEuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpLFxyXG4gICAgICBjb25maWcsXHJcbiAgICAgIGRhdGE6IHRoaXMuX2dldERhdGEocmVxLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLCByZXEucmVzcG9uc2VUZXh0KSxcclxuICAgIH1cclxuICB9XHJcbiAgX2hhbmRsZUVycm9yIChkYXRhLCBjb25maWcpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN0YXR1czogMCxcclxuICAgICAgc3RhdHVzVGV4dDogJ0VSUk9SJyxcclxuICAgICAgaGVhZGVyczogW10sXHJcbiAgICAgIGNvbmZpZyxcclxuICAgICAgZGF0YSxcclxuICAgIH1cclxuICB9XHJcbiAgX2VuY29kZVBhcmFtcyAocGFyYW1zKSB7XHJcbiAgICBsZXQgcGFyYW1zQXJyID0gW107XHJcbiAgICBmb3IgKGxldCBwYXJhbSBpbiBwYXJhbXMpIHtcbiAgICAgIGxldCB2YWwgPSBwYXJhbXNbcGFyYW1dO1xuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgdmFsID0gSlNPTi5zdHJpbmdpZnkodmFsKTtcclxuICAgICAgfVxyXG4gICAgICBwYXJhbXNBcnIucHVzaChgJHtwYXJhbX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsKX1gKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtc0Fyci5qb2luKCcmJyk7XHJcbiAgfVxyXG4gIF9zZXRIZWFkZXJzIChyZXEsIGhlYWRlcnMpIHtcclxuICAgIGZvciAobGV0IGhlYWRlciBpbiBoZWFkZXJzKSB7XHJcbiAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlciwgaGVhZGVyc1toZWFkZXJdKTtcclxuICAgIH1cclxuICB9XHJcbiAgX3NldERhdGEgKHJlcSwgZGF0YSkge1xyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJlcS5zZW5kKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgZGF0YSAhPSAnb2JqZWN0Jykge1xyXG4gICAgICByZXEuc2VuZChkYXRhKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgICAgcmVxLnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXF1ZXN0IChjZmcsIHNjYiAsIGVjYikge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgIGxldCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgbGV0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29uZmlnLCBjZmcpO1xyXG5cclxuICAgICAgaWYgKCFjb25maWcudXJsIHx8IHR5cGVvZiBjb25maWcudXJsICE9PSAnc3RyaW5nJyB8fCBjb25maWcudXJsLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGxldCByZXMgPSB0aGlzLl9oYW5kbGVFcnJvcigndXJsIHBhcmFtZXRlciBpcyBtaXNzaW5nJywgY29uZmlnKTtcclxuICAgICAgICBlY2IgJiYgZWNiKHJlcyk7XHJcbiAgICAgICAgcmVqZWN0KHJlcyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpIHsgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWUgfVxyXG4gICAgICBpZiAoY29uZmlnLnRpbWVvdXQpIHsgcmVxLnRpbWVvdXQgPSB0cnVlIH1cclxuICAgICAgY29uZmlnLmludGVyY2VwdG9ycy5yZXF1ZXN0ICYmIGNvbmZpZy5pbnRlcmNlcHRvcnMucmVxdWVzdC5jYWxsKHRoaXMsIGNvbmZpZyk7XHJcbiAgICAgIGxldCBwYXJhbXMgPSB0aGlzLl9lbmNvZGVQYXJhbXMoY29uZmlnLnBhcmFtcyk7XHJcbiAgICAgIHJlcS5vcGVuKGNvbmZpZy5tZXRob2QsIGAke2NvbmZpZy5iYXNlVVJMID8gY29uZmlnLmJhc2VVUkwrJy8nIDogJyd9JHtjb25maWcudXJsfSR7cGFyYW1zID8gJz8nK3BhcmFtcyA6ICcnfWAsIHRydWUsIGNvbmZpZy5hdXRoLnVzZXJuYW1lLCBjb25maWcuYXV0aC5wYXNzd29yZCk7XHJcbiAgICAgIHJlcS5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgcmVzID0gdGhpcy5faGFuZGxlRXJyb3IoJ3RpbWVvdXQnLCBjb25maWcpO1xyXG4gICAgICAgIGVjYiAmJiBlY2IocmVzKTtcclxuICAgICAgICByZWplY3QocmVzKTtcclxuICAgICAgfTtcclxuICAgICAgcmVxLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgcmVzID0gdGhpcy5faGFuZGxlRXJyb3IoJ2Fib3J0JywgY29uZmlnKTtcclxuICAgICAgICBlY2IgJiYgZWNiKHJlcyk7XHJcbiAgICAgICAgcmVqZWN0KHJlcyk7XHJcbiAgICAgIH07XHJcbiAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcclxuICAgICAgICAgIGxldCByZXMgPSB0aGlzLl9jcmVhdGVSZXNwb25zZShyZXEsIGNvbmZpZyk7XHJcbiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKXtcclxuICAgICAgICAgICAgaWYgKGNvbmZpZy5pbnRlcmNlcHRvcnMucmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICBjb25maWcuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmNhbGwodGhpcywgcmVzLCBjb25maWcsIHJlc29sdmUsIHJlamVjdCwgc2NiLCBlY2IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNjYiAmJiBzY2IocmVzKTtcclxuICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnLmludGVyY2VwdG9ycy5yZXNwb25zZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgY29uZmlnLmludGVyY2VwdG9ycy5yZXNwb25zZUVycm9yLmNhbGwodGhpcywgcmVzLCBjb25maWcsIHJlc29sdmUsIHJlamVjdCwgc2NiLCBlY2IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIGVjYiAmJiBlY2IocmVzKTtcclxuICAgICAgICAgICAgICByZWplY3QocmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9zZXRIZWFkZXJzKHJlcSwgY29uZmlnLmhlYWRlcnMpO1xyXG4gICAgICB0aGlzLl9zZXREYXRhKHJlcSwgY29uZmlnLmRhdGEpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShjb25maWcgPSB7fSkge1xyXG4gIHZhciBjb250ZXh0ID0gbmV3IEh0dHAoY29uZmlnKTtcclxuICB2YXIgaW5zdGFuY2UgPSAoLi4uYXJncykgPT4gSHR0cC5wcm90b3R5cGUucmVxdWVzdC5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICBpbnN0YW5jZS5jb25maWcgPSBjb250ZXh0LmNvbmZpZztcclxuICByZXR1cm4gaW5zdGFuY2U7XHJcbn1cclxuXHJcbnZhciBodHRwID0gY3JlYXRlSW5zdGFuY2UoKTtcclxuaHR0cC5jcmVhdGUgPSAoY29uZmlnKSA9PiB7XHJcbiAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKGNvbmZpZyk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBodHRwO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTb2NrZXQge1xyXG4gIGNvbnN0cnVjdG9yICh1cmwpIHtcclxuICAgIGlmICghd2luZG93LmlvKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3J1blNvY2tldCBpcyB0cnVlIGJ1dCBzb2NrZXRpby1jbGllbnQgaXMgbm90IGluY2x1ZGVkJyk7XHJcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLm9uQXJyID0gW107XG4gICAgdGhpcy5zb2NrZXQgPSBudWxsO1xuICB9XHJcbiAgb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgIHRoaXMub25BcnIucHVzaCh7ZXZlbnROYW1lLCBjYWxsYmFja30pO1xyXG4gIH1cclxuICBjb25uZWN0ICh0b2tlbiwgYW5vbnltb3VzVG9rZW4sIGFwcE5hbWUpIHtcclxuICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgdGhpcy5zb2NrZXQgPSBpby5jb25uZWN0KHRoaXMudXJsLCB7J2ZvcmNlTmV3Jzp0cnVlIH0pO1xyXG5cclxuICAgIHRoaXMuc29ja2V0Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmluZm8oYHRyeWluZyB0byBlc3RhYmxpc2ggYSBzb2NrZXQgY29ubmVjdGlvbiB0byAke2FwcE5hbWV9IC4uLmApO1xyXG4gICAgICB0aGlzLnNvY2tldC5lbWl0KFwibG9naW5cIiwgdG9rZW4sIGFub255bW91c1Rva2VuLCBhcHBOYW1lKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc29ja2V0Lm9uKCdhdXRob3JpemVkJywgKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmluZm8oYHNvY2tldCBjb25uZWN0ZWRgKTtcclxuICAgICAgdGhpcy5vbkFyci5mb3JFYWNoKGZuID0+IHtcclxuICAgICAgICB0aGlzLnNvY2tldC5vbihmbi5ldmVudE5hbWUsIGRhdGEgPT4ge1xyXG4gICAgICAgICAgZm4uY2FsbGJhY2soZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zb2NrZXQub24oJ25vdEF1dGhvcml6ZWQnLCAoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5kaXNjb25uZWN0KCksIDEwMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuaW5mbyhgc29ja2V0IGRpc2Nvbm5lY3RgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc29ja2V0Lm9uKCdyZWNvbm5lY3RpbmcnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuaW5mbyhgc29ja2V0IHJlY29ubmVjdGluZ2ApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zb2NrZXQub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUud2FybihgZXJyb3I6ICR7ZXJyb3J9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZGlzY29ubmVjdCAoKSB7XHJcbiAgICBpZiAodGhpcy5zb2NrZXQpIHtcclxuICAgICAgdGhpcy5zb2NrZXQuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmFnZSB7XHJcbiAgY29uc3RydWN0b3IgKHN0b3JhZ2UsIHByZWZpeCA9ICcnKSB7XHJcbiAgICBpZiAoIXN0b3JhZ2UpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHByb3ZpZGVkIFN0b3JhZ2UgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHBsYXRmb3JtJyk7XHJcbiAgICBpZiAoIXN0b3JhZ2Uuc2V0SXRlbSB8fCAhc3RvcmFnZS5nZXRJdGVtIHx8ICFzdG9yYWdlLnJlbW92ZUl0ZW0gfHwgIXN0b3JhZ2UuY2xlYXIpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHByb3ZpZGVkIFN0b3JhZ2Ugbm90IGltcGxlbWVudCB0aGUgbmVjZXNzYXJ5IGZ1bmN0aW9ucycpO1xyXG4gICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcclxuICAgIHRoaXMucHJlZml4ID0gcHJlZml4O1xyXG4gICAgdGhpcy5kZWxpbWl0ZXIgPSAnX19fX19fX19fXyc7XHJcbiAgfVxyXG4gIGdldCAoa2V5KSB7XHJcbiAgICBsZXQgaXRlbSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGAke3RoaXMucHJlZml4fSR7a2V5fWApO1xyXG4gICAgaWYgKCFpdGVtKSB7XHJcbiAgICAgIHJldHVybiBpdGVtXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcbiAgICAgIGxldCBbdHlwZSwgdmFsXSA9IGl0ZW0uc3BsaXQodGhpcy5kZWxpbWl0ZXIpO1xuICAgICAgaWYgKHR5cGUgIT0gJ0pTT04nKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsKTtcbiAgICAgIH1cbiAgICB9XHJcbiAgfVxyXG4gIHNldCAoa2V5LCB2YWwpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsICE9ICdvYmplY3QnKSB7XHJcbiAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGAke3RoaXMucHJlZml4fSR7a2V5fWAsIGBTVFJJTkcke3RoaXMuZGVsaW1pdGVyfSR7dmFsfWApO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGAke3RoaXMucHJlZml4fSR7a2V5fWAsIGBKU09OJHt0aGlzLmRlbGltaXRlcn0ke0pTT04uc3RyaW5naWZ5KHZhbCl9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlbW92ZSAoa2V5KSB7XHJcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShgJHt0aGlzLnByZWZpeH0ke2tleX1gKTtcclxuICB9XHJcbiAgY2xlYXIgKCkge1xyXG4gICAgZm9yKHZhciBpID0wOyBpIDwgdGhpcy5zdG9yYWdlLmxlbmd0aDsgaSsrKXtcclxuICAgICAgIGlmKHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMuc3RvcmFnZS5rZXkoaSkpLmluZGV4T2YodGhpcy5wcmVmaXgpICE9IC0xKVxyXG4gICAgICAgIHRoaXMucmVtb3ZlKHRoaXMuc3RvcmFnZS5rZXkoaSkpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==\n"]}