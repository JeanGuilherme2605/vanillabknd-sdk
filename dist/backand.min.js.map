{"version":3,"sources":["backand.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","process","global","factory","define","amd","ES6Promise","this","objectOrFunction","x","isFunction","setScheduler","scheduleFn","customSchedulerFn","setAsap","asapFn","asap","useNextTick","nextTick","flush","useVertxTimer","vertxNext","useSetTimeout","useMutationObserver","iterations","observer","BrowserMutationObserver","node","document","createTextNode","observe","characterData","data","useMessageChannel","channel","MessageChannel","port1","onmessage","port2","postMessage","globalSetTimeout","setTimeout","len","callback","queue","arg","undefined","attemptVertx","vertx","runOnLoop","runOnContext","then","onFulfillment","onRejection","_arguments","arguments","parent","child","constructor","noop","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","resolve","object","Constructor","promise","_resolve","selfFulfillment","TypeError","cannotReturnOwn","getThen","error","GET_THEN_ERROR","tryThen","value","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","reason","_reject","_label","handleOwnThenable","FULFILLED","REJECTED","handleMaybeThenable","maybeThenable","then$$","publishRejection","_onerror","publish","PENDING","_subscribers","subscribers","settled","detail","ErrorObject","tryCatch","TRY_CATCH_ERROR","hasCallback","succeeded","failed","initializePromise","resolver","nextId","id","Enumerator","input","_instanceConstructor","isArray","_input","_remaining","Array","_enumerate","validationError","all","entries","race","reject","_","needsResolver","needsNew","Promise","polyfill","local","self","Function","P","promiseToString","Object","prototype","toString","cast","_isArray","scheduleFlush","browserWindow","window","browserGlobal","MutationObserver","WebKitMutationObserver","isNode","isWorker","Uint8ClampedArray","importScripts","Math","random","substring","_eachEntry","entry","c","resolve$$","_then","_settledAt","_willSettleAt","state","enumerator","_setScheduler","_setAsap","_asap","catch","_process","2","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","concat","queueIndex","drainQueue","timeout","run","Item","array","args","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask","3","defineProperty","EVENTS","SIGNIN","SIGNOUT","SIGNUP","URLS","token","signup","requestResetPassword","resetPassword","changePassword","objects","objectsAction","SOCIAL_PROVIDERS","github","label","url","css","backgroundColor","google","facebook","twitter","4","default","appName","anonymousToken","signUpToken","apiUrl","storagePrefix","storageType","manageRefreshToken","runSigninAfterSignup","runSocket","socketUrl","isMobile","5","filter","create","fieldName","operator","operators","numeric","equals","notEquals","greaterThan","greaterThanOrEqualsTo","lessThan","lessThanOrEqualsTo","empty","notEmpty","date","text","startsWith","endsWith","contains","notContains","boolean","relation","in","sort","order","orders","asc","desc","exclude","options","metadata","totalRows","6","_interopRequireWildcard","obj","__esModule","newObj","key","hasOwnProperty","_interopRequireDefault","_extends","assign","target","source","_defaults","_defaults2","_constants","constants","_helpers","helpers","_storage","_storage2","_http","_http2","_socket","_socket2","_auth","auth","_crud","crud","_files","files","initiate","config","storage","http","baseURL","scope","isIE","documentMode","socket","service","fn","bind","interceptors","request","indexOf","get","headers","responseError","scb","ecb","_this","status","Message","__handleRefreshToken__","response","connect","Authorization","./constants","./defaults","./helpers","./services/auth","./services/crud","./services/files","./utils/http","./utils/socket","./utils/storage","7","__generateFakeResponse__","statusText","__dispatchEvent__","event","createEvent","initEvent","eventName","dispatchEvent","createEventObject","eventType","fireEvent","_es6Promise","user","details","refresh_token","__signinWithToken__","username","refreshToken","useAnonymousAuth","_this2","access_token","token_type","expires_in","role","firstName","lastName","fullName","regId","userId","set","AnonymousToken","signin","password","_this3","method","Content-Type","email","confirmPassword","_this4","SignUpToken","__getSocialUrl__","providerName","isSignup","isAutoSignUp","provider","action","autoSignUpParam","__socialAuth__","isSignUp","spec","_this5","popup","open","location","focus","_handler","type","origin","href","res","JSON","parse","newValue","removeEventListener","close","localStorage","removeItem","addEventListener","socialSignin","_this6","accessToken","socialSignup","_this7","tokenData","_this8","encodeURIComponent","join","console","log","newPassword","resetToken","oldPassword","signout","_this9","remove","disconnect","getUserDetails","_this10","dataMatch","exec","decodeURIComponent","replace","setItem","stringify","./../constants","./../defaults","es6-promise","8","__allowedParams__","allowedParams","params","newParams","param","getList","getOne","update","trigger","fileAction","9","uploadFile","filename","filedata","substr","deleteFile","10","_classCallCheck","instance","createInstance","context","Http","_len","_key","_typeof","Symbol","iterator","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","XMLHttpRequest","withCredentials","responseType","split","header","map","jheader","parts","req","_getHeaders","getAllResponseHeaders","_getData","getResponseHeader","responseText","paramsArr","encodeURI","setRequestHeader","send","cfg","_handleError","_encodeParams","ontimeout","onabort","onreadystatechange","readyState","DONE","_res","_createResponse","_setHeaders","_setData","11","Socket","io","onArr","forceNew","info","forEach","warn","12","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","next","done","err","Storage","prefix","delimiter","item","getItem","_item$split","_item$split2","val"],"mappings":"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","file":"backand.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (process,global){\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.0.5\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"_process\":2}],2:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar EVENTS = exports.EVENTS = {\n  SIGNIN: 'SIGNIN',\n  SIGNOUT: 'SIGNOUT',\n  SIGNUP: 'SIGNUP'\n};\n\nvar URLS = exports.URLS = {\n  token: 'token',\n  signup: '1/user/signup',\n  requestResetPassword: '1/user/requestResetPassword',\n  resetPassword: '1/user/resetPassword',\n  changePassword: '1/user/changePassword',\n  objects: '1/objects',\n  objectsAction: '1/objects/action'\n};\n\nvar SOCIAL_PROVIDERS = exports.SOCIAL_PROVIDERS = {\n  github: { name: 'github', label: 'Github', url: 'www.github.com', css: { backgroundColor: '#444' }, id: 1 },\n  google: { name: 'google', label: 'Google', url: 'www.google.com', css: { backgroundColor: '#dd4b39' }, id: 2 },\n  facebook: { name: 'facebook', label: 'Facebook', url: 'www.facebook.com', css: { backgroundColor: '#3b5998' }, id: 3 },\n  twitter: { name: 'twitter', label: 'Twitter', url: 'www.twitter.com', css: { backgroundColor: '#55acee' }, id: 4 }\n};\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  appName: null,\n  anonymousToken: null,\n  signUpToken: null,\n  apiUrl: 'https://api.backand.com',\n  storagePrefix: 'BACKAND_',\n  storageType: 'local',\n  manageRefreshToken: true,\n  runSigninAfterSignup: true,\n  runSocket: false,\n  socketUrl: 'https://socket.backand.com',\n  isMobile: false\n};\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar filter = exports.filter = {\n  create: function create(fieldName, operator, value) {\n    return {\n      fieldName: fieldName,\n      operator: operator,\n      value: value\n    };\n  },\n  operators: {\n    numeric: { equals: \"equals\", notEquals: \"notEquals\", greaterThan: \"greaterThan\", greaterThanOrEqualsTo: \"greaterThanOrEqualsTo\", lessThan: \"lessThan\", lessThanOrEqualsTo: \"lessThanOrEqualsTo\", empty: \"empty\", notEmpty: \"notEmpty\" },\n    date: { equals: \"equals\", notEquals: \"notEquals\", greaterThan: \"greaterThan\", greaterThanOrEqualsTo: \"greaterThanOrEqualsTo\", lessThan: \"lessThan\", lessThanOrEqualsTo: \"lessThanOrEqualsTo\", empty: \"empty\", notEmpty: \"notEmpty\" },\n    text: { equals: \"equals\", notEquals: \"notEquals\", startsWith: \"startsWith\", endsWith: \"endsWith\", contains: \"contains\", notContains: \"notContains\", empty: \"empty\", notEmpty: \"notEmpty\" },\n    boolean: { equals: \"equals\" },\n    relation: { in: \"in\" }\n  }\n};\n\nvar sort = exports.sort = {\n  create: function create(fieldName, order) {\n    return {\n      fieldName: fieldName,\n      order: order\n    };\n  },\n  orders: { asc: \"asc\", desc: \"desc\" }\n};\n\nvar exclude = exports.exclude = {\n  options: { metadata: \"metadata\", totalRows: \"totalRows\", all: \"metadata,totalRows\" }\n};\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /***********************************************\r\n                                                                                                                                                                                                                                                                   * backand JavaScript Library\r\n                                                                                                                                                                                                                                                                   * Authors: backand\r\n                                                                                                                                                                                                                                                                   * License: MIT (http://www.opensource.org/licenses/mit-license.php)\r\n                                                                                                                                                                                                                                                                   * Compiled At: 26/11/2016\r\n                                                                                                                                                                                                                                                                   ***********************************************/\n\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _constants = require('./constants');\n\nvar constants = _interopRequireWildcard(_constants);\n\nvar _helpers = require('./helpers');\n\nvar helpers = _interopRequireWildcard(_helpers);\n\nvar _storage = require('./utils/storage');\n\nvar _storage2 = _interopRequireDefault(_storage);\n\nvar _http = require('./utils/http');\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _socket = require('./utils/socket');\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nvar _auth = require('./services/auth');\n\nvar auth = _interopRequireWildcard(_auth);\n\nvar _crud = require('./services/crud');\n\nvar crud = _interopRequireWildcard(_crud);\n\nvar _files = require('./services/files');\n\nvar files = _interopRequireWildcard(_files);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(function () {\n  'use strict';\n\n  window['backand'] = {};\n  window['backand'].initiate = function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n\n    // combine defaults with user config\n    _extends(_defaults2.default, config);\n\n    // verify new defaults\n    if (!_defaults2.default.appName) throw new Error('appName is missing');\n    if (!_defaults2.default.anonymousToken) throw new Error('anonymousToken is missing');\n    if (!_defaults2.default.signUpToken) throw new Error('signUpToken is missing');\n\n    // init globals\n    var storage = new _storage2.default(_defaults2.default.storageType, _defaults2.default.storagePrefix);\n    var http = _http2.default.create({\n      baseURL: _defaults2.default.apiUrl\n    });\n    var scope = {\n      storage: storage,\n      http: http,\n      isIE: false || !!document.documentMode\n    };\n    var socket = null;\n    if (_defaults2.default.runSocket) {\n      socket = new _socket2.default(_defaults2.default.socketUrl);\n      scope.socket = socket;\n    }\n\n    // bind globals to all service functions\n    var service = _extends({}, auth, crud, files);\n    for (var fn in service) {\n      service[fn] = service[fn].bind(scope);\n    }\n\n    // set interceptor for authHeaders & refreshToken\n    http.config.interceptors = {\n      request: function request(config) {\n        if (config.url.indexOf(constants.URLS.token) === -1 && storage.get('user')) {\n          config.headers = _extends({}, config.headers, storage.get('user').token);\n        }\n      },\n      responseError: function responseError(error, config, resolve, reject, scb, ecb) {\n        var _this = this;\n\n        if (config.url.indexOf(constants.URLS.token) === -1 && _defaults2.default.manageRefreshToken && error.status === 401 && error.data && error.data.Message === 'invalid or expired token') {\n          auth.__handleRefreshToken__.call(scope, error).then(function (response) {\n            _this.request(config, scb, ecb);\n          }).catch(function (error) {\n            ecb && ecb(error);\n            reject(error);\n          });\n        } else {\n          ecb && ecb(error);\n          reject(error);\n        }\n      }\n    };\n\n    // expose backand namespace to window\n    window['backand'] = {\n      service: service,\n      constants: constants,\n      helpers: helpers\n    };\n    if (_defaults2.default.runSocket) {\n      storage.get('user') && socket.connect(storage.get('user').token.Authorization || null, _defaults2.default.anonymousToken, _defaults2.default.appName);\n      window['backand'].socket = socket;\n    }\n  };\n})();\n\n},{\"./constants\":3,\"./defaults\":4,\"./helpers\":5,\"./services/auth\":7,\"./services/crud\":8,\"./services/files\":9,\"./utils/http\":10,\"./utils/socket\":11,\"./utils/storage\":12}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.__handleRefreshToken__ = __handleRefreshToken__;\nexports.useAnonymousAuth = useAnonymousAuth;\nexports.signin = signin;\nexports.signup = signup;\nexports.socialSignin = socialSignin;\nexports.socialSignup = socialSignup;\nexports.requestResetPassword = requestResetPassword;\nexports.resetPassword = resetPassword;\nexports.changePassword = changePassword;\nexports.signout = signout;\nexports.getUserDetails = getUserDetails;\n\nvar _es6Promise = require('es6-promise');\n\nvar _constants = require('./../constants');\n\nvar _defaults = require('./../defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction __generateFakeResponse__() {\n  var status = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var statusText = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var headers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var data = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n\n  return {\n    status: status,\n    statusText: statusText,\n    headers: headers,\n    data: data\n  };\n}\nfunction __dispatchEvent__(name) {\n  var event = void 0;\n  if (document.createEvent) {\n    event = document.createEvent('Event');\n    event.initEvent(name, true, true);\n    event.eventName = name;\n    window.dispatchEvent(event);\n  } else {\n    event = document.createEventObject();\n    event.eventType = name;\n    event.eventName = name;\n    window.fireEvent('on' + event.eventType, event);\n  }\n}\nfunction __handleRefreshToken__(error) {\n  var _this = this;\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    var user = _this.storage.get('user');\n    if (!user || !user.details.refresh_token) {\n      reject(__generateFakeResponse__(0, '', [], 'No cached user or refreshToken found. authentication is required.'));\n    } else {\n      __signinWithToken__.call(_this, {\n        username: user.details.username,\n        refreshToken: user.details.refresh_token\n      }).then(function (response) {\n        resolve(response);\n      }).catch(function (error) {\n        reject(error);\n      });\n    }\n  });\n};\nfunction useAnonymousAuth(scb) {\n  var _this2 = this;\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    var details = {\n      \"access_token\": _defaults2.default.anonymousToken,\n      \"token_type\": \"AnonymousToken\",\n      \"expires_in\": 0,\n      \"appName\": _defaults2.default.appName,\n      \"username\": \"anonymous\",\n      \"role\": \"User\",\n      \"firstName\": \"anonymous\",\n      \"lastName\": \"anonymous\",\n      \"fullName\": \"anonymous anonymous\",\n      \"regId\": 0,\n      \"userId\": null\n    };\n    _this2.storage.set('user', {\n      token: {\n        AnonymousToken: _defaults2.default.anonymousToken\n      },\n      details: details\n    });\n    __dispatchEvent__(_constants.EVENTS.SIGNIN);\n    if (_defaults2.default.runSocket) {\n      _this2.socket.connect(null, _defaults2.default.anonymousToken, _defaults2.default.appName);\n    }\n    scb && scb(__generateFakeResponse__(200, 'OK', [], details));\n    resolve(__generateFakeResponse__(200, 'OK', [], details));\n  });\n}\nfunction signin(username, password, scb, ecb) {\n  var _this3 = this;\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    _this3.http({\n      url: _constants.URLS.token,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      data: 'username=' + username + '&password=' + password + '&appName=' + _defaults2.default.appName + '&grant_type=password'\n    }).then(function (response) {\n      _this3.storage.set('user', {\n        token: {\n          Authorization: 'Bearer ' + response.data.access_token\n        },\n        details: response.data\n      });\n      __dispatchEvent__(_constants.EVENTS.SIGNIN);\n      if (_defaults2.default.runSocket) {\n        _this3.socket.connect(_this3.storage.get('user').token.Authorization, _defaults2.default.anonymousToken, _defaults2.default.appName);\n      }\n      scb && scb(response);\n      resolve(response);\n    }).catch(function (error) {\n      ecb && ecb(error);\n      reject(error);\n    });\n  });\n}\nfunction signup(email, password, confirmPassword, firstName, lastName, scb, ecb) {\n  var _this4 = this;\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    _this4.http({\n      url: _constants.URLS.signup,\n      method: 'POST',\n      headers: {\n        'SignUpToken': _defaults2.default.signUpToken\n      },\n      data: {\n        firstName: firstName,\n        lastName: lastName,\n        email: email,\n        password: password,\n        confirmPassword: confirmPassword\n      }\n    }, scb, ecb).then(function (response) {\n      __dispatchEvent__(_constants.EVENTS.SIGNUP);\n      if (_defaults2.default.runSigninAfterSignup) {\n        return signin.call(_this4, response.data.username, password);\n      } else {\n        scb && scb(response);\n        resolve(response);\n      }\n    }).then(function (response) {\n      scb && scb(response);\n      resolve(response);\n    }).catch(function (error) {\n      ecb && ecb(error);\n      reject(error);\n    });\n  });\n}\nfunction __getSocialUrl__(providerName, isSignup, isAutoSignUp) {\n  var provider = _constants.SOCIAL_PROVIDERS[providerName];\n  var action = isSignup ? 'up' : 'in';\n  var autoSignUpParam = '&signupIfNotSignedIn=' + (!isSignup && isAutoSignUp ? 'true' : 'false');\n  return '/user/socialSign' + action + '?provider=' + provider.label + autoSignUpParam + '&response_type=token&client_id=self&redirect_uri=' + provider.url + '&state=';\n}\nfunction __socialAuth__(provider, isSignUp, spec, email) {\n  var _this5 = this;\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    if (!_constants.SOCIAL_PROVIDERS[provider]) {\n      reject(__generateFakeResponse__(0, '', [], 'Unknown Social Provider'));\n    }\n    var url = _defaults2.default.apiUrl + '/1/' + __getSocialUrl__(provider, isSignUp, true) + '&appname=' + _defaults2.default.appName + (email ? '&email=' + email : '') + '&returnAddress='; // ${location.href}\n    var popup = null;\n    if (!_this5.isIE) {\n      popup = window.open(url, 'socialpopup', spec);\n    } else {\n      popup = window.open('', '', spec);\n      popup.location = url;\n    }\n    if (popup && popup.focus) {\n      popup.focus();\n    }\n\n    var _handler = function handler(e) {\n      var url = e.type === 'message' ? e.origin : e.url;\n      if (url.indexOf(location.href) === -1) {\n        reject(__generateFakeResponse__(0, '', [], 'Unknown Origin Message'));\n      }\n\n      var res = e.type === 'message' ? JSON.parse(e.data) : JSON.parse(e.newValue);\n      window.removeEventListener(e.type, _handler, false);\n      if (popup && popup.close) {\n        popup.close();\n      }\n      e.type == 'Storage' && localStorage.removeItem(e.key);\n\n      if (res.status != 200) {\n        reject(res);\n      } else {\n        resolve(res);\n      }\n    };\n    _handler = _handler.bind(popup);\n\n    window.addEventListener('storage', _handler, false);\n    // window.addEventListener('message', handler, false);\n  });\n}\nfunction socialSignin(provider, scb, ecb) {\n  var _this6 = this;\n\n  var spec = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'left=1, top=1, width=500, height=560';\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    __socialAuth__.call(_this6, provider, false, spec, '').then(function (response) {\n      __dispatchEvent__(_constants.EVENTS.SIGNUP);\n      return __signinWithToken__.call(_this6, {\n        accessToken: response.data.access_token\n      });\n    }).then(function (response) {\n      scb && scb(response);\n      resolve(response);\n    }).catch(function (error) {\n      ecb && ecb(error);\n      reject(error);\n    });\n  });\n};\nfunction socialSignup(provider, email, scb, ecb) {\n  var _this7 = this;\n\n  var spec = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'left=1, top=1, width=500, height=560';\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    __socialAuth__.call(_this7, provider, true, spec, email).then(function (response) {\n      __dispatchEvent__(_constants.EVENTS.SIGNUP);\n      if (_defaults2.default.runSigninAfterSignup) {\n        return __signinWithToken__.call(_this7, {\n          accessToken: response.data.access_token\n        });\n      } else {\n        scb && scb(response);\n        resolve(response);\n      }\n    }).then(function (response) {\n      scb && scb(response);\n      resolve(response);\n    }).catch(function (error) {\n      ecb && ecb(error);\n      reject(error);\n    });\n  });\n}\nfunction __signinWithToken__(tokenData) {\n  var _this8 = this;\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    var data = [];\n    for (var obj in tokenData) {\n      data.push(encodeURIComponent(obj) + '=' + encodeURIComponent(tokenData[obj]));\n    }\n    data = data.join(\"&\");\n\n    _this8.http({\n      url: _constants.URLS.token,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      data: data + '&appName=' + _defaults2.default.appName + '&grant_type=password'\n    }).then(function (response) {\n      _this8.storage.set('user', {\n        token: {\n          Authorization: 'Bearer ' + response.data.access_token\n        },\n        details: response.data\n      });\n      __dispatchEvent__(_constants.EVENTS.SIGNIN);\n      if (_defaults2.default.runSocket) {\n        _this8.socket.connect(_this8.storage.get('user').token.Authorization, _defaults2.default.anonymousToken, _defaults2.default.appName);\n      }\n      resolve(response);\n    }).catch(function (error) {\n      console.log(error);\n      reject(error);\n    });\n  });\n}\nfunction requestResetPassword(username, scb, ecb) {\n  return this.http({\n    url: _constants.URLS.requestResetPassword,\n    method: 'POST',\n    data: {\n      appName: _defaults2.default.appName,\n      username: username\n    }\n  }, scb, ecb);\n}\nfunction resetPassword(newPassword, resetToken, scb, ecb) {\n  return this.http({\n    url: _constants.URLS.resetPassword,\n    method: 'POST',\n    data: {\n      newPassword: newPassword,\n      resetToken: resetToken\n    }\n  }, scb, ecb);\n}\nfunction changePassword(oldPassword, newPassword, scb, ecb) {\n  return this.http({\n    url: _constants.URLS.changePassword,\n    method: 'POST',\n    data: {\n      oldPassword: oldPassword,\n      newPassword: newPassword\n    }\n  }, scb, ecb);\n}\nfunction signout(scb) {\n  var _this9 = this;\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    _this9.storage.remove('user');\n    if (_defaults2.default.runSocket) {\n      _this9.socket.disconnect();\n    }\n    __dispatchEvent__(_constants.EVENTS.SIGNOUT);\n    scb && scb(__generateFakeResponse__(200, 'OK', [], _this9.storage.get('user')));\n    resolve(__generateFakeResponse__(200, 'OK', [], _this9.storage.get('user')));\n  });\n}\nfunction getUserDetails(scb, ecb) {\n  var _this10 = this;\n\n  return new _es6Promise.Promise(function (resolve, reject) {\n    var user = _this10.storage.get('user');\n    if (!user) {\n      ecb && ecb(__generateFakeResponse__(0, '', [], 'No cached user found. authentication is required.'));\n      reject(__generateFakeResponse__(0, '', [], 'No cached user found. authentication is required.'));\n    } else {\n      scb && scb(__generateFakeResponse__(200, 'OK', [], user.details));\n      resolve(__generateFakeResponse__(200, 'OK', [], user.details));\n    }\n  });\n}\n\n// get data from url in social sign-in popup\n(function () {\n  var dataMatch = /\\?(data|error)=(.+)/.exec(location.href);\n  if (dataMatch && dataMatch[1] && dataMatch[2]) {\n    var data = {\n      data: JSON.parse(decodeURIComponent(dataMatch[2].replace(/#.*/, '')))\n    };\n    data.status = dataMatch[1] === 'data' ? 200 : 0;\n    localStorage.setItem('SOCIAL_DATA', JSON.stringify(data));\n    // var isIE = false || !!document.documentMode;\n    // if (!isIE) {\n    //   window.opener.postMessage(JSON.stringify(data), location.origin);\n    // }\n  }\n})();\n\n},{\"./../constants\":3,\"./../defaults\":4,\"es6-promise\":1}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getList = getList;\nexports.create = create;\nexports.getOne = getOne;\nexports.update = update;\nexports.remove = remove;\nexports.trigger = trigger;\n\nvar _constants = require('./../constants');\n\nfunction __allowedParams__(allowedParams, params) {\n  var newParams = {};\n  for (var param in params) {\n    if (allowedParams.indexOf(param) != -1) {\n      newParams[param] = params[param];\n    }\n  }\n  return newParams;\n}\nfunction getList(object) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var scb = arguments[2];\n  var ecb = arguments[3];\n\n  var allowedParams = ['pageSize', 'pageNumber', 'filter', 'sort', 'search', 'exclude', 'deep', 'relatedObjects'];\n  return this.http({\n    url: _constants.URLS.objects + '/' + object,\n    method: 'GET',\n    params: __allowedParams__(allowedParams, params)\n  }, scb, ecb);\n}\nfunction create(object, data) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var scb = arguments[3];\n  var ecb = arguments[4];\n\n  var allowedParams = ['returnObject', 'deep'];\n  return this.http({\n    url: _constants.URLS.objects + '/' + object,\n    method: 'POST',\n    data: data,\n    params: __allowedParams__(allowedParams, params)\n  }, scb, ecb);\n}\nfunction getOne(object, id) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var scb = arguments[3];\n  var ecb = arguments[4];\n\n  var allowedParams = ['deep', 'exclude', 'level'];\n  return this.http({\n    url: _constants.URLS.objects + '/' + object + '/' + id,\n    method: 'GET',\n    params: __allowedParams__(allowedParams, params)\n  }, scb, ecb);\n}\nfunction update(object, id, data) {\n  var params = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var scb = arguments[4];\n  var ecb = arguments[5];\n\n  var allowedParams = ['returnObject', 'deep'];\n  return this.http({\n    url: _constants.URLS.objects + '/' + object + '/' + id,\n    method: 'PUT',\n    data: data,\n    params: __allowedParams__(allowedParams, params)\n  }, scb, ecb);\n}\nfunction remove(object, id, scb, ecb) {\n  return this.http({\n    url: _constants.URLS.objects + '/' + object + '/' + id,\n    method: 'DELETE'\n  }, scb, ecb);\n}\nfunction trigger(object, fileAction) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var scb = arguments[3];\n  var ecb = arguments[4];\n\n  return this.http({\n    url: _constants.URLS.objectsAction + '/' + object + '?name=' + fileAction,\n    method: 'POST',\n    data: data\n  }, scb, ecb);\n}\n\n},{\"./../constants\":3}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uploadFile = uploadFile;\nexports.deleteFile = deleteFile;\n\nvar _constants = require('./../constants');\n\nfunction uploadFile(object, fileAction, filename, filedata, scb, ecb) {\n  return this.http({\n    url: _constants.URLS.objectsAction + '/' + object + '?name=' + fileAction,\n    method: 'POST',\n    data: {\n      filename: filename,\n      filedata: filedata.substr(filedata.indexOf(',') + 1, filedata.length)\n    }\n  }, scb, ecb);\n}\nfunction deleteFile(object, fileAction, filename, scb, ecb) {\n  return this.http({\n    url: _constants.URLS.objectsAction + '/' + object + '?name=' + fileAction,\n    method: 'DELETE',\n    data: {\n      filename: filename\n    }\n  }, scb, ecb);\n}\n\n},{\"./../constants\":3}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _es6Promise = require('es6-promise');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Http = function () {\n  function Http() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Http);\n\n    if (!window.XMLHttpRequest) throw new Error('XMLHttpRequest is not supported by the browser');\n\n    this.config = _extends({\n      // url: '/',\n      method: 'GET',\n      headers: {},\n      params: {},\n      interceptors: {},\n      withCredentials: false,\n      responseType: 'json',\n      // timeout: null,\n      auth: {\n        username: null,\n        password: null\n      }\n    }, config);\n  }\n\n  _createClass(Http, [{\n    key: '_getHeaders',\n    value: function _getHeaders(headers) {\n      return headers.split('\\r\\n').filter(function (header) {\n        return header;\n      }).map(function (header) {\n        var jheader = {};\n        var parts = header.split(':');\n        jheader[parts[0]] = parts[1];\n        return jheader;\n      });\n    }\n  }, {\n    key: '_getData',\n    value: function _getData(type, data) {\n      if (!type) {\n        return data;\n      } else if (type.indexOf('json') === -1) {\n        return data;\n      } else {\n        return JSON.parse(data);\n      }\n    }\n  }, {\n    key: '_createResponse',\n    value: function _createResponse(req, config) {\n      return {\n        status: req.status,\n        statusText: req.statusText,\n        headers: this._getHeaders(req.getAllResponseHeaders()),\n        config: config,\n        data: this._getData(req.getResponseHeader(\"Content-Type\"), req.responseText)\n      };\n    }\n  }, {\n    key: '_handleError',\n    value: function _handleError(data, config) {\n      return {\n        status: 0,\n        statusText: 'ERROR',\n        headers: [],\n        config: config,\n        data: data\n      };\n    }\n  }, {\n    key: '_encodeParams',\n    value: function _encodeParams(params) {\n      var paramsArr = [];\n      for (var param in params) {\n        paramsArr.push(param + '=' + encodeURI(JSON.stringify(params[param])));\n      }\n      return paramsArr.join('&');\n    }\n  }, {\n    key: '_setHeaders',\n    value: function _setHeaders(req, headers) {\n      for (var header in headers) {\n        req.setRequestHeader(header, headers[header]);\n      }\n    }\n  }, {\n    key: '_setData',\n    value: function _setData(req, data) {\n      if (!data) {\n        req.send();\n      } else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) != 'object') {\n        req.send(data);\n      } else {\n        req.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n        req.send(JSON.stringify(data));\n      }\n    }\n  }, {\n    key: 'request',\n    value: function request(cfg, scb, ecb) {\n      var _this = this;\n\n      return new _es6Promise.Promise(function (resolve, reject) {\n\n        var req = new XMLHttpRequest();\n        var config = _extends({}, _this.config, cfg);\n\n        if (!config.url || typeof config.url !== 'string' || config.url.length === 0) {\n          var res = _this._handleError('url parameter is missing', config);\n          ecb && ecb(res);\n          reject(res);\n        }\n        if (config.withCredentials) {\n          req.withCredentials = true;\n        }\n        if (config.timeout) {\n          req.timeout = true;\n        }\n        config.interceptors.request && config.interceptors.request.call(_this, config);\n        var params = _this._encodeParams(config.params);\n        req.open(config.method, '' + (config.baseURL ? config.baseURL + '/' : '') + config.url + (params ? '?' + params : ''), true, config.auth.username, config.auth.password);\n        req.ontimeout = function () {\n          var res = this._handleError('timeout', config);\n          ecb && ecb(res);\n          reject(res);\n        };\n        req.onabort = function () {\n          var res = this._handleError('abort', config);\n          ecb && ecb(res);\n          reject(res);\n        };\n        req.onreadystatechange = function () {\n          if (req.readyState == XMLHttpRequest.DONE) {\n            var _res = _this._createResponse(req, config);\n            if (_res.status === 200) {\n              if (config.interceptors.response) {\n                config.interceptors.response.call(_this, _res, config, resolve, reject, scb, ecb);\n              } else {\n                scb && scb(_res);\n                resolve(_res);\n              }\n            } else {\n              if (config.interceptors.responseError) {\n                config.interceptors.responseError.call(_this, _res, config, resolve, reject, scb, ecb);\n              } else {\n                ecb && ecb(_res);\n                reject(_res);\n              }\n            }\n          }\n        };\n        _this._setHeaders(req, config.headers);\n        _this._setData(req, config.data);\n      });\n    }\n  }]);\n\n  return Http;\n}();\n\nfunction createInstance() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var context = new Http(config);\n  var instance = function instance() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return Http.prototype.request.apply(context, args);\n  };\n  instance.config = context.config;\n  return instance;\n}\n\nvar http = window.http || createInstance();\nhttp.create = function (config) {\n  return createInstance(config);\n};\n\nexports.default = http;\n\nwindow.http = http;\n\n},{\"es6-promise\":1}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Socket = function () {\n  function Socket(url) {\n    _classCallCheck(this, Socket);\n\n    if (!window.io) throw new Error('runSocket is true but socketio-client is not included');\n    this.url = url;\n    this.onArr = [];\n    this.socket = null;\n  }\n\n  _createClass(Socket, [{\n    key: 'on',\n    value: function on(eventName, callback) {\n      this.onArr.push({ eventName: eventName, callback: callback });\n    }\n  }, {\n    key: 'connect',\n    value: function connect(token, anonymousToken, appName) {\n      var _this = this;\n\n      this.disconnect();\n      this.socket = io.connect(this.url, { 'forceNew': true });\n\n      this.socket.on('connect', function () {\n        console.info('trying to establish a socket connection to ' + appName + ' ...');\n        _this.socket.emit(\"login\", token, anonymousToken, appName);\n      });\n\n      this.socket.on('authorized', function () {\n        console.info('socket connected');\n        _this.onArr.forEach(function (fn) {\n          _this.socket.on(fn.eventName, function (data) {\n            fn.callback(data);\n          });\n        });\n      });\n\n      this.socket.on('notAuthorized', function () {\n        setTimeout(function () {\n          return _this.disconnect();\n        }, 1000);\n      });\n\n      this.socket.on('disconnect', function () {\n        console.info('socket disconnect');\n      });\n\n      this.socket.on('reconnecting', function () {\n        console.info('socket reconnecting');\n      });\n\n      this.socket.on('error', function (error) {\n        console.warn('error: ' + error);\n      });\n    }\n  }, {\n    key: 'disconnect',\n    value: function disconnect() {\n      if (this.socket) {\n        this.socket.close();\n      }\n    }\n  }]);\n\n  return Socket;\n}();\n\nexports.default = Socket;\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Storage = function () {\n  function Storage(type) {\n    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n    _classCallCheck(this, Storage);\n\n    if (!window[type + 'Storage']) throw new Error(type + 'Storage is not supported by the browser');\n    this.prefix = prefix;\n    this.delimiter = '__________';\n    this.storage = window[type + 'Storage'];\n  }\n\n  _createClass(Storage, [{\n    key: 'get',\n    value: function get(key) {\n      var item = this.storage.getItem('' + this.prefix + key);\n      if (!item) {\n        return item;\n      } else {\n        var _item$split = item.split(this.delimiter),\n            _item$split2 = _slicedToArray(_item$split, 2),\n            type = _item$split2[0],\n            val = _item$split2[1];\n\n        if (type != 'JSON') {\n          return val;\n        } else {\n          return JSON.parse(val);\n        }\n      }\n    }\n  }, {\n    key: 'set',\n    value: function set(key, val) {\n      if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) != 'object') {\n        this.storage.setItem('' + this.prefix + key, 'STRING' + this.delimiter + val);\n      } else {\n        this.storage.setItem('' + this.prefix + key, 'JSON' + this.delimiter + JSON.stringify(val));\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove(key) {\n      this.storage.removeItem('' + this.prefix + key);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      for (var i = 0; i < this.storage.length; i++) {\n        if (this.storage.getItem(this.storage.key(i)).indexOf(this.prefix) != -1) this.remove(this.storage.key(i));\n      }\n    }\n  }]);\n\n  return Storage;\n}();\n\nexports.default = Storage;\n\n},{}]},{},[6])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJzcmNcXGNvbnN0YW50cy5qcyIsInNyY1xcZGVmYXVsdHMuanMiLCJzcmNcXGhlbHBlcnMuanMiLCJzcmNcXGluZGV4LmpzIiwic3JjXFxzZXJ2aWNlc1xcYXV0aC5qcyIsInNyY1xcc2VydmljZXNcXGNydWQuanMiLCJzcmNcXHNlcnZpY2VzXFxmaWxlcy5qcyIsInNyY1xcdXRpbHNcXGh0dHAuanMiLCJzcmNcXHV0aWxzXFxzb2NrZXQuanMiLCJzcmNcXHV0aWxzXFxzdG9yYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNwb0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FDcExPLElBQU0sMEJBQVM7QUFDcEIsVUFBUSxRQURZO0FBRXBCLFdBQVMsU0FGVztBQUdwQixVQUFRO0FBSFksQ0FBZjs7QUFNQSxJQUFNLHNCQUFPO0FBQ2xCLFNBQU8sT0FEVztB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Q0FBWCxFQUFjLElBQUksS0FBSyxPQUFMLENBQWEsTUFBL0IsRUFBdUMsR0FBdkMsRUFBMkM7QUFDeEMsWUFBRyxLQUFLLE9BQUwsQ0FBYSxPQUFiLENBQXFCLEtBQUssT0FBTCxDQUFhLEdBQWIsQ0FBaUIsQ0FBakIsQ0FBckIsRUFBMEMsT0FBMUMsQ0FBa0QsS0FBSyxNQUF2RCxLQUFrRSxDQUFDLENBQXRFLEVBQ0MsS0FBSyxNQUFMLENBQVksS0FBSyxPQUFMLENBQWEsR0FBYixDQUFpQixDQUFqQixDQUFaO0FBQ0g7QUFDRjs7Ozs7O2tCQXZDa0IsTyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKiFcbiAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDQuMC41XG4gKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cbnZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDtcbmlmICghQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdW5kZWZpbmVkO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICh7fSkudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICBpZiAodHlwZW9mIHZlcnR4TmV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmVydHhOZXh0KGZsdXNoKTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcbiAgfTtcbn1cblxuLy8gd2ViIHdvcmtlclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG4gICAgY2FsbGJhY2soYXJnKTtcblxuICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgciA9IHJlcXVpcmU7XG4gICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcbiAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xuICB9XG59XG5cbnZhciBzY2hlZHVsZUZsdXNoID0gdW5kZWZpbmVkO1xuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbmlmIChpc05vZGUpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7XG59IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG59IGVsc2UgaWYgKGlzV29ya2VyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cztcblxuICB2YXIgcGFyZW50ID0gdGhpcztcblxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgfVxuXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gIGlmIChfc3RhdGUpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTtcbiAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUob2JqZWN0KSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIFBFTkRJTkcgPSB2b2lkIDA7XG52YXIgRlVMRklMTEVEID0gMTtcbnZhciBSRUpFQ1RFRCA9IDI7XG5cbnZhciBHRVRfVEhFTl9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbn1cblxuZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgcmV0dXJuIEdFVF9USEVOX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICB0cnkge1xuICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgIHZhciBlcnJvciA9IHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9XG4gIH0sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCkge1xuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlKSB7XG4gICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoZW4kJCA9PT0gR0VUX1RIRU5fRVJST1IpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAodGhlbiQkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJCkpIHtcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcblxuICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2hpbGQgPSB1bmRlZmluZWQsXG4gICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCxcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIEVycm9yT2JqZWN0KCkge1xuICB0aGlzLmVycm9yID0gbnVsbDtcbn1cblxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdW5kZWZpbmVkLFxuICAgICAgZXJyb3IgPSB1bmRlZmluZWQsXG4gICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXG4gICAgICBmYWlsZWQgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgLy8gbm9vcFxuICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICB0cnkge1xuICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG4gICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZWplY3QocHJvbWlzZSwgZSk7XG4gIH1cbn1cblxudmFyIGlkID0gMDtcbmZ1bmN0aW9uIG5leHRJZCgpIHtcbiAgcmV0dXJuIGlkKys7XG59XG5cbmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcbiAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XG4gIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG59XG5cbmZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG4gICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgIHRoaXMuX2VudW1lcmF0ZSgpO1xuICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgX3JlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICB2YXIgX2lucHV0ID0gdGhpcy5faW5wdXQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRoaXMuX2VhY2hFbnRyeShfaW5wdXRbaV0sIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG4gIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgdmFyIHJlc29sdmUkJCA9IGMucmVzb2x2ZTtcblxuICBpZiAocmVzb2x2ZSQkID09PSByZXNvbHZlKSB7XG4gICAgdmFyIF90aGVuID0gZ2V0VGhlbihlbnRyeSk7XG5cbiAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG4gICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlJCQoZW50cnkpO1xuICAgICAgfSksIGkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkKGVudHJ5KSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG4gIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkge1xuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gIH0pO1xufTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsKGVudHJpZXMpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxuICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlXG4gIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcbiAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmVcbiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuICB9KTtcbiAgYGBgXG5cbiAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblxuICBgYGBqYXZhc2NyaXB0XG4gIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXG4gIGBgYFxuXG4gIEBtZXRob2QgcmFjZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxuICBwcm9taXNlIHRvIHNldHRsZS5cbiovXG5mdW5jdGlvbiByYWNlKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG59XG5cbmZ1bmN0aW9uIG5lZWRzTmV3KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xufVxuXG4vKipcbiAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgVGVybWlub2xvZ3lcbiAgLS0tLS0tLS0tLS1cblxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICBCYXNpYyBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tXG5cbiAgYGBganNcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvLyBvbiBzdWNjZXNzXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAvLyBvbiBmYWlsdXJlXG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgQWR2YW5jZWQgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLS0tLVxuXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgYGBganNcbiAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gIGBgYGpzXG4gIFByb21pc2UuYWxsKFtcbiAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0pO1xuICBgYGBcblxuICBAY2xhc3MgUHJvbWlzZVxuICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEBjb25zdHJ1Y3RvclxuKi9cbmZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgfVxufVxuXG5Qcm9taXNlLmFsbCA9IGFsbDtcblByb21pc2UucmFjZSA9IHJhY2U7XG5Qcm9taXNlLnJlc29sdmUgPSByZXNvbHZlO1xuUHJvbWlzZS5yZWplY3QgPSByZWplY3Q7XG5Qcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlLl9zZXRBc2FwID0gc2V0QXNhcDtcblByb21pc2UuX2FzYXAgPSBhc2FwO1xuXG5Qcm9taXNlLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFByb21pc2UsXG5cbiAgLyoqXG4gICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG4gICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQ2hhaW5pbmdcbiAgICAtLS0tLS0tLVxuICBcbiAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiB1c2VyLm5hbWU7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgICB9KTtcbiAgXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG4gICAgfSk7XG4gICAgYGBgXG4gICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFzc2ltaWxhdGlvblxuICAgIC0tLS0tLS0tLS0tLVxuICBcbiAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcbiAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBTaW1wbGUgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCByZXN1bHQ7XG4gIFxuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCBhdXRob3IsIGJvb2tzO1xuICBcbiAgICB0cnkge1xuICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgRXJyYmFjayBFeGFtcGxlXG4gIFxuICAgIGBgYGpzXG4gIFxuICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgXG4gICAgfVxuICBcbiAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuICBcbiAgICB9XG4gIFxuICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgZmluZEF1dGhvcigpLlxuICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG4gICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCB0aGVuXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gIHRoZW46IHRoZW4sXG5cbiAgLyoqXG4gICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG4gIFxuICAgIGBgYGpzXG4gICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG4gICAgfVxuICBcbiAgICAvLyBzeW5jaHJvbm91c1xuICAgIHRyeSB7XG4gICAgICBmaW5kQXV0aG9yKCk7XG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfVxuICBcbiAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG4gICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIGNhdGNoXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cbiAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IGdsb2JhbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IHNlbGY7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgIGlmIChQKSB7XG4gICAgICAgIHZhciBwcm9taXNlVG9TdHJpbmcgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvY2FsLlByb21pc2UgPSBQcm9taXNlO1xufVxuXG4vLyBTdHJhbmdlIGNvbXBhdC4uXG5Qcm9taXNlLnBvbHlmaWxsID0gcG9seWZpbGw7XG5Qcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xuXG5yZXR1cm4gUHJvbWlzZTtcblxufSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJleHBvcnQgY29uc3QgRVZFTlRTID0ge1xyXG4gIFNJR05JTjogJ1NJR05JTicsXHJcbiAgU0lHTk9VVDogJ1NJR05PVVQnLFxyXG4gIFNJR05VUDogJ1NJR05VUCdcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBVUkxTID0ge1xyXG4gIHRva2VuOiAndG9rZW4nLFxyXG4gIHNpZ251cDogJzEvdXNlci9zaWdudXAnLFxyXG4gIHJlcXVlc3RSZXNldFBhc3N3b3JkOiAnMS91c2VyL3JlcXVlc3RSZXNldFBhc3N3b3JkJyxcclxuICByZXNldFBhc3N3b3JkOiAnMS91c2VyL3Jlc2V0UGFzc3dvcmQnLFxyXG4gIGNoYW5nZVBhc3N3b3JkOiAnMS91c2VyL2NoYW5nZVBhc3N3b3JkJyxcclxuICBvYmplY3RzOiAnMS9vYmplY3RzJyxcclxuICBvYmplY3RzQWN0aW9uOiAnMS9vYmplY3RzL2FjdGlvbidcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBTT0NJQUxfUFJPVklERVJTID0ge1xyXG4gIGdpdGh1Yjoge25hbWU6ICdnaXRodWInLCBsYWJlbDogJ0dpdGh1YicsIHVybDogJ3d3dy5naXRodWIuY29tJywgY3NzOiB7YmFja2dyb3VuZENvbG9yOiAnIzQ0NCd9LCBpZDogMX0sXHJcbiAgZ29vZ2xlOiB7bmFtZTogJ2dvb2dsZScsIGxhYmVsOiAnR29vZ2xlJywgdXJsOiAnd3d3Lmdvb2dsZS5jb20nLCBjc3M6IHtiYWNrZ3JvdW5kQ29sb3I6ICcjZGQ0YjM5J30sIGlkOiAyfSxcclxuICBmYWNlYm9vazoge25hbWU6ICdmYWNlYm9vaycsIGxhYmVsOiAnRmFjZWJvb2snLCB1cmw6ICd3d3cuZmFjZWJvb2suY29tJywgY3NzOiB7YmFja2dyb3VuZENvbG9yOiAnIzNiNTk5OCd9LCBpZDogM30sXHJcbiAgdHdpdHRlcjoge25hbWU6ICd0d2l0dGVyJywgbGFiZWw6ICdUd2l0dGVyJywgdXJsOiAnd3d3LnR3aXR0ZXIuY29tJywgY3NzOiB7YmFja2dyb3VuZENvbG9yOiAnIzU1YWNlZSd9LCBpZDogNH1cclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQge1xyXG4gIGFwcE5hbWU6IG51bGwsXHJcbiAgYW5vbnltb3VzVG9rZW46IG51bGwsXHJcbiAgc2lnblVwVG9rZW46IG51bGwsXHJcbiAgYXBpVXJsOiAnaHR0cHM6Ly9hcGkuYmFja2FuZC5jb20nLFxyXG4gIHN0b3JhZ2VQcmVmaXg6ICdCQUNLQU5EXycsXHJcbiAgc3RvcmFnZVR5cGU6ICdsb2NhbCcsXHJcbiAgbWFuYWdlUmVmcmVzaFRva2VuOiB0cnVlLFxyXG4gIHJ1blNpZ25pbkFmdGVyU2lnbnVwOiB0cnVlLFxyXG4gIHJ1blNvY2tldDogZmFsc2UsXHJcbiAgc29ja2V0VXJsOiAnaHR0cHM6Ly9zb2NrZXQuYmFja2FuZC5jb20nLFxyXG4gIGlzTW9iaWxlOiBmYWxzZSxcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IGZpbHRlciA9IHtcclxuICBjcmVhdGU6IChmaWVsZE5hbWUsIG9wZXJhdG9yLCB2YWx1ZSkgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZmllbGROYW1lLFxyXG4gICAgICBvcGVyYXRvcixcclxuICAgICAgdmFsdWVcclxuICAgIH1cclxuICB9LFxyXG4gIG9wZXJhdG9yczoge1xyXG4gICAgbnVtZXJpYzogeyBlcXVhbHM6IFwiZXF1YWxzXCIsIG5vdEVxdWFsczogXCJub3RFcXVhbHNcIiwgZ3JlYXRlclRoYW46IFwiZ3JlYXRlclRoYW5cIiwgZ3JlYXRlclRoYW5PckVxdWFsc1RvOiBcImdyZWF0ZXJUaGFuT3JFcXVhbHNUb1wiLCBsZXNzVGhhbjogXCJsZXNzVGhhblwiLCBsZXNzVGhhbk9yRXF1YWxzVG86IFwibGVzc1RoYW5PckVxdWFsc1RvXCIsIGVtcHR5OiBcImVtcHR5XCIsIG5vdEVtcHR5OiBcIm5vdEVtcHR5XCIgfSxcclxuICAgIGRhdGU6IHsgZXF1YWxzOiBcImVxdWFsc1wiLCBub3RFcXVhbHM6IFwibm90RXF1YWxzXCIsIGdyZWF0ZXJUaGFuOiBcImdyZWF0ZXJUaGFuXCIsIGdyZWF0ZXJUaGFuT3JFcXVhbHNUbzogXCJncmVhdGVyVGhhbk9yRXF1YWxzVG9cIiwgbGVzc1RoYW46IFwibGVzc1RoYW5cIiwgbGVzc1RoYW5PckVxdWFsc1RvOiBcImxlc3NUaGFuT3JFcXVhbHNUb1wiLCBlbXB0eTogXCJlbXB0eVwiLCBub3RFbXB0eTogXCJub3RFbXB0eVwiIH0sXHJcbiAgICB0ZXh0OiB7IGVxdWFsczogXCJlcXVhbHNcIiwgbm90RXF1YWxzOiBcIm5vdEVxdWFsc1wiLCBzdGFydHNXaXRoOiBcInN0YXJ0c1dpdGhcIiwgZW5kc1dpdGg6IFwiZW5kc1dpdGhcIiwgY29udGFpbnM6IFwiY29udGFpbnNcIiwgbm90Q29udGFpbnM6IFwibm90Q29udGFpbnNcIiwgZW1wdHk6IFwiZW1wdHlcIiwgbm90RW1wdHk6IFwibm90RW1wdHlcIiB9LFxyXG4gICAgYm9vbGVhbjogeyBlcXVhbHM6IFwiZXF1YWxzXCIgfSxcclxuICAgIHJlbGF0aW9uOiB7IGluOiBcImluXCIgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNvcnQgPSB7XHJcbiAgY3JlYXRlOiAoZmllbGROYW1lLCBvcmRlcikgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZmllbGROYW1lLFxyXG4gICAgICBvcmRlclxyXG4gICAgfVxyXG4gIH0sXHJcbiAgb3JkZXJzOiB7IGFzYzogXCJhc2NcIiwgZGVzYzogXCJkZXNjXCIgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZXhjbHVkZSA9IHtcclxuICBvcHRpb25zOiB7IG1ldGFkYXRhOiBcIm1ldGFkYXRhXCIsIHRvdGFsUm93czogXCJ0b3RhbFJvd3NcIiwgYWxsOiBcIm1ldGFkYXRhLHRvdGFsUm93c1wiIH1cclxufVxyXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogYmFja2FuZCBKYXZhU2NyaXB0IExpYnJhcnlcclxuICogQXV0aG9yczogYmFja2FuZFxyXG4gKiBMaWNlbnNlOiBNSVQgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwKVxyXG4gKiBDb21waWxlZCBBdDogMjYvMTEvMjAxNlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmltcG9ydCBkZWZhdWx0cyBmcm9tICcuL2RlZmF1bHRzJ1xyXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnXHJcbmltcG9ydCAqIGFzIGhlbHBlcnMgZnJvbSAnLi9oZWxwZXJzJ1xyXG5pbXBvcnQgU3RvcmFnZSBmcm9tICcuL3V0aWxzL3N0b3JhZ2UnXHJcbmltcG9ydCBIdHRwIGZyb20gJy4vdXRpbHMvaHR0cCdcclxuaW1wb3J0IFNvY2tldCBmcm9tICcuL3V0aWxzL3NvY2tldCdcclxuaW1wb3J0ICogYXMgYXV0aCBmcm9tICcuL3NlcnZpY2VzL2F1dGgnXHJcbmltcG9ydCAqIGFzIGNydWQgZnJvbSAnLi9zZXJ2aWNlcy9jcnVkJ1xyXG5pbXBvcnQgKiBhcyBmaWxlcyBmcm9tICcuL3NlcnZpY2VzL2ZpbGVzJ1xyXG5cclxuKCgpID0+IHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgd2luZG93WydiYWNrYW5kJ10gPSB7fTtcclxuICB3aW5kb3dbJ2JhY2thbmQnXS5pbml0aWF0ZSA9IChjb25maWcgPSB7fSkgPT4ge1xyXG5cclxuICAgIC8vIGNvbWJpbmUgZGVmYXVsdHMgd2l0aCB1c2VyIGNvbmZpZ1xyXG4gICAgT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgY29uZmlnKTtcblxuICAgIC8vIHZlcmlmeSBuZXcgZGVmYXVsdHNcclxuICAgIGlmICghZGVmYXVsdHMuYXBwTmFtZSlcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdhcHBOYW1lIGlzIG1pc3NpbmcnKTtcclxuICAgIGlmICghZGVmYXVsdHMuYW5vbnltb3VzVG9rZW4pXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignYW5vbnltb3VzVG9rZW4gaXMgbWlzc2luZycpO1xyXG4gICAgaWYgKCFkZWZhdWx0cy5zaWduVXBUb2tlbilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaWduVXBUb2tlbiBpcyBtaXNzaW5nJyk7XHJcblxyXG4gICAgLy8gaW5pdCBnbG9iYWxzXHJcbiAgICBsZXQgc3RvcmFnZSA9IG5ldyBTdG9yYWdlKGRlZmF1bHRzLnN0b3JhZ2VUeXBlLCBkZWZhdWx0cy5zdG9yYWdlUHJlZml4KTtcclxuICAgIGxldCBodHRwID0gSHR0cC5jcmVhdGUoe1xyXG4gICAgICBiYXNlVVJMOiBkZWZhdWx0cy5hcGlVcmxcclxuICAgIH0pO1xyXG4gICAgbGV0IHNjb3BlID0ge1xyXG4gICAgICBzdG9yYWdlLFxyXG4gICAgICBodHRwLFxyXG4gICAgICBpc0lFOiBmYWxzZSB8fCAhIWRvY3VtZW50LmRvY3VtZW50TW9kZSxcclxuICAgIH1cclxuICAgIGxldCBzb2NrZXQgPSBudWxsO1xyXG4gICAgaWYgKGRlZmF1bHRzLnJ1blNvY2tldCkge1xyXG4gICAgICBzb2NrZXQgPSBuZXcgU29ja2V0KGRlZmF1bHRzLnNvY2tldFVybCk7XHJcbiAgICAgIHNjb3BlLnNvY2tldCA9IHNvY2tldDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBiaW5kIGdsb2JhbHMgdG8gYWxsIHNlcnZpY2UgZnVuY3Rpb25zXHJcbiAgICBsZXQgc2VydmljZSA9IE9iamVjdC5hc3NpZ24oe30sIGF1dGgsIGNydWQsIGZpbGVzKTtcclxuICAgIGZvciAobGV0IGZuIGluIHNlcnZpY2UpIHtcclxuICAgICAgc2VydmljZVtmbl0gPSBzZXJ2aWNlW2ZuXS5iaW5kKHNjb3BlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXQgaW50ZXJjZXB0b3IgZm9yIGF1dGhIZWFkZXJzICYgcmVmcmVzaFRva2VuXHJcbiAgICBodHRwLmNvbmZpZy5pbnRlcmNlcHRvcnMgPSB7XHJcbiAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uKGNvbmZpZykge1xyXG4gICAgICAgIGlmIChjb25maWcudXJsLmluZGV4T2YoY29uc3RhbnRzLlVSTFMudG9rZW4pID09PSAgLTEgJiYgc3RvcmFnZS5nZXQoJ3VzZXInKSkge1xyXG4gICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcuaGVhZGVycywgc3RvcmFnZS5nZXQoJ3VzZXInKS50b2tlbilcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChlcnJvciwgY29uZmlnLCByZXNvbHZlLCByZWplY3QsIHNjYiwgZWNiKSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZy51cmwuaW5kZXhPZihjb25zdGFudHMuVVJMUy50b2tlbikgPT09ICAtMVxyXG4gICAgICAgICAmJiBkZWZhdWx0cy5tYW5hZ2VSZWZyZXNoVG9rZW5cclxuICAgICAgICAgJiYgZXJyb3Iuc3RhdHVzID09PSA0MDFcclxuICAgICAgICAgJiYgZXJyb3IuZGF0YSAmJiBlcnJvci5kYXRhLk1lc3NhZ2UgPT09ICdpbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4nKSB7XHJcbiAgICAgICAgICAgYXV0aC5fX2hhbmRsZVJlZnJlc2hUb2tlbl9fLmNhbGwoc2NvcGUsIGVycm9yKVxyXG4gICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgIHRoaXMucmVxdWVzdChjb25maWcsIHNjYiwgZWNiKTtcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICBlY2IgJiYgZWNiKGVycm9yKTtcclxuICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBlY2IgJiYgZWNiKGVycm9yKTtcclxuICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZXhwb3NlIGJhY2thbmQgbmFtZXNwYWNlIHRvIHdpbmRvd1xyXG4gICAgd2luZG93WydiYWNrYW5kJ10gPSB7XHJcbiAgICAgIHNlcnZpY2UsXHJcbiAgICAgIGNvbnN0YW50cyxcclxuICAgICAgaGVscGVycyxcclxuICAgIH07XHJcbiAgICBpZihkZWZhdWx0cy5ydW5Tb2NrZXQpIHtcclxuICAgICAgc3RvcmFnZS5nZXQoJ3VzZXInKSAmJiBzb2NrZXQuY29ubmVjdChzdG9yYWdlLmdldCgndXNlcicpLnRva2VuLkF1dGhvcml6YXRpb24gfHwgbnVsbCwgZGVmYXVsdHMuYW5vbnltb3VzVG9rZW4sIGRlZmF1bHRzLmFwcE5hbWUpXHJcbiAgICAgIHdpbmRvd1snYmFja2FuZCddLnNvY2tldCA9IHNvY2tldDtcclxuICAgIH1cclxuXHJcbiAgfVxyXG59KSgpO1xyXG4iLCJpbXBvcnQgeyBQcm9taXNlIH0gZnJvbSAnZXM2LXByb21pc2UnXHJcbmltcG9ydCB7IFVSTFMsIEVWRU5UUywgU09DSUFMX1BST1ZJREVSUyB9IGZyb20gJy4vLi4vY29uc3RhbnRzJ1xyXG5pbXBvcnQgZGVmYXVsdHMgZnJvbSAnLi8uLi9kZWZhdWx0cydcblxyXG5mdW5jdGlvbiBfX2dlbmVyYXRlRmFrZVJlc3BvbnNlX18gKHN0YXR1cyA9IDAsIHN0YXR1c1RleHQgPSAnJywgaGVhZGVycyA9IFtdLCBkYXRhID0gJycpIHtcclxuICByZXR1cm4ge1xyXG4gICAgc3RhdHVzLFxyXG4gICAgc3RhdHVzVGV4dCxcclxuICAgIGhlYWRlcnMsXHJcbiAgICBkYXRhXHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIF9fZGlzcGF0Y2hFdmVudF9fIChuYW1lKSB7XHJcbiAgbGV0IGV2ZW50O1xyXG4gIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCkge1xyXG4gICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcclxuICAgIGV2ZW50LmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTtcclxuICAgIGV2ZW50LmV2ZW50TmFtZSA9IG5hbWU7XHJcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcclxuICAgIGV2ZW50LmV2ZW50VHlwZSA9IG5hbWU7XHJcbiAgICBldmVudC5ldmVudE5hbWUgPSBuYW1lO1xyXG4gICAgd2luZG93LmZpcmVFdmVudCgnb24nICsgZXZlbnQuZXZlbnRUeXBlLCBldmVudCk7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBfX2hhbmRsZVJlZnJlc2hUb2tlbl9fIChlcnJvcikge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBsZXQgdXNlciA9IHRoaXMuc3RvcmFnZS5nZXQoJ3VzZXInKTtcclxuICAgIGlmICghdXNlciB8fCAhdXNlci5kZXRhaWxzLnJlZnJlc2hfdG9rZW4pIHtcclxuICAgICAgcmVqZWN0KF9fZ2VuZXJhdGVGYWtlUmVzcG9uc2VfXygwLCAnJywgW10sICdObyBjYWNoZWQgdXNlciBvciByZWZyZXNoVG9rZW4gZm91bmQuIGF1dGhlbnRpY2F0aW9uIGlzIHJlcXVpcmVkLicpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBfX3NpZ25pbldpdGhUb2tlbl9fLmNhbGwodGhpcywge1xyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLmRldGFpbHMudXNlcm5hbWUsXHJcbiAgICAgICAgcmVmcmVzaFRva2VuOiB1c2VyLmRldGFpbHMucmVmcmVzaF90b2tlbixcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pXHJcbn07XHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VBbm9ueW1vdXNBdXRoIChzY2IpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgbGV0IGRldGFpbHMgPSB7XHJcbiAgICAgIFwiYWNjZXNzX3Rva2VuXCI6IGRlZmF1bHRzLmFub255bW91c1Rva2VuLFxyXG4gICAgICBcInRva2VuX3R5cGVcIjogXCJBbm9ueW1vdXNUb2tlblwiLFxyXG4gICAgICBcImV4cGlyZXNfaW5cIjogMCxcclxuICAgICAgXCJhcHBOYW1lXCI6IGRlZmF1bHRzLmFwcE5hbWUsXHJcbiAgICAgIFwidXNlcm5hbWVcIjogXCJhbm9ueW1vdXNcIixcclxuICAgICAgXCJyb2xlXCI6IFwiVXNlclwiLFxyXG4gICAgICBcImZpcnN0TmFtZVwiOiBcImFub255bW91c1wiLFxyXG4gICAgICBcImxhc3ROYW1lXCI6IFwiYW5vbnltb3VzXCIsXHJcbiAgICAgIFwiZnVsbE5hbWVcIjogXCJhbm9ueW1vdXMgYW5vbnltb3VzXCIsXHJcbiAgICAgIFwicmVnSWRcIjogMCAsXHJcbiAgICAgIFwidXNlcklkXCI6IG51bGxcclxuICAgIH1cclxuICAgIHRoaXMuc3RvcmFnZS5zZXQoJ3VzZXInLCB7XHJcbiAgICAgIHRva2VuOiB7XHJcbiAgICAgICAgQW5vbnltb3VzVG9rZW46IGRlZmF1bHRzLmFub255bW91c1Rva2VuXHJcbiAgICAgIH0sXHJcbiAgICAgIGRldGFpbHMsXHJcbiAgICB9KTtcclxuICAgIF9fZGlzcGF0Y2hFdmVudF9fKEVWRU5UUy5TSUdOSU4pO1xyXG4gICAgaWYgKGRlZmF1bHRzLnJ1blNvY2tldCkge1xyXG4gICAgICB0aGlzLnNvY2tldC5jb25uZWN0KG51bGwsIGRlZmF1bHRzLmFub255bW91c1Rva2VuLCBkZWZhdWx0cy5hcHBOYW1lKTtcclxuICAgIH1cclxuICAgIHNjYiAmJiBzY2IoX19nZW5lcmF0ZUZha2VSZXNwb25zZV9fKDIwMCwgJ09LJywgW10sIGRldGFpbHMpKTtcclxuICAgIHJlc29sdmUoX19nZW5lcmF0ZUZha2VSZXNwb25zZV9fKDIwMCwgJ09LJywgW10sIGRldGFpbHMpKTtcclxuICB9KTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gc2lnbmluICh1c2VybmFtZSwgcGFzc3dvcmQsIHNjYiwgZWNiKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIHRoaXMuaHR0cCh7XHJcbiAgICAgIHVybDogVVJMUy50b2tlbixcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcclxuICAgICAgfSxcclxuICAgICAgZGF0YTogYHVzZXJuYW1lPSR7dXNlcm5hbWV9JnBhc3N3b3JkPSR7cGFzc3dvcmR9JmFwcE5hbWU9JHtkZWZhdWx0cy5hcHBOYW1lfSZncmFudF90eXBlPXBhc3N3b3JkYFxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgdGhpcy5zdG9yYWdlLnNldCgndXNlcicsIHtcclxuICAgICAgICB0b2tlbjoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Jlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VufWBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldGFpbHM6IHJlc3BvbnNlLmRhdGFcclxuICAgICAgfSk7XHJcbiAgICAgIF9fZGlzcGF0Y2hFdmVudF9fKEVWRU5UUy5TSUdOSU4pO1xyXG4gICAgICBpZiAoZGVmYXVsdHMucnVuU29ja2V0KSB7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQuY29ubmVjdCh0aGlzLnN0b3JhZ2UuZ2V0KCd1c2VyJykudG9rZW4uQXV0aG9yaXphdGlvbiwgZGVmYXVsdHMuYW5vbnltb3VzVG9rZW4sIGRlZmF1bHRzLmFwcE5hbWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHNjYiAmJiBzY2IocmVzcG9uc2UpO1xyXG4gICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICBlY2IgJiYgZWNiKGVycm9yKTtcclxuICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBzaWdudXAgKGVtYWlsLCBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLCBzY2IsIGVjYikge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICB0aGlzLmh0dHAoe1xyXG4gICAgICB1cmw6IFVSTFMuc2lnbnVwLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdTaWduVXBUb2tlbic6IGRlZmF1bHRzLnNpZ25VcFRva2VuXHJcbiAgICAgIH0sXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBmaXJzdE5hbWUsXHJcbiAgICAgICAgbGFzdE5hbWUsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmQsXHJcbiAgICAgICAgY29uZmlybVBhc3N3b3JkXHJcbiAgICAgIH1cclxuICAgIH0sIHNjYiAsIGVjYilcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgX19kaXNwYXRjaEV2ZW50X18oRVZFTlRTLlNJR05VUCk7XHJcbiAgICAgIGlmKGRlZmF1bHRzLnJ1blNpZ25pbkFmdGVyU2lnbnVwKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25pbi5jYWxsKHRoaXMsIHJlc3BvbnNlLmRhdGEudXNlcm5hbWUsIHBhc3N3b3JkKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzY2IgJiYgc2NiKHJlc3BvbnNlKTtcclxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgc2NiICYmIHNjYihyZXNwb25zZSk7XHJcbiAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgIGVjYiAmJiBlY2IoZXJyb3IpO1xyXG4gICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuZnVuY3Rpb24gX19nZXRTb2NpYWxVcmxfXyAocHJvdmlkZXJOYW1lLCBpc1NpZ251cCwgaXNBdXRvU2lnblVwKSB7XHJcbiAgbGV0IHByb3ZpZGVyID0gU09DSUFMX1BST1ZJREVSU1twcm92aWRlck5hbWVdO1xyXG4gIGxldCBhY3Rpb24gPSBpc1NpZ251cCA/ICd1cCcgOiAnaW4nO1xyXG4gIGxldCBhdXRvU2lnblVwUGFyYW0gPSBgJnNpZ251cElmTm90U2lnbmVkSW49JHsoIWlzU2lnbnVwICYmIGlzQXV0b1NpZ25VcCkgPyAndHJ1ZScgOiAnZmFsc2UnfWA7XHJcbiAgcmV0dXJuIGAvdXNlci9zb2NpYWxTaWduJHthY3Rpb259P3Byb3ZpZGVyPSR7cHJvdmlkZXIubGFiZWx9JHthdXRvU2lnblVwUGFyYW19JnJlc3BvbnNlX3R5cGU9dG9rZW4mY2xpZW50X2lkPXNlbGYmcmVkaXJlY3RfdXJpPSR7cHJvdmlkZXIudXJsfSZzdGF0ZT1gO1xyXG59XHJcbmZ1bmN0aW9uIF9fc29jaWFsQXV0aF9fIChwcm92aWRlciwgaXNTaWduVXAsIHNwZWMsIGVtYWlsKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGlmICghU09DSUFMX1BST1ZJREVSU1twcm92aWRlcl0pIHtcclxuICAgICAgcmVqZWN0KF9fZ2VuZXJhdGVGYWtlUmVzcG9uc2VfXygwLCAnJywgW10sICdVbmtub3duIFNvY2lhbCBQcm92aWRlcicpKTtcclxuICAgIH1cclxuICAgIGxldCB1cmwgPSAgYCR7ZGVmYXVsdHMuYXBpVXJsfS8xLyR7X19nZXRTb2NpYWxVcmxfXyhwcm92aWRlciwgaXNTaWduVXAsIHRydWUpfSZhcHBuYW1lPSR7ZGVmYXVsdHMuYXBwTmFtZX0ke2VtYWlsID8gJyZlbWFpbD0nK2VtYWlsIDogJyd9JnJldHVybkFkZHJlc3M9YCAvLyAke2xvY2F0aW9uLmhyZWZ9XG4gICAgbGV0IHBvcHVwID0gbnVsbDtcbiAgICBpZiAoIXRoaXMuaXNJRSkge1xuICAgICAgcG9wdXAgPSB3aW5kb3cub3Blbih1cmwsICdzb2NpYWxwb3B1cCcsIHNwZWMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHBvcHVwID0gd2luZG93Lm9wZW4oJycsICcnLCBzcGVjKTtcbiAgICAgIHBvcHVwLmxvY2F0aW9uID0gdXJsO1xuICAgIH1cbiAgICBpZiAocG9wdXAgJiYgcG9wdXAuZm9jdXMpIHsgcG9wdXAuZm9jdXMoKSB9XHJcblxyXG4gICAgbGV0IGhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGxldCB1cmwgPSBlLnR5cGUgPT09ICdtZXNzYWdlJyA/IGUub3JpZ2luIDogZS51cmw7XHJcbiAgICAgIGlmICh1cmwuaW5kZXhPZihsb2NhdGlvbi5ocmVmKSA9PT0gLTEpIHtcclxuICAgICAgICByZWplY3QoX19nZW5lcmF0ZUZha2VSZXNwb25zZV9fKDAsICcnLCBbXSwgJ1Vua25vd24gT3JpZ2luIE1lc3NhZ2UnKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCByZXMgPSBlLnR5cGUgPT09ICdtZXNzYWdlJyA/IEpTT04ucGFyc2UoZS5kYXRhKSA6IEpTT04ucGFyc2UoZS5uZXdWYWx1ZSk7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGUudHlwZSwgaGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICBpZiAocG9wdXAgJiYgcG9wdXAuY2xvc2UpIHsgcG9wdXAuY2xvc2UoKSB9XHJcbiAgICAgIGUudHlwZSA9PSAnU3RvcmFnZScgJiYgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZS5rZXkpO1xyXG5cclxuICAgICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB7XHJcbiAgICAgICAgcmVqZWN0KHJlcyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcmVzb2x2ZShyZXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgaGFuZGxlciA9IGhhbmRsZXIuYmluZChwb3B1cCk7XHJcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgaGFuZGxlciAsIGZhbHNlKTtcclxuICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlciwgZmFsc2UpO1xyXG4gIH0pO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBzb2NpYWxTaWduaW4gKHByb3ZpZGVyLCBzY2IsIGVjYiwgc3BlYyA9ICdsZWZ0PTEsIHRvcD0xLCB3aWR0aD01MDAsIGhlaWdodD01NjAnKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIF9fc29jaWFsQXV0aF9fLmNhbGwodGhpcywgcHJvdmlkZXIsIGZhbHNlLCBzcGVjLCAnJylcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIF9fZGlzcGF0Y2hFdmVudF9fKEVWRU5UUy5TSUdOVVApO1xyXG4gICAgICAgIHJldHVybiBfX3NpZ25pbldpdGhUb2tlbl9fLmNhbGwodGhpcywge1xyXG4gICAgICAgICAgYWNjZXNzVG9rZW46IHJlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICBzY2IgJiYgc2NiKHJlc3BvbnNlKTtcclxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBlY2IgJiYgZWNiKGVycm9yKTtcclxuICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufTtcclxuZXhwb3J0IGZ1bmN0aW9uIHNvY2lhbFNpZ251cCAocHJvdmlkZXIsIGVtYWlsLCBzY2IsIGVjYiwgc3BlYyA9ICdsZWZ0PTEsIHRvcD0xLCB3aWR0aD01MDAsIGhlaWdodD01NjAnKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIF9fc29jaWFsQXV0aF9fLmNhbGwodGhpcywgcHJvdmlkZXIsIHRydWUsIHNwZWMsIGVtYWlsKVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgX19kaXNwYXRjaEV2ZW50X18oRVZFTlRTLlNJR05VUCk7XHJcbiAgICAgICAgaWYoZGVmYXVsdHMucnVuU2lnbmluQWZ0ZXJTaWdudXApIHtcclxuICAgICAgICAgIHJldHVybiBfX3NpZ25pbldpdGhUb2tlbl9fLmNhbGwodGhpcywge1xyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogcmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW5cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHNjYiAmJiBzY2IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgc2NiICYmIHNjYihyZXNwb25zZSk7XHJcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgZWNiICYmIGVjYihlcnJvcik7XHJcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG59XHJcbmZ1bmN0aW9uIF9fc2lnbmluV2l0aFRva2VuX18gKHRva2VuRGF0YSkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBsZXQgZGF0YSA9IFtdO1xyXG4gICAgZm9yIChsZXQgb2JqIGluIHRva2VuRGF0YSkge1xyXG4gICAgICAgIGRhdGEucHVzaChlbmNvZGVVUklDb21wb25lbnQob2JqKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh0b2tlbkRhdGFbb2JqXSkpO1xyXG4gICAgfVxyXG4gICAgZGF0YSA9IGRhdGEuam9pbihcIiZcIik7XHJcblxyXG4gICAgdGhpcy5odHRwKHtcclxuICAgICAgdXJsOiBVUkxTLnRva2VuLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xyXG4gICAgICB9LFxyXG4gICAgICBkYXRhOiBgJHtkYXRhfSZhcHBOYW1lPSR7ZGVmYXVsdHMuYXBwTmFtZX0mZ3JhbnRfdHlwZT1wYXNzd29yZGBcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIHRoaXMuc3RvcmFnZS5zZXQoJ3VzZXInLCB7XHJcbiAgICAgICAgdG9rZW46IHtcclxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtyZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbn1gXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXRhaWxzOiByZXNwb25zZS5kYXRhXHJcbiAgICAgIH0pO1xyXG4gICAgICBfX2Rpc3BhdGNoRXZlbnRfXyhFVkVOVFMuU0lHTklOKTtcclxuICAgICAgaWYgKGRlZmF1bHRzLnJ1blNvY2tldCkge1xyXG4gICAgICAgIHRoaXMuc29ja2V0LmNvbm5lY3QodGhpcy5zdG9yYWdlLmdldCgndXNlcicpLnRva2VuLkF1dGhvcml6YXRpb24sIGRlZmF1bHRzLmFub255bW91c1Rva2VuLCBkZWZhdWx0cy5hcHBOYW1lKTtcclxuICAgICAgfVxyXG4gICAgICByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gcmVxdWVzdFJlc2V0UGFzc3dvcmQgKHVzZXJuYW1lLCBzY2IsIGVjYikge1xyXG4gIHJldHVybiB0aGlzLmh0dHAoe1xyXG4gICAgdXJsOiBVUkxTLnJlcXVlc3RSZXNldFBhc3N3b3JkLFxyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgYXBwTmFtZTogZGVmYXVsdHMuYXBwTmFtZSxcclxuICAgICAgICB1c2VybmFtZVxyXG4gICAgfVxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiByZXNldFBhc3N3b3JkIChuZXdQYXNzd29yZCwgcmVzZXRUb2tlbiwgc2NiLCBlY2IpIHtcclxuICByZXR1cm4gdGhpcy5odHRwKHtcclxuICAgIHVybDogVVJMUy5yZXNldFBhc3N3b3JkLFxyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgbmV3UGFzc3dvcmQsXHJcbiAgICAgICAgcmVzZXRUb2tlblxyXG4gICAgfVxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZCAob2xkUGFzc3dvcmQsIG5ld1Bhc3N3b3JkLCBzY2IsIGVjYikge1xyXG4gIHJldHVybiB0aGlzLmh0dHAoe1xyXG4gICAgdXJsOiBVUkxTLmNoYW5nZVBhc3N3b3JkLFxyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgb2xkUGFzc3dvcmQsXHJcbiAgICAgICAgbmV3UGFzc3dvcmRcclxuICAgIH1cclxuICB9LCBzY2IsIGVjYilcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gc2lnbm91dCAoc2NiKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIHRoaXMuc3RvcmFnZS5yZW1vdmUoJ3VzZXInKTtcclxuICAgIGlmIChkZWZhdWx0cy5ydW5Tb2NrZXQpIHtcclxuICAgICAgdGhpcy5zb2NrZXQuZGlzY29ubmVjdCgpO1xyXG4gICAgfVxyXG4gICAgX19kaXNwYXRjaEV2ZW50X18oRVZFTlRTLlNJR05PVVQpO1xyXG4gICAgc2NiICYmIHNjYihfX2dlbmVyYXRlRmFrZVJlc3BvbnNlX18oMjAwLCAnT0snLCBbXSwgdGhpcy5zdG9yYWdlLmdldCgndXNlcicpKSk7XHJcbiAgICByZXNvbHZlKF9fZ2VuZXJhdGVGYWtlUmVzcG9uc2VfXygyMDAsICdPSycsIFtdLCB0aGlzLnN0b3JhZ2UuZ2V0KCd1c2VyJykpKTtcclxuICB9KTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckRldGFpbHMoc2NiLCBlY2IpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgbGV0IHVzZXIgPSB0aGlzLnN0b3JhZ2UuZ2V0KCd1c2VyJyk7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgZWNiICYmIGVjYihfX2dlbmVyYXRlRmFrZVJlc3BvbnNlX18oMCwgJycsIFtdLCAnTm8gY2FjaGVkIHVzZXIgZm91bmQuIGF1dGhlbnRpY2F0aW9uIGlzIHJlcXVpcmVkLicpKTtcclxuICAgICAgcmVqZWN0KF9fZ2VuZXJhdGVGYWtlUmVzcG9uc2VfXygwLCAnJywgW10sICdObyBjYWNoZWQgdXNlciBmb3VuZC4gYXV0aGVudGljYXRpb24gaXMgcmVxdWlyZWQuJykpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHNjYiAmJiBzY2IoX19nZW5lcmF0ZUZha2VSZXNwb25zZV9fKDIwMCwgJ09LJywgW10sIHVzZXIuZGV0YWlscykpO1xyXG4gICAgICByZXNvbHZlKF9fZ2VuZXJhdGVGYWtlUmVzcG9uc2VfXygyMDAsICdPSycsIFtdLCB1c2VyLmRldGFpbHMpKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cblxyXG4vLyBnZXQgZGF0YSBmcm9tIHVybCBpbiBzb2NpYWwgc2lnbi1pbiBwb3B1cFxyXG4oKCkgPT4ge1xyXG4gIGxldCBkYXRhTWF0Y2ggPSAvXFw/KGRhdGF8ZXJyb3IpPSguKykvLmV4ZWMobG9jYXRpb24uaHJlZik7XHJcbiAgaWYgKGRhdGFNYXRjaCAmJiBkYXRhTWF0Y2hbMV0gJiYgZGF0YU1hdGNoWzJdKSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgZGF0YTogSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoZGF0YU1hdGNoWzJdLnJlcGxhY2UoLyMuKi8sICcnKSkpXHJcbiAgICB9XHJcbiAgICBkYXRhLnN0YXR1cyA9IChkYXRhTWF0Y2hbMV0gPT09ICdkYXRhJykgPyAyMDAgOiAwO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdTT0NJQUxfREFUQScsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAvLyB2YXIgaXNJRSA9IGZhbHNlIHx8ICEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xuICAgIC8vIGlmICghaXNJRSkge1xuICAgIC8vICAgd2luZG93Lm9wZW5lci5wb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeShkYXRhKSwgbG9jYXRpb24ub3JpZ2luKTtcbiAgICAvLyB9XG4gIH1cclxufSkoKTtcclxuIiwiaW1wb3J0IHsgVVJMUywgRVZFTlRTLCBTT0NJQUxfUFJPVklERVJTIH0gZnJvbSAnLi8uLi9jb25zdGFudHMnXHJcblxyXG5mdW5jdGlvbiBfX2FsbG93ZWRQYXJhbXNfXyAoYWxsb3dlZFBhcmFtcywgcGFyYW1zKSB7XHJcbiAgbGV0IG5ld1BhcmFtcyA9IHt9O1xyXG4gIGZvciAobGV0IHBhcmFtIGluIHBhcmFtcykge1xyXG4gICAgaWYgKGFsbG93ZWRQYXJhbXMuaW5kZXhPZihwYXJhbSkgIT0gLTEpIHtcclxuICAgICAgbmV3UGFyYW1zW3BhcmFtXSA9IHBhcmFtc1twYXJhbV07XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBuZXdQYXJhbXM7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExpc3QgKG9iamVjdCwgcGFyYW1zID0ge30sIHNjYiwgZWNiKSB7XHJcbiAgY29uc3QgYWxsb3dlZFBhcmFtcyA9IFsncGFnZVNpemUnLCdwYWdlTnVtYmVyJywnZmlsdGVyJywnc29ydCcsJ3NlYXJjaCcsJ2V4Y2x1ZGUnLCdkZWVwJywncmVsYXRlZE9iamVjdHMnXTtcclxuICByZXR1cm4gdGhpcy5odHRwKHtcclxuICAgIHVybDogYCR7VVJMUy5vYmplY3RzfS8ke29iamVjdH1gLFxyXG4gICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIHBhcmFtczogX19hbGxvd2VkUGFyYW1zX18oYWxsb3dlZFBhcmFtcywgcGFyYW1zKSxcclxuICB9LCBzY2IsIGVjYilcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlIChvYmplY3QsIGRhdGEsIHBhcmFtcyA9IHt9LCBzY2IsIGVjYikge1xyXG4gIGNvbnN0IGFsbG93ZWRQYXJhbXMgPSBbJ3JldHVybk9iamVjdCcsJ2RlZXAnXTtcclxuICByZXR1cm4gdGhpcy5odHRwKHtcclxuICAgIHVybDogYCR7VVJMUy5vYmplY3RzfS8ke29iamVjdH1gLFxyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBkYXRhLFxyXG4gICAgcGFyYW1zOiBfX2FsbG93ZWRQYXJhbXNfXyhhbGxvd2VkUGFyYW1zLCBwYXJhbXMpLFxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRPbmUgKG9iamVjdCwgaWQsIHBhcmFtcyA9IHt9LCBzY2IsIGVjYikge1xyXG4gIGNvbnN0IGFsbG93ZWRQYXJhbXMgPSBbJ2RlZXAnLCdleGNsdWRlJywnbGV2ZWwnXTtcclxuICByZXR1cm4gdGhpcy5odHRwKHtcclxuICAgIHVybDogYCR7VVJMUy5vYmplY3RzfS8ke29iamVjdH0vJHtpZH1gLFxyXG4gICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIHBhcmFtczogX19hbGxvd2VkUGFyYW1zX18oYWxsb3dlZFBhcmFtcywgcGFyYW1zKSxcclxuICB9LCBzY2IsIGVjYilcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlIChvYmplY3QsIGlkLCBkYXRhLCBwYXJhbXMgPSB7fSwgc2NiLCBlY2IpIHtcclxuICBjb25zdCBhbGxvd2VkUGFyYW1zID0gWydyZXR1cm5PYmplY3QnLCdkZWVwJ107XHJcbiAgcmV0dXJuIHRoaXMuaHR0cCh7XHJcbiAgICB1cmw6IGAke1VSTFMub2JqZWN0c30vJHtvYmplY3R9LyR7aWR9YCxcclxuICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICBkYXRhLFxyXG4gICAgcGFyYW1zOiBfX2FsbG93ZWRQYXJhbXNfXyhhbGxvd2VkUGFyYW1zLCBwYXJhbXMpLFxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUgKG9iamVjdCwgaWQsIHNjYiwgZWNiKSB7XHJcbiAgcmV0dXJuIHRoaXMuaHR0cCh7XHJcbiAgICB1cmw6IGAke1VSTFMub2JqZWN0c30vJHtvYmplY3R9LyR7aWR9YCxcclxuICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgfSwgc2NiLCBlY2IpXHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHRyaWdnZXIgKG9iamVjdCwgZmlsZUFjdGlvbiwgZGF0YSA9IHt9LCBzY2IsIGVjYikge1xyXG4gIHJldHVybiB0aGlzLmh0dHAoe1xyXG4gICAgdXJsOiBgJHtVUkxTLm9iamVjdHNBY3Rpb259LyR7b2JqZWN0fT9uYW1lPSR7ZmlsZUFjdGlvbn1gLFxyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBkYXRhLFxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbiIsImltcG9ydCB7IFVSTFMsIEVWRU5UUywgU09DSUFMX1BST1ZJREVSUyB9IGZyb20gJy4vLi4vY29uc3RhbnRzJ1xuXG5leHBvcnQgZnVuY3Rpb24gdXBsb2FkRmlsZSAob2JqZWN0LCBmaWxlQWN0aW9uLCBmaWxlbmFtZSwgZmlsZWRhdGEsIHNjYiwgZWNiKSB7XHJcbiAgcmV0dXJuIHRoaXMuaHR0cCh7XHJcbiAgICB1cmw6IGAke1VSTFMub2JqZWN0c0FjdGlvbn0vJHtvYmplY3R9P25hbWU9JHtmaWxlQWN0aW9ufWAsXHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIGRhdGE6IHtcclxuICAgICAgICBmaWxlbmFtZSxcclxuICAgICAgICBmaWxlZGF0YTogZmlsZWRhdGEuc3Vic3RyKGZpbGVkYXRhLmluZGV4T2YoJywnKSArIDEsIGZpbGVkYXRhLmxlbmd0aClcclxuICAgICAgfVxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVGaWxlIChvYmplY3QsIGZpbGVBY3Rpb24sIGZpbGVuYW1lLCBzY2IsIGVjYikge1xyXG4gIHJldHVybiB0aGlzLmh0dHAoe1xyXG4gICAgdXJsOiBgJHtVUkxTLm9iamVjdHNBY3Rpb259LyR7b2JqZWN0fT9uYW1lPSR7ZmlsZUFjdGlvbn1gLFxyXG4gICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgIGRhdGE6IHtcclxuICAgICAgICBmaWxlbmFtZSxcclxuICAgICAgfVxyXG4gIH0sIHNjYiwgZWNiKVxyXG59XG4iLCJpbXBvcnQgeyBQcm9taXNlIH0gZnJvbSAnZXM2LXByb21pc2UnXHJcblxyXG5jbGFzcyBIdHRwIHtcclxuICBjb25zdHJ1Y3RvciAoY29uZmlnID0ge30pIHtcclxuICAgIGlmICghd2luZG93LlhNTEh0dHBSZXF1ZXN0KVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1hNTEh0dHBSZXF1ZXN0IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXInKTtcclxuXHJcbiAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe1xyXG4gICAgICAvLyB1cmw6ICcvJyxcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge30sXHJcbiAgICAgIHBhcmFtczoge30sXHJcbiAgICAgIGludGVyY2VwdG9yczoge30sXHJcbiAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2UsXHJcbiAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nLFxyXG4gICAgICAvLyB0aW1lb3V0OiBudWxsLFxyXG4gICAgICBhdXRoOiB7XHJcbiAgICAgICB1c2VybmFtZTogbnVsbCxcclxuICAgICAgIHBhc3N3b3JkOiBudWxsXHJcbiAgICAgIH1cclxuICAgIH0sIGNvbmZpZylcclxuICB9XHJcbiAgX2dldEhlYWRlcnMgKGhlYWRlcnMpIHtcclxuICAgIHJldHVybiBoZWFkZXJzLnNwbGl0KCdcXHJcXG4nKS5maWx0ZXIoaGVhZGVyID0+IGhlYWRlcikubWFwKGhlYWRlciA9PiB7XHJcbiAgICAgIGxldCBqaGVhZGVyID0ge31cclxuICAgICAgbGV0IHBhcnRzID0gaGVhZGVyLnNwbGl0KCc6Jyk7XHJcbiAgICAgIGpoZWFkZXJbcGFydHNbMF1dID0gcGFydHNbMV1cclxuICAgICAgcmV0dXJuIGpoZWFkZXI7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX2dldERhdGEgKHR5cGUsIGRhdGEpIHtcclxuICAgIGlmICghdHlwZSkge1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUuaW5kZXhPZignanNvbicpID09PSAtMSkge1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2NyZWF0ZVJlc3BvbnNlIChyZXEsIGNvbmZpZykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3RhdHVzOiByZXEuc3RhdHVzLFxyXG4gICAgICBzdGF0dXNUZXh0OiByZXEuc3RhdHVzVGV4dCxcclxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycyhyZXEuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpLFxyXG4gICAgICBjb25maWcsXHJcbiAgICAgIGRhdGE6IHRoaXMuX2dldERhdGEocmVxLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLCByZXEucmVzcG9uc2VUZXh0KSxcclxuICAgIH1cclxuICB9XHJcbiAgX2hhbmRsZUVycm9yIChkYXRhLCBjb25maWcpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN0YXR1czogMCxcclxuICAgICAgc3RhdHVzVGV4dDogJ0VSUk9SJyxcclxuICAgICAgaGVhZGVyczogW10sXHJcbiAgICAgIGNvbmZpZyxcclxuICAgICAgZGF0YSxcclxuICAgIH1cclxuICB9XHJcbiAgX2VuY29kZVBhcmFtcyAocGFyYW1zKSB7XHJcbiAgICBsZXQgcGFyYW1zQXJyID0gW107XHJcbiAgICBmb3IgKGxldCBwYXJhbSBpbiBwYXJhbXMpIHtcclxuICAgICAgcGFyYW1zQXJyLnB1c2goYCR7cGFyYW19PSR7ZW5jb2RlVVJJKEpTT04uc3RyaW5naWZ5KHBhcmFtc1twYXJhbV0pKX1gKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtc0Fyci5qb2luKCcmJyk7XHJcbiAgfVxyXG4gIF9zZXRIZWFkZXJzIChyZXEsIGhlYWRlcnMpIHtcclxuICAgIGZvciAobGV0IGhlYWRlciBpbiBoZWFkZXJzKSB7XHJcbiAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlciwgaGVhZGVyc1toZWFkZXJdKTtcclxuICAgIH1cclxuICB9XHJcbiAgX3NldERhdGEgKHJlcSwgZGF0YSkge1xyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJlcS5zZW5kKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgZGF0YSAhPSAnb2JqZWN0Jykge1xyXG4gICAgICByZXEuc2VuZChkYXRhKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcclxuICAgICAgcmVxLnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXF1ZXN0IChjZmcsIHNjYiAsIGVjYikge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgIGxldCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgbGV0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29uZmlnLCBjZmcpO1xyXG5cclxuICAgICAgaWYgKCFjb25maWcudXJsIHx8IHR5cGVvZiBjb25maWcudXJsICE9PSAnc3RyaW5nJyB8fCBjb25maWcudXJsLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGxldCByZXMgPSB0aGlzLl9oYW5kbGVFcnJvcigndXJsIHBhcmFtZXRlciBpcyBtaXNzaW5nJywgY29uZmlnKTtcclxuICAgICAgICBlY2IgJiYgZWNiKHJlcyk7XHJcbiAgICAgICAgcmVqZWN0KHJlcyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpIHsgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWUgfVxyXG4gICAgICBpZiAoY29uZmlnLnRpbWVvdXQpIHsgcmVxLnRpbWVvdXQgPSB0cnVlIH1cclxuICAgICAgY29uZmlnLmludGVyY2VwdG9ycy5yZXF1ZXN0ICYmIGNvbmZpZy5pbnRlcmNlcHRvcnMucmVxdWVzdC5jYWxsKHRoaXMsIGNvbmZpZyk7XHJcbiAgICAgIGxldCBwYXJhbXMgPSB0aGlzLl9lbmNvZGVQYXJhbXMoY29uZmlnLnBhcmFtcyk7XHJcbiAgICAgIHJlcS5vcGVuKGNvbmZpZy5tZXRob2QsIGAke2NvbmZpZy5iYXNlVVJMID8gY29uZmlnLmJhc2VVUkwrJy8nIDogJyd9JHtjb25maWcudXJsfSR7cGFyYW1zID8gJz8nK3BhcmFtcyA6ICcnfWAsIHRydWUsIGNvbmZpZy5hdXRoLnVzZXJuYW1lLCBjb25maWcuYXV0aC5wYXNzd29yZCk7XHJcbiAgICAgIHJlcS5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgcmVzID0gdGhpcy5faGFuZGxlRXJyb3IoJ3RpbWVvdXQnLCBjb25maWcpO1xyXG4gICAgICAgIGVjYiAmJiBlY2IocmVzKTtcclxuICAgICAgICByZWplY3QocmVzKTtcclxuICAgICAgfTtcclxuICAgICAgcmVxLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgcmVzID0gdGhpcy5faGFuZGxlRXJyb3IoJ2Fib3J0JywgY29uZmlnKTtcclxuICAgICAgICBlY2IgJiYgZWNiKHJlcyk7XHJcbiAgICAgICAgcmVqZWN0KHJlcyk7XHJcbiAgICAgIH07XHJcbiAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcclxuICAgICAgICAgIGxldCByZXMgPSB0aGlzLl9jcmVhdGVSZXNwb25zZShyZXEsIGNvbmZpZyk7XHJcbiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKXtcclxuICAgICAgICAgICAgaWYgKGNvbmZpZy5pbnRlcmNlcHRvcnMucmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICBjb25maWcuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmNhbGwodGhpcywgcmVzLCBjb25maWcsIHJlc29sdmUsIHJlamVjdCwgc2NiLCBlY2IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNjYiAmJiBzY2IocmVzKTtcclxuICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnLmludGVyY2VwdG9ycy5yZXNwb25zZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgY29uZmlnLmludGVyY2VwdG9ycy5yZXNwb25zZUVycm9yLmNhbGwodGhpcywgcmVzLCBjb25maWcsIHJlc29sdmUsIHJlamVjdCwgc2NiLCBlY2IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIGVjYiAmJiBlY2IocmVzKTtcclxuICAgICAgICAgICAgICByZWplY3QocmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9zZXRIZWFkZXJzKHJlcSwgY29uZmlnLmhlYWRlcnMpO1xyXG4gICAgICB0aGlzLl9zZXREYXRhKHJlcSwgY29uZmlnLmRhdGEpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShjb25maWcgPSB7fSkge1xyXG4gIHZhciBjb250ZXh0ID0gbmV3IEh0dHAoY29uZmlnKTtcclxuICB2YXIgaW5zdGFuY2UgPSAoLi4uYXJncykgPT4gSHR0cC5wcm90b3R5cGUucmVxdWVzdC5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICBpbnN0YW5jZS5jb25maWcgPSBjb250ZXh0LmNvbmZpZztcclxuICByZXR1cm4gaW5zdGFuY2U7XHJcbn1cclxuXHJcbnZhciBodHRwID0gd2luZG93Lmh0dHAgfHwgY3JlYXRlSW5zdGFuY2UoKTtcclxuaHR0cC5jcmVhdGUgPSAoY29uZmlnKSA9PiB7XHJcbiAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKGNvbmZpZyk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBodHRwO1xyXG53aW5kb3cuaHR0cCA9IGh0dHA7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvY2tldCB7XHJcbiAgY29uc3RydWN0b3IgKHVybCkge1xyXG4gICAgaWYgKCF3aW5kb3cuaW8pXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcigncnVuU29ja2V0IGlzIHRydWUgYnV0IHNvY2tldGlvLWNsaWVudCBpcyBub3QgaW5jbHVkZWQnKTtcclxuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMub25BcnIgPSBbXTtcbiAgICB0aGlzLnNvY2tldCA9IG51bGw7XG4gIH1cclxuICBvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gICAgdGhpcy5vbkFyci5wdXNoKHtldmVudE5hbWUsIGNhbGxiYWNrfSk7XHJcbiAgfVxyXG4gIGNvbm5lY3QgKHRva2VuLCBhbm9ueW1vdXNUb2tlbiwgYXBwTmFtZSkge1xyXG4gICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICB0aGlzLnNvY2tldCA9IGlvLmNvbm5lY3QodGhpcy51cmwsIHsnZm9yY2VOZXcnOnRydWUgfSk7XHJcblxyXG4gICAgdGhpcy5zb2NrZXQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuaW5mbyhgdHJ5aW5nIHRvIGVzdGFibGlzaCBhIHNvY2tldCBjb25uZWN0aW9uIHRvICR7YXBwTmFtZX0gLi4uYCk7XHJcbiAgICAgIHRoaXMuc29ja2V0LmVtaXQoXCJsb2dpblwiLCB0b2tlbiwgYW5vbnltb3VzVG9rZW4sIGFwcE5hbWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zb2NrZXQub24oJ2F1dGhvcml6ZWQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuaW5mbyhgc29ja2V0IGNvbm5lY3RlZGApO1xyXG4gICAgICB0aGlzLm9uQXJyLmZvckVhY2goZm4gPT4ge1xyXG4gICAgICAgIHRoaXMuc29ja2V0Lm9uKGZuLmV2ZW50TmFtZSwgZGF0YSA9PiB7XHJcbiAgICAgICAgICBmbi5jYWxsYmFjayhkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNvY2tldC5vbignbm90QXV0aG9yaXplZCcsICgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmRpc2Nvbm5lY3QoKSwgMTAwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNvY2tldC5vbignZGlzY29ubmVjdCcsICgpID0+IHtcclxuICAgICAgY29uc29sZS5pbmZvKGBzb2NrZXQgZGlzY29ubmVjdGApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zb2NrZXQub24oJ3JlY29ubmVjdGluZycsICgpID0+IHtcclxuICAgICAgY29uc29sZS5pbmZvKGBzb2NrZXQgcmVjb25uZWN0aW5nYCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNvY2tldC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS53YXJuKGBlcnJvcjogJHtlcnJvcn1gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBkaXNjb25uZWN0ICgpIHtcclxuICAgIGlmICh0aGlzLnNvY2tldCkge1xyXG4gICAgICB0aGlzLnNvY2tldC5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yYWdlIHtcclxuICBjb25zdHJ1Y3RvciAodHlwZSwgcHJlZml4ID0gJycpIHtcclxuICAgIGlmICghd2luZG93W3R5cGUgKyAnU3RvcmFnZSddKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IodHlwZSArICdTdG9yYWdlIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXInKTtcclxuICAgIHRoaXMucHJlZml4ID0gcHJlZml4O1xyXG4gICAgdGhpcy5kZWxpbWl0ZXIgPSAnX19fX19fX19fXyc7XHJcbiAgICB0aGlzLnN0b3JhZ2UgPSB3aW5kb3dbdHlwZSArICdTdG9yYWdlJ107XHJcbiAgfVxyXG4gIGdldCAoa2V5KSB7XHJcbiAgICBsZXQgaXRlbSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGAke3RoaXMucHJlZml4fSR7a2V5fWApO1xyXG4gICAgaWYgKCFpdGVtKSB7XHJcbiAgICAgIHJldHVybiBpdGVtXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcbiAgICAgIGxldCBbdHlwZSwgdmFsXSA9IGl0ZW0uc3BsaXQodGhpcy5kZWxpbWl0ZXIpO1xuICAgICAgaWYgKHR5cGUgIT0gJ0pTT04nKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsKTtcbiAgICAgIH1cbiAgICB9XHJcbiAgfVxyXG4gIHNldCAoa2V5LCB2YWwpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsICE9ICdvYmplY3QnKSB7XHJcbiAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGAke3RoaXMucHJlZml4fSR7a2V5fWAsIGBTVFJJTkcke3RoaXMuZGVsaW1pdGVyfSR7dmFsfWApO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGAke3RoaXMucHJlZml4fSR7a2V5fWAsIGBKU09OJHt0aGlzLmRlbGltaXRlcn0ke0pTT04uc3RyaW5naWZ5KHZhbCl9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJlbW92ZSAoa2V5KSB7XHJcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShgJHt0aGlzLnByZWZpeH0ke2tleX1gKTtcclxuICB9XHJcbiAgY2xlYXIoKSB7XHJcbiAgICBmb3IodmFyIGkgPTA7IGkgPCB0aGlzLnN0b3JhZ2UubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgaWYodGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy5zdG9yYWdlLmtleShpKSkuaW5kZXhPZih0aGlzLnByZWZpeCkgIT0gLTEpXHJcbiAgICAgICAgdGhpcy5yZW1vdmUodGhpcy5zdG9yYWdlLmtleShpKSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19\n"]}